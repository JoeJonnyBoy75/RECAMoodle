{"version":3,"file":"famehandler.min.js","sources":["../src/famehandler.js"],"sourcesContent":["/* eslint-disable no-console */\n/* eslint-disable no-unused-vars */\ndefine(['jquery', 'core/ajax'], function($, Ajax){\n\n    const registerEvents = () => {\n        $(document).on(\"click\", \".review-card__fame-like\", function() {\n            var reviewid = $(this).find(\".likebtn\").attr(\"data-reviewid\");\n            updateFameCount(this, reviewid, 1);\n        });\n\n        $(document).on(\"click\", \".review-card__fame-dlike\", function(){\n            var reviewid = $(this).find(\".dlikebtn\").attr(\"data-reviewid\");\n            updateFameCount(this, reviewid, 0);\n        });\n    };\n\n    const updateFameCount = (_this, reviewid, famestatus) => {\n\n        var uncheck = false;\n\n        // Return if Clicked button is already active.\n        if ($(_this).find('span.active').length == 1) {\n            uncheck = true;\n        }\n\n        Ajax.call([{\n            methodname: 'block_edwiserratingreview_store_likedislike',\n            args: { reviewid: reviewid, famestatus: famestatus, uncheck: uncheck },\n            done: function (data) {\n                $('.count.liked[data-reviewid=\"' + reviewid + '\"]').html(data['liked']);\n                $('.count.dliked[data-reviewid=\"' + reviewid + '\"]').html(data['dliked']);\n                changeUIstatus(_this, reviewid, uncheck);\n            },\n            fail: function () {\n                console.log(Notification.exception);\n            }\n        }]);\n    };\n\n    const changeUIstatus = (_this, reviewid, uncheck) => {\n\n        if (uncheck) {\n            $(_this).find(\".active\").removeClass('active');\n            return;\n        }\n\n        // here we got to know that like button is clicked.\n        var otherbtn = '';\n        if ($(_this).find(\".likebtn:not(.active)\").length == 1) {\n            otherbtn = \".dlikebtn[data-reviewid='\" + reviewid + \"']\";\n            $(_this).find(\".likebtn\").addClass(\"active\");\n            $(otherbtn).removeClass(\"active\");\n        }\n\n        // here we got to know that dlike button is clicked.\n        if ($(_this).find(\".dlikebtn:not(.active)\").length == 1) {\n            otherbtn = \".likebtn[data-reviewid='\" + reviewid + \"']\";\n            $(_this).find(\".dlikebtn\").addClass(\"active\");\n            $(otherbtn).removeClass(\"active\");\n        }\n    };\n\n    const init = () => {\n        registerEvents();\n    };\n\n    return {\n        init: init\n    };\n\n});\n"],"names":["define","$","Ajax","registerEvents","document","on","reviewid","this","find","attr","updateFameCount","_this","famestatus","uncheck","length","call","methodname","args","done","data","html","changeUIstatus","fail","console","log","Notification","exception","removeClass","otherbtn","addClass","init"],"mappings":"AAEAA,+CAAO,CAAC,SAAU,cAAc,SAASC,EAAGC,YAElCC,eAAiB,KACnBF,EAAEG,UAAUC,GAAG,QAAS,2BAA2B,eAC3CC,SAAWL,EAAEM,MAAMC,KAAK,YAAYC,KAAK,iBAC7CC,gBAAgBH,KAAMD,SAAU,MAGpCL,EAAEG,UAAUC,GAAG,QAAS,4BAA4B,eAC5CC,SAAWL,EAAEM,MAAMC,KAAK,aAAaC,KAAK,iBAC9CC,gBAAgBH,KAAMD,SAAU,OAIlCI,gBAAkB,CAACC,MAAOL,SAAUM,kBAElCC,SAAU,EAG6B,GAAvCZ,EAAEU,OAAOH,KAAK,eAAeM,SAC7BD,SAAU,GAGdX,KAAKa,KAAK,CAAC,CACPC,WAAY,8CACZC,KAAM,CAAEX,SAAUA,SAAUM,WAAYA,WAAYC,QAASA,SAC7DK,KAAM,SAAUC,MACZlB,EAAE,+BAAiCK,SAAW,MAAMc,KAAKD,KAAI,OAC7DlB,EAAE,gCAAkCK,SAAW,MAAMc,KAAKD,KAAI,QAC9DE,eAAeV,MAAOL,SAAUO,UAEpCS,KAAM,WACFC,QAAQC,IAAIC,aAAaC,gBAK/BL,eAAiB,CAACV,MAAOL,SAAUO,cAEjCA,QACAZ,EAAEU,OAAOH,KAAK,WAAWmB,YAAY,mBAKrCC,SAAW,GACsC,GAAjD3B,EAAEU,OAAOH,KAAK,yBAAyBM,SACvCc,SAAW,4BAA8BtB,SAAW,KACpDL,EAAEU,OAAOH,KAAK,YAAYqB,SAAS,UACnC5B,EAAE2B,UAAUD,YAAY,WAI0B,GAAlD1B,EAAEU,OAAOH,KAAK,0BAA0BM,SACxCc,SAAW,2BAA6BtB,SAAW,KACnDL,EAAEU,OAAOH,KAAK,aAAaqB,SAAS,UACpC5B,EAAE2B,UAAUD,YAAY,mBAQzB,CACHG,KALS,KACT3B"}