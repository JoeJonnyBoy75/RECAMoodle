define("block_edwiserratingreview/formhandler",["jquery","core/ajax","core/templates","core/notification","block_edwiserratingreview/reviewfilter"],(function($,Ajax,Templates,Notification,Reviewfilter){const SELECTORS_FEEDBACKFORM=".feedbackform",SELECTORS_FORMCONTAINER=".feedbackform-container",SELECTORS_WRITEREVIEWBTN=".writereviewbtn",SELECTORS_STARINPUT=".rating-stars-input input[name='rating']",SELECTORS_SUBMITREVIEW=".submitreview",SELECTORS_CANCELREVIEW=".cancelreview";return{init:function(){(()=>{$(document).off().on("click",SELECTORS_SUBMITREVIEW,(function(e){e.preventDefault();var rating=$('input[name="rating"]:checked').val(),review=$('[name="review"]').val();Ajax.call([{methodname:"block_edwiserratingreview_store_userfeedback",args:{starcount:rating,contextid:M.cfg.contextid,feedbackreview:review,fortype:"course"},done:function(){$(SELECTORS_FEEDBACKFORM).remove(),$(SELECTORS_WRITEREVIEWBTN).show().removeAttr("disabled"),$(SELECTORS_FORMCONTAINER).empty().append(datasubmittionalert)},fail:function(){console.log(Notification.exception)}}])}));var datasubmittionalert='<div class="alert alert-warning alert-dismissible fade show" role="alert" style="margin-top:10px;" >\n        Thank you for submitting the review. Your review will be published soon.\n            <button type="button" class="close" data-dismiss="alert" aria-label="Close">\n             <span aria-hidden="true">&times;</span>\n            </button>\n        </div>';$(document).on("click",SELECTORS_STARINPUT,(function(){$(SELECTORS_SUBMITREVIEW).removeAttr("disabled")})),$(document).on("click",SELECTORS_CANCELREVIEW,(function(){$(SELECTORS_FEEDBACKFORM).remove(),$(SELECTORS_WRITEREVIEWBTN).show().removeAttr("disabled")})),$(SELECTORS_WRITEREVIEWBTN).off().click((function(){$(SELECTORS_WRITEREVIEWBTN).attr("disabled",!0),Ajax.call([{methodname:"block_edwiserratingreview_get_review",args:{contextid:M.cfg.contextid},done:function(data){Templates.render("block_edwiserratingreview/feedbackform",data.data).done((function(html,js){Templates.replaceNodeContents($(SELECTORS_FORMCONTAINER),html,js),$("#rate-"+data.data.star_ratings).click()})),$(SELECTORS_WRITEREVIEWBTN).hide()},fail:function(){console.log(Notification.exception)}}])}))})()}}}));

//# sourceMappingURL=formhandler.min.js.map