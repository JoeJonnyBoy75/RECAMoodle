define("block_edwiserratingreview/famehandler",["jquery","core/ajax"],(function($,Ajax){const registerEvents=()=>{$(document).on("click",".review-card__fame-like",(function(){var reviewid=$(this).find(".likebtn").attr("data-reviewid");updateFameCount(this,reviewid,1)})),$(document).on("click",".review-card__fame-dlike",(function(){var reviewid=$(this).find(".dlikebtn").attr("data-reviewid");updateFameCount(this,reviewid,0)}))},updateFameCount=(_this,reviewid,famestatus)=>{var uncheck=!1;1==$(_this).find("span.active").length&&(uncheck=!0),Ajax.call([{methodname:"block_edwiserratingreview_store_likedislike",args:{reviewid:reviewid,famestatus:famestatus,uncheck:uncheck},done:function(data){$('.count.liked[data-reviewid="'+reviewid+'"]').html(data.liked),$('.count.dliked[data-reviewid="'+reviewid+'"]').html(data.dliked),changeUIstatus(_this,reviewid,uncheck)},fail:function(){console.log(Notification.exception)}}])},changeUIstatus=(_this,reviewid,uncheck)=>{if(uncheck)$(_this).find(".active").removeClass("active");else{var otherbtn="";1==$(_this).find(".likebtn:not(.active)").length&&(otherbtn=".dlikebtn[data-reviewid='"+reviewid+"']",$(_this).find(".likebtn").addClass("active"),$(otherbtn).removeClass("active")),1==$(_this).find(".dlikebtn:not(.active)").length&&(otherbtn=".likebtn[data-reviewid='"+reviewid+"']",$(_this).find(".dlikebtn").addClass("active"),$(otherbtn).removeClass("active"))}};return{init:()=>{registerEvents()}}}));

//# sourceMappingURL=famehandler.min.js.map