define ("block_remuiblck/userstats",["jquery","core/ajax","core/chartjs"],function(a,b){var c=null,d={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:1,percentageInnerCutout:50,animationSteps:100,animateRotate:!0,animateScale:!1,responsive:!0,maintainAspectRatio:!0,legendTemplate:"<ul class=\"<%=name.toLowerCase()%>-legend\"><% for (var i=0; i<segments.length; i++){%>"+"<span style=\"background-color:<%=segments[i].fillColor%>\"></span>"+"<%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>",tooltipTemplate:"<%=value %> <%=label%> users",legend:{display:!1}};function e(b){if(null!==c){c.destroy()}var e=a("#pieChartblock").get(0).getContext("2d"),f={labels:b.labels,datasets:[{data:b.data,backgroundColor:b.background_color,hoverBackgroundColor:b.hoverBackground_color}]};c=new Chart(e,{type:"doughnut",data:f,options:d})}function f(){var c=a("#coursecategorylistblock option:selected").data("id");b.call([{methodname:"block_remuiblck_get_enrolled_users_by_category",args:{categoryid:c}}])[0].done(function(b){if(null===b){a("canvas#pieChartblock").hide();a(".enroll-stats-nouserserror").hide();a(".chart-legend").hide();a(".enroll-stats-error").show()}else{a(".enroll-stats-error").hide();a(".enroll-stats-nouserserror").hide();a(".chart-legend").show();a("canvas#pieChartblock").show();a("#enrolled_users_stats_block .chart-legend").empty();var c=["#2196f3","#00bcd4","#009688","#4caf50","#8bc34a","#ffeb3b","#ff9800","#f44336","#9c27b0","#673ab7","#3f51b5"];a.each(b.labels,function(d,e){a("#enrolled_users_stats_block .chart-legend").append("<li class=\"list-group-item p-0 pt-1\">"+e+": <span class=\"badge badge-round\" style=\"background-color:"+c[d]+";\">"+b.data[d]+"</span></li>")});e(b)}}).fail(function(){a("canvas#pieChartblock").hide();a(".enroll-stats-error").show()})}if(a("#enrolled_users_stats_block select").length){a("#enrolled_users_stats_block select#coursecategorylistblock").on("change",function(){f()});f()}});
//# sourceMappingURL=userstats.min.js.map
