{"version":3,"sources":["../src/Plugin.js"],"names":["define","exports","_jquery","Object","defineProperty","value","pluginFactory","getDefaults","getPlugin","getPluginAPI","Plugin","_jquery2","obj","__esModule","plugins","apis","$el","options","name","getName","isRendered","default","fn","render","api","registerApi","split","event","func","callback","e","plugin","data","extend","initialize","selector","context","off","on","PluginClass"],"mappings":"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","sourcesContent":["/* eslint-disable capitalized-comments */\n\"use strict\";\ndefine([\"exports\", \"jquery\"], function(exports, _jquery) {\n\n    Object.defineProperty(exports, \"__esModule\", {\n        value: true\n    });\n    exports.pluginFactory = exports.getDefaults = exports.getPlugin = exports.getPluginAPI = exports.Plugin = undefined;\n\n    var _jquery2 = _interopRequireDefault(_jquery);\n\n    /**\n     * @param {String} obj\n     */\n    function _interopRequireDefault(obj) {\n        return obj && obj.__esModule ? obj : {\n            \"default\": obj\n        };\n    }\n\n    let plugins = {};\n    let apis = {};\n\n    class Plugin {\n        constructor($el, options = {}) {\n            this.name = this.getName();\n            this.$el = $el;\n            this.options = options;\n            this.isRendered = false;\n        }\n\n        getName() {\n            return 'plugin';\n        }\n\n        render() {\n            if (_jquery2.default.fn[this.name]) {\n                this.$el[this.name](this.options);\n            } else {\n                return false;\n            }\n        }\n\n        initialize() {\n            if (this.isRendered) {\n                return false;\n            }\n\n            this.render();\n            this.isRendered = true;\n        }\n\n        static getDefaults() {\n            return {};\n        }\n\n        static register(name, obj) {\n            if (typeof obj === 'undefined') {\n                return;\n            }\n\n            plugins[name] = obj;\n\n            if (typeof obj.api !== 'undefined') {\n                Plugin.registerApi(name, obj);\n            }\n        }\n\n        static registerApi(name, obj) {\n            let api = obj.api();\n\n            if (typeof api === 'string') {\n                let api = obj.api().split('|');\n                let event = api[0] + `.plugin.${name}`;\n                let func = api[1] || 'render';\n\n                let callback = function(e) {\n                    let $el = (0, _jquery2.default)(this);\n                    let plugin = $el.data('pluginInstance');\n\n                    if (!plugin) {\n                        plugin = new obj($el, _jquery2.default.extend(true, {}, getDefaults(name), $el.data()));\n                        plugin.initialize();\n                        $el.data('pluginInstance', plugin);\n                    }\n\n                    plugin[func](e);\n                };\n\n                apis[name] = function(selector, context) {\n                    if (context) {\n                        (0, _jquery2.default)(context).off(event);\n                        (0, _jquery2.default)(context).on(event, selector, callback);\n                    } else {\n                        (0, _jquery2.default)(selector).on(event, callback);\n                    }\n                };\n            } else if (typeof api === 'function') {\n                apis[name] = api;\n            }\n        }\n\n    }\n\n    exports.default = Plugin;\n\n    /**\n     * @param {String} name\n     */\n    function getPluginAPI(name) {\n        if (typeof name === 'undefined') {\n            return apis;\n        } else {\n            return apis[name];\n        }\n    }\n\n    /**\n     * @param {String} name\n     */\n    function getPlugin(name) {\n        if (typeof plugins[name] !== 'undefined') {\n            return plugins[name];\n        } else {\n            // console.warn('Plugin:' + name + ' has no warpped class.');\n            return false;\n        }\n    }\n\n    /**\n     * @param {String} name\n     */\n    function getDefaults(name) {\n        let PluginClass = getPlugin(name);\n\n        if (PluginClass) {\n            return PluginClass.getDefaults();\n        } else {\n            return {};\n        }\n    }\n\n    /**\n     * @param {String} name\n     * @param {String} $el\n     * @param {String} options\n     */\n    function pluginFactory(name, $el, options = {}) {\n        let PluginClass = getPlugin(name);\n\n        if (PluginClass && typeof PluginClass.api === 'undefined') {\n            return new PluginClass($el, _jquery2.default.extend(true, {}, getDefaults(name), options));\n        } else if (_jquery2.default.fn[name]) {\n            let plugin = new Plugin($el, options);\n\n            plugin.getName = function() {\n                return name;\n            };\n\n            plugin.name = name;\n            return plugin;\n        } else if (typeof PluginClass.api !== 'undefined') {\n            return false;\n        } else {\n            // console.warn('Plugin:' + name + ' script is not loaded.');\n            return false;\n        }\n    }\n\n    exports.Plugin = Plugin;\n    exports.getPluginAPI = getPluginAPI;\n    exports.getPlugin = getPlugin;\n    exports.getDefaults = getDefaults;\n    exports.pluginFactory = pluginFactory;\n\n    return Plugin;\n});"],"file":"Plugin.min.js"}