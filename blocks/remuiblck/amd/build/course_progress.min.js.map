{"version":3,"sources":["../src/course_progress.js"],"names":["define","$","Ajax","Notification","Templates","ModalFactory","ModalEvents","SELECTORS","ROOT","TABLE","DATA_TABLE","STUDENT_PROGRESS_ELEMENT","STUDENT_PROGRESS_TABLE","COURSE_NAME","MESSAGE_HIDDEN","MESSAGE_AREA","TOGGLE_DESCRIPTION","REVERT","CUSTOM_MESSAGE","MESSAGE_SEND","BLOCK_PROCESSING","ALWAYS_LOAD","COURSE_PROGRESSING","LOAD_COURSE_PROGRESS","PANEL","PANEL_HEADING","PANEL_ACTIONS","DATA","coursesTable","alwaysloadwarning","PROMISES","GET_COURSES","search","length","start","order","loadProgress","call","methodname","args","loadprogress","GET_COURSE_PROGRESS","courseid","SEND_MESSAGE","studentid","messagetext","generate_courses_table_data","courses","data","forEach","course","dData","index","enrolledStudents","id","fullname","startdate","students","percentage","progress","push","createDatatable","root","show","find","DataTable","language","searchPlaceholder","M","util","get_string","emptyTable","lengthMenu","paginate","first","previous","next","last","callback","addClass","loadCourseProgress","is","value","done","response","recordsTotal","removeClass","fail","exception","columns","responsive","drawCallback","createPieProgress","target","element","asPieProgress","namespace","speed","classes","svg","number","content","courseProgressTable","getCourseProgressData","render","html","js","hide","replaceNodeContents","STUDENT_PROOGRESS_VISIBLE","animate","scrollTop","offset","top","sendMessageToUser","message","clearModalFields","click","ex","val","toggleAlwaysLoading","checked","set_user_preference","toggleClass","draw","initializeEvents","on","destroy","empty","focus","parents","checkbox","create","type","types","SAVE_CANCEL","title","body","then","modal","modalRoot","getRoot","save","cancel","prop","updateContainers","button","detach","panelHeading","closest","panelActions","prepend","taskProcessing","panel","parent","init","document","ready"],"mappings":"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","sourcesContent":["/* eslint-disable no-dupe-keys */\n/* eslint-disable camelcase */\n/* eslint-disable max-len */\n/* eslint-disable no-unused-vars */\n/* eslint-disable no-empty-function */\n/* eslint-disable promise/catch-or-return */\n/* eslint-disable promise/always-return */\ndefine([\n    'jquery',\n    'core/ajax',\n    'core/notification',\n    'core/templates',\n    'core/modal_factory',\n    'core/modal_events',\n    'core/modal_save_cancel',\n    'block_remuiblck/dataTables.bootstrap4',\n    'block_remuiblck/jquery-asPieProgress',\n    'block_remuiblck/aspieprogress'\n], function(\n    $,\n    Ajax,\n    Notification,\n    Templates,\n    ModalFactory,\n    ModalEvents\n) {\n    var SELECTORS = {\n        ROOT: '',\n        TABLE: '#DataTables_Teacher',\n        DATA_TABLE: '#DataTables_Teacher_wrapper',\n        STUDENT_PROGRESS_ELEMENT: '.student_progress_ele',\n        STUDENT_PROGRESS_TABLE: '#wdmCourseProgressTable',\n        COURSE_NAME: '.wdm_course_name.has-student',\n        MESSAGE_HIDDEN: '#messageidhidden',\n        MESSAGE_AREA: '#messagearea',\n        TOGGLE_DESCRIPTION: '.toggle-desc',\n        REVERT: '#courserevertbtn',\n        CUSTOM_MESSAGE: '.custom-message',\n        MESSAGE_SEND: '.send-message',\n        BLOCK_PROCESSING: '.block-processing',\n        ALWAYS_LOAD: '#always-load-progress',\n        COURSE_PROGRESSING: '.course-progress-settings',\n        LOAD_COURSE_PROGRESS: '#load-progress',\n        PANEL: '.panel',\n        PANEL_HEADING: '.panel-heading',\n        PANEL_ACTIONS: 'panel-actions',\n        BLOCK_PROCESSING: '.block-processing',\n        STUDENT_PROOGRESS_VISIBLE: 'student-progress-visible'\n    };\n\n    // Data object to store local data\n    var DATA = {\n        coursesTable: false,\n        alwaysloadwarning: false\n    };\n\n    var PROMISES = {\n        /**\n         * Get courses using ajax\n         * @param  {String}  search Search query\n         * @param  {Number}  length Number of courses\n         * @param  {Number}  start  Start index of courses\n         * @param  {Array}   order  Sorting order\n         * @param {int} loadProgress\n         * @return {Promise}        Ajax promise\n         */\n        GET_COURSES: function(search, length, start, order, loadProgress) {\n            return Ajax.call([{\n                methodname: 'block_remuiblck_get_course_progress_list',\n                args: {\n                    search: search,\n                    length: length,\n                    start: start,\n                    order: order,\n                    loadprogress: loadProgress\n                }\n            }])[0];\n        },\n        /**\n         * Get course progress using course id and ajax\n         * @param  {Number}  courseid Course id\n         * @return {Promise}          Ajax promise\n         */\n        GET_COURSE_PROGRESS: function(courseid) {\n            return Ajax.call([{\n                methodname: 'block_remuiblck_get_course_progress',\n                args: {\n                    courseid: courseid\n                }\n            }])[0];\n        },\n        /**\n         * Send message to student using student id and ajax\n         * @param  {Number} studentid   Student id\n         * @param  {String} messagetext Message text\n         * @return {Promise}            Ajax promise\n         */\n        SEND_MESSAGE: function(studentid, messagetext) {\n            return Ajax.call([{\n                methodname: 'block_remuiblck_send_message',\n                args: {\n                    studentid: studentid,\n                    messagetext: messagetext\n                }\n            }])[0];\n        }\n    };\n\n    /**\n     * Generate teacher courses table data from ajax response\n     * @param  {Array}  courses Courses list with course details\n     * @return {Object}         Data object\n     */\n    function generate_courses_table_data(courses) {\n        var data = [];\n        courses.forEach(function(course) {\n            var dData = {};\n            dData.index = '<div class=\"w-50\" tabindex=\"0\">' + course.index + '</div>';\n            if (course.enrolledStudents > 0) {\n                dData.course = '<div class=\"wdm_course_name has-student\" data-courseid=\"' + course.id + '\"><a href=\"javascript:void(0)\">' + course.fullname + '</a></div>';\n            } else {\n                dData.course = '<div class=\"wdm_course_name\" data-courseid=\"' + course.id + '\" >' + course.fullname + '</div>';\n            }\n            dData.startdate = course.startdate;\n            dData.students = '<div class=\"w-100\"><span class=\"w-full pl-40\">' + course.enrolledStudents + '</span></div>';\n            if (course.percentage == -1) {\n                dData.progress = '';\n            } else {\n                dData.progress = '<td class=\"w-100 px-10\"><div class=\"pie-progress pie-progress-xs m-0 w-35\" data-plugin=\"pieProgress\" data-valuemax=\"50\" data-barcolor=\"#11c26d\" data-size=\"20\" data-barsize=\"3\" data-goal=\"35\" aria-valuenow=\"' + course.percentage + '\" role=\"progressbar\" style=\"max-width: 35px!important;\"><div class=\"pie-progress-content\" style=\"z-index:2;\"> </div> <span class=\" progress-percent\" style=\"margin-left: 50px;position: absolute;top: 8px;\">' + course.percentage + '%</span> </div></td>';\n            }\n            data.push(dData);\n        });\n        return data;\n    }\n\n    //* ****************\n    // This is code is for table creation on dashboard\n    // this code also toggles between course progress and student progress table\n    // Function createDatatable() creates course progress table\n    /**\n     * @param {DOM} root\n     */\n    function createDatatable(root) {\n        DATA.coursesTable = $(root).show().find(SELECTORS.TABLE).DataTable({\n            \"paging\":   true,\n            \"pagingType\": \"simple_numbers\",\n            \"autoWidth\": true,\n            \"scrollX\": true,\n            \"bPaginate\": true,\n            \"bServerSide\": true,\n            language: {\n                searchPlaceholder: M.util.get_string('search', 'moodle'),\n                emptyTable: M.util.get_string('nomatchingcourses', 'core_backup'),\n                lengthMenu: M.util.get_string('show', 'moodle') + \" _MENU_ \" + M.util.get_string('entries', 'moodle'),\n                paginate: {\n                    first:      M.util.get_string('first', 'moodle'),\n                    previous:   M.util.get_string('previous', 'moodle'),\n                    next:       M.util.get_string('next', 'moodle'),\n                    last:       M.util.get_string('last', 'moodle')\n                },\n            },\n            \"ajax\": function(data, callback, settings) {\n                $(root).find(SELECTORS.BLOCK_PROCESSING).addClass('show');\n                let loadCourseProgress = $(root + ' ' + SELECTORS.COURSE_PROGRESSING).is('.load-progress');\n                PROMISES.GET_COURSES(\n                    data.search.value,\n                    data.length,\n                    data.start,\n                    data.order[0],\n                    loadCourseProgress\n                ).done(function(response) {\n                    if (response.recordsTotal == 0) {\n                        response.data = [];\n                        callback(response);\n                        $(root).find(SELECTORS.BLOCK_PROCESSING).removeClass('show');\n                        return;\n                    }\n                    response.data = generate_courses_table_data(response.courses);\n                    callback(response);\n                    $(root).find(SELECTORS.BLOCK_PROCESSING).removeClass('show');\n                }).fail(Notification.exception);\n            },\n            columns: [\n                {data: \"index\"},\n                {data: \"course\"},\n                {data: \"startdate\"},\n                {data: \"students\", \"orderable\": false},\n                {data: \"progress\", \"orderable\": false}\n            ],\n            responsive: true,\n            drawCallback: function(settings) {\n                createPieProgress('');\n            }\n        });\n    }\n\n\n    /**\n     * Create pie progress where div with .pie-progress class is present\n     * @param {String} target\n     */\n    function createPieProgress(target) {\n        var element = $(SELECTORS.ROOT);\n        if (target != '') {\n            element = element.find(target);\n        }\n        element.find('.pie-progress').asPieProgress({\n            namespace: 'pie-progress',\n            speed: 30,\n            classes: {\n                svg: 'pie-progress-svg',\n                element: 'pie-progress',\n                number: 'pie-progress-number',\n                content: 'pie-progress-content'\n            }\n        });\n    }\n\n    var courseProgressTable;\n    /**\n     * Fetch students course progress data using ajax and display in table format\n     * @param  {int} courseid Course id\n     */\n    function getCourseProgressData(courseid) {\n        $(SELECTORS.ROOT).find(SELECTORS.BLOCK_PROCESSING).addClass('show');\n        PROMISES.GET_COURSE_PROGRESS(courseid).done(function(response) {\n            Templates.render('block_remuiblck/course_progress_view', response)\n            .done(function(html, js) {\n                $(SELECTORS.ROOT).find(SELECTORS.DATA_TABLE).hide();\n                Templates.replaceNodeContents($(SELECTORS.ROOT).find(SELECTORS.STUDENT_PROGRESS_ELEMENT), html, js);\n                createPieProgress(SELECTORS.STUDENT_PROGRESS_ELEMENT);\n                courseProgressTable = $(SELECTORS.ROOT).find(SELECTORS.STUDENT_PROGRESS_TABLE).DataTable({\n                    \"scrollY\":        \"300px\",\n                    \"scrollCollapse\": true,\n                    \"paging\": false,\n                    \"retrieve\": true,\n                    \"lengthchange\": false,\n                    \"autoWidth\": true,\n                    \"scrollX\": true,\n                    \"search\": \"Fred\",\n                    \"info\": false,\n                    language: {\n                        searchPlaceholder: \"Search\"\n                    },\n                    responsive: true,\n                });\n\n                $(SELECTORS.ROOT).find('div.dataTables_filter input').addClass('form-control');\n                $(SELECTORS.ROOT).find('div.dataTables_length select').addClass('form-control');\n\n                $(SELECTORS.ROOT).addClass(SELECTORS.STUDENT_PROOGRESS_VISIBLE);\n                $(SELECTORS.ROOT).find(SELECTORS.BLOCK_PROCESSING).removeClass('show');\n\n                $('html, body').animate({\n                    scrollTop: $(SELECTORS.ROOT).offset().top - 120\n                }, 300);\n            })\n            .fail(function() {\n            });\n        }).fail(function() {\n            $(SELECTORS.ROOT).find('div#analysis-chart-area').hide();\n        });\n\n    }\n\n    /**\n     * Send message to user\n     * @param  {int}    studentid Student id\n     * @param  {string} message   Text message\n     */\n    function sendMessageToUser(studentid, message) {\n        PROMISES.SEND_MESSAGE(studentid, message)\n        .done(function() {\n            clearModalFields();\n            $(SELECTORS.ROOT).find('.close-message').click();\n        })\n        .fail(function(ex) {\n            Notification.exception(ex);\n            $(SELECTORS.ROOT).find('div#analysis-chart-area').hide();\n        });\n    }\n\n    /**\n     * Clear message modal field\n     */\n    function clearModalFields() {\n        $(SELECTORS.ROOT).find(SELECTORS.MESSAGE_HIDDEN).val('');\n        $(SELECTORS.ROOT).find(SELECTORS.MESSAGE_AREA).val('');\n    }\n\n    /**\n     * Toggle always load course progress preference\n     * @param {Boolean} checked If checked course progress will be loaded always\n     */\n    function toggleAlwaysLoading(checked) {\n        M.util.set_user_preference('always-load-progress', checked);\n        $(SELECTORS.ROOT).find(SELECTORS.COURSE_PROGRESSING).toggleClass('always-loading', checked);\n        $(SELECTORS.ROOT).find(SELECTORS.COURSE_PROGRESSING).toggleClass('load-progress', checked);\n        DATA.coursesTable.draw(false);\n    }\n\n    /**\n     * Initialze events for course progress block\n     * @param  {String} root Root container id.\n     */\n    function initializeEvents(root) {\n        // Destroy the table and send ajax request\n        $('body').on('click', root + ' ' + SELECTORS.COURSE_NAME, function() {\n            var courseid = $(this).data('courseid');\n            // TeacherViewTable.destroy();\n            getCourseProgressData(courseid);\n        })\n\n        // Restore the previous table\n        .on('click', root + ' ' + SELECTORS.REVERT, function() {\n            courseProgressTable.destroy();\n            $(root).find(SELECTORS.STUDENT_PROGRESS_ELEMENT).empty();\n            $(root).find(SELECTORS.DATA_TABLE).show();\n            $(root).removeClass(SELECTORS.STUDENT_PROOGRESS_VISIBLE);\n            $('html, body').animate({\n                scrollTop: $(SELECTORS.ROOT).offset().top - 120\n            }, 300);\n        })\n\n        // This block opens modal and sends message to user\n        .on('click', root + ' ' + SELECTORS.CUSTOM_MESSAGE, function() {\n            var studentid = $(this).data('studentid');\n            $(SELECTORS.MESSAGE_HIDDEN).val(studentid);\n        })\n\n        // Send message\n        .on('click', root + ' ' + SELECTORS.MESSAGE_SEND, function() {\n            var studentid = $(root).find(SELECTORS.MESSAGE_HIDDEN).val();\n            var message = $(root).find(SELECTORS.MESSAGE_AREA).val();\n            if (message != '') {\n                sendMessageToUser(studentid, message);\n            } else {\n                $(SELECTORS.MESSAGE_AREA).focus();\n            }\n        })\n\n        // Toggle description of student progress\n        .on('click', SELECTORS.STUDENT_PROGRESS_ELEMENT + ' ' + SELECTORS.TOGGLE_DESCRIPTION, function() {\n            $(this).toggleClass('fa-plus');\n            $(this).toggleClass('fa-minus');\n            $(this).parents(SELECTORS.STUDENT_PROGRESS_ELEMENT).find('.panel-body').toggleClass('show');\n        })\n\n        // Enable course progress always loading\n        .on('change', root + ' ' + SELECTORS.ALWAYS_LOAD, function() {\n            var checkbox = $(this);\n            var checked = $(this).is(':checked');\n            if (!DATA.alwaysloadwarning && checked) {\n                ModalFactory.create({\n                    type: ModalFactory.types.SAVE_CANCEL,\n                    title: M.util.get_string('alwaysload', 'block_remuiblck'),\n                    body: M.util.get_string('alwaysloadwarning', 'block_remuiblck')\n                })\n                .then(function(modal) {\n                    var modalRoot = modal.getRoot();\n                    modalRoot.on(ModalEvents.save, function() {\n                        DATA.alwaysloadwarning = true;\n                        M.util.set_user_preference('always-load-warning', true);\n                        toggleAlwaysLoading(checked);\n                        modal.destroy();\n                    });\n                    modalRoot.on(ModalEvents.cancel, function() {\n                        checkbox.prop('checked', false);\n                    });\n                    modal.show();\n                });\n            } else {\n                toggleAlwaysLoading(checked);\n            }\n        })\n\n        // Load course progress on click\n        .on('click', root + ' ' + SELECTORS.LOAD_COURSE_PROGRESS, function() {\n            $(root).find(SELECTORS.COURSE_PROGRESSING).addClass('load-progress');\n            DATA.coursesTable.draw(false);\n        });\n\n        // Teacher courses listing table order pieprogress\n        $(root + ' ' + SELECTORS.TABLE).on('order.dt', function() {\n           createPieProgress('');\n        });\n\n        // Student progress listing table order pieprogress\n        $(root + ' ' + SELECTORS.STUDENT_PROGRESS_TABLE).on('order.dt', function() {\n           createPieProgress('');\n        });\n    }\n\n    /**\n     * Move settings to panel heading\n     * @param  {string} root Root container id\n     */\n    var updateContainers = function(root) {\n        // Move add button panel heading\n        let button = $(root).find(SELECTORS.COURSE_PROGRESSING).detach();\n        let panelHeading = $(root).closest(SELECTORS.PANEL).find(SELECTORS.PANEL_HEADING);\n        let panelActions = $(panelHeading).find('.' + SELECTORS.PANEL_ACTIONS);\n        if (panelActions.length == 0) {\n            panelActions = $('<div class=\"' + SELECTORS.PANEL_ACTIONS + '\"></div>');\n            panelHeading.prepend(panelActions);\n        }\n        panelActions.prepend(button);\n        button.removeClass('d-none');\n\n        let taskProcessing = $(root).find(SELECTORS.BLOCK_PROCESSING).detach();\n        let panel = $(panelHeading).parent(SELECTORS.PANEL);\n        panel.prepend(taskProcessing);\n    };\n\n    /**\n     * Load task on initialisation\n     * @param {DOM}     root          block DOM object\n     * @param {Boolean} alwaysloadwarning If false then always load progress warning will be shown on enabling\n     */\n    var init = function(root, alwaysloadwarning = false) {\n        SELECTORS.ROOT = root;\n        DATA.alwaysloadwarning = alwaysloadwarning;\n        $(document).ready(function() {\n            updateContainers(root);\n            createPieProgress('');\n            createDatatable(root);\n            initializeEvents(root);\n        });\n    };\n    return {\n        init: init\n    };\n});\n"],"file":"course_progress.min.js"}