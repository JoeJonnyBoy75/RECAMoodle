"use strict";(function(a,b){if("function"==typeof define&&define.amd){define ("block_remuiblck/jquery-asPieProgress",["jquery"],b)}else if("undefined"!=typeof exports){b(require("jquery"))}else{b(a.jQuery);a.jqueryAsPieProgressEs={exports:{}}.exports}})(this,function(a){var b=function(a){return a&&a.__esModule?a:{default:a}}(a);function c(a,b){if(!(a instanceof b)){throw new TypeError("Cannot call a class as a function")}}var d=function(){function a(a,b){for(var c=0,d;c<b.length;c++){d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;if("value"in d){d.writable=!0}Object.defineProperty(a,d.key,d)}}return function(b,c,d){if(c){a(b.prototype,c)}if(d){a(b,d)}return b}}(),e=function(a,b){"use strict";var c=document.createElementNS("http://www.w3.org/2000/svg",a);if(!b){return c}for(var d in b){if(!Object.hasOwnProperty.call(b,d)){continue}c.setAttribute(d,b[d])}return c};if(!Date.now){Date.now=function(){"use strict";return new Date().getTime()}}for(var f=["webkit","moz"],g=0,h;g<f.length&&!window.requestAnimationFrame;++g){h=f[g];window.requestAnimationFrame=window[h+"RequestAnimationFrame"];window.cancelAnimationFrame=window[h+"CancelAnimationFrame"]||window[h+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS (6|7|8)/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var j=0;window.requestAnimationFrame=function(a){"use strict";var b=k(),c=Math.max(j+16,b);return setTimeout(function(){a(j=c)},c-b)};window.cancelAnimationFrame=clearTimeout}var k=function(){if("undefined"!=typeof window.performance&&window.performance.now){return window.performance.now()}return Date.now()},l=function(a){"use strict";return"string"==typeof a&&-1!==a.indexOf("%")},m="createElementNS"in document&&new e("svg",{}).createSVGRect,n=function(d,e,f,g){"use strict";var h=function(a,b){return 1-3*b+3*a},a=function(a,b){return 3*b-6*a},b=function(a){return 3*a},c=function(c,d,e){return((h(d,e)*c+a(d,e))*c+b(d))*c},i=function(c,d,e){return 3*h(d,e)*c*c+2*a(d,e)*c+b(d)},j=function(a){for(var b=a,e=0,g;4>e;++e){g=i(b,d,f);if(0===g){return b}var h=c(b,d,f)-a;b-=h/g}return b};if(d===e&&f===g){return{css:"linear",fn:function(a){return a}}}return{css:"cubic-bezier("+d+","+e+","+f+","+g+")",fn:function(a){return c(j(a),e,g)}}},o={ease:n(.25,.1,.25,1),linear:n(0,0,1,1),"ease-in":n(.42,0,1,1),"ease-out":n(0,0,.58,1),"ease-in-out":n(.42,0,.58,1)},p={namespace:"asPieProgress",classes:{svg:"pie_progress__svg",element:"pie_progress",number:"pie_progress__number",content:"pie_progress__content"},min:0,max:100,goal:100,size:160,speed:15,barcolor:"#ef1e25",barsize:"4",trackcolor:"#f2f2f2",fillcolor:"none",easing:"ease",numberCallback:function(a){"use strict";var b=Math.round(this.getPercentage(a));return b+"%"},contentCallback:null},q="asPieProgress",r=function(){function a(d,e){c(this,a);this.element=d;this.$element=(0,b.default)(d);this.options=b.default.extend(!0,{},p,e,this.$element.data());this.namespace=this.options.namespace;this.classes=this.options.classes;this.easing=o[this.options.easing]||o.ease;this.$element.addClass(this.classes.element);this.min=this.$element.attr("aria-valuemin");this.max=this.$element.attr("aria-valuemax");this.min=this.min?parseInt(this.min,10):this.options.min;this.max=this.max?parseInt(this.max,10):this.options.max;this.first=this.$element.attr("aria-valuenow");this.first=this.first?parseInt(this.first,10):this.options.first?this.options.first:this.min;this.now=this.first;this.goal=this.options.goal;this._frameId=null;this.initialized=!1;this._trigger("init");this.init()}d(a,[{key:"init",value:function(){this.$number=this.$element.find("."+this.classes.number);this.$content=this.$element.find("."+this.classes.content);this.size=this.options.size;this.width=this.size;this.height=this.size;this.prepare();this.initialized=!0;this._trigger("ready")}},{key:"prepare",value:function(){if(!m){return}this.svg=new e("svg",{version:"1.1",preserveAspectRatio:"xMinYMin meet",viewBox:"0 0 "+this.width+" "+this.height});this.buildTrack();this.buildBar();(0,b.default)("<div class=\""+this.classes.svg+"\"></div>").append(this.svg).appendTo(this.$element)}},{key:"buildTrack",value:function(){var a=this.size,b=this.size,c=b/2,d=a/2,f=this.options.barsize,g=new e("ellipse",{rx:c-f/2,ry:d-f/2,cx:c,cy:d,stroke:this.options.trackcolor,fill:this.options.fillcolor,"stroke-width":f});this.svg.appendChild(g)}},{key:"buildBar",value:function(){if(!m){return}var a=new e("path",{fill:"none","stroke-width":this.options.barsize,stroke:this.options.barcolor});this.bar=a;this.svg.appendChild(a);this._drawBar(this.first);this._updateBar()}},{key:"_drawBar",value:function(a){if(!m){return}this.barGoal=a;var b=this.size,c=this.size,e=c/2,f=b/2,g=0,h=this.options.barsize,i=Math.min(e,f)-h/2;this.r=i;var j=this.getPercentage(a);if(100===j){j-=1e-4}var k=g+2*(j*Math.PI)/100,l=e+i*Math.sin(g),n=e+i*Math.sin(k),o=f-i*Math.cos(g),p=f-i*Math.cos(k),q=0;if(k-g>Math.PI){q=1}var r="M"+l+","+o+" A"+i+","+i+" 0 "+q+" 1 "+n+","+p;this.bar.setAttribute("d",r)}},{key:"_updateBar",value:function(){if(!m){return}var a=this.getPercentage(this.now),b=this.bar.getTotalLength(),c=b*(1-a/this.getPercentage(this.barGoal));this.bar.style.strokeDasharray=b+" "+b;this.bar.style.strokeDashoffset=c}},{key:"_trigger",value:function(a){for(var b=arguments.length,c=Array(1<b?b-1:0),d=1;d<b;d++){c[d-1]=arguments[d]}var e=[this].concat(c);this.$element.trigger(q+"::"+a,e);a=a.replace(/\b\w+\b/g,function(a){return a.substring(0,1).toUpperCase()+a.substring(1)});var f="on"+a;if("function"==typeof this.options[f]){this.options[f].apply(this,c)}}},{key:"getPercentage",value:function(a){return 100*(a-this.min)/(this.max-this.min)}},{key:"go",value:function(a){var b=this;this._clear();if(l(a)){a=parseInt(a.replace("%",""),10);a=Math.round(this.min+a/100*(this.max-this.min))}if("undefined"==typeof a){a=this.goal}if(a>this.max){a=this.max}else if(a<this.min){a=this.min}if(this.barGoal<a){this._drawBar(a)}var c=b.now,d=k(),e=d+100*Math.abs(c-a)*b.options.speed/(b.max-b.min),f=function g(f){var h;if(f>e){h=a}else{var i=(f-d)/b.options.speed;h=Math.round(b.easing.fn(i/100)*(b.max-b.min));if(a>c){h=c+h;if(h>a){h=a}}else{h=c-h;if(h<a){h=a}}}b._update(h);if(h===a){window.cancelAnimationFrame(b._frameId);b._frameId=null;if(b.now===b.goal){b._trigger("finish")}}else{b._frameId=window.requestAnimationFrame(g)}};b._frameId=window.requestAnimationFrame(f)}},{key:"_update",value:function(a){this.now=a;this._updateBar();this.$element.attr("aria-valuenow",this.now);if(0<this.$number.length&&"function"==typeof this.options.numberCallback){this.$number.html(this.options.numberCallback.call(this,[this.now]))}if(0<this.$content.length&&"function"==typeof this.options.contentCallback){this.$content.html(this.options.contentCallback.call(this,[this.now]))}this._trigger("update",a)}},{key:"_clear",value:function(){if(this._frameId){window.cancelAnimationFrame(this._frameId);this._frameId=null}}},{key:"get",value:function(){return this.now}},{key:"start",value:function(){this._clear();this._trigger("start");this.go(this.goal)}},{key:"reset",value:function(){this._clear();this._drawBar(this.first);this._update(this.first);this._trigger("reset")}},{key:"stop",value:function(){this._clear();this._trigger("stop")}},{key:"finish",value:function(){this._clear();this._update(this.goal);this._trigger("finish")}},{key:"destroy",value:function(){this.$element.data(q,null);this._trigger("destroy")}}],[{key:"registerEasing",value:function(a){for(var b=arguments.length,c=Array(1<b?b-1:0),d=1;d<b;d++){c[d-1]=arguments[d]}o[a]=n.apply(void 0,c)}},{key:"getEasing",value:function(a){return o[a]}},{key:"setDefaults",value:function(a){b.default.extend(!0,p,b.default.isPlainObject(a)&&a)}}]);return a}(),s="asPieProgress",t=b.default.fn.asPieProgress,u=function(a){for(var c=arguments.length,d=Array(1<c?c-1:0),e=1;e<c;e++){d[e-1]=arguments[e]}if("string"==typeof a){var f=a;if(/^_/.test(f)){return!1}else if(/^(get)/.test(f)){var g=this.first().data(s);if(g&&"function"==typeof g[f]){return g[f].apply(g,d)}}else{return this.each(function(){var a=b.default.data(this,s);if(a&&"function"==typeof a[f]){a[f].apply(a,d)}})}}return this.each(function(){if(!(0,b.default)(this).data(s)){(0,b.default)(this).data(s,new r(this,a))}})};b.default.fn.asPieProgress=u;b.default.asPieProgress=b.default.extend({setDefaults:r.setDefaults,registerEasing:r.registerEasing,getEasing:r.getEasing,noConflict:function(){b.default.fn.asPieProgress=t;return u}},{version:"0.4.7"})});
//# sourceMappingURL=jquery-asPieProgress.min.js.map
