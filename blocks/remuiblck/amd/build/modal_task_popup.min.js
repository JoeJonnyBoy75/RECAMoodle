define ("block_remuiblck/modal_task_popup",["jquery","core/notification","core/custom_interaction_events","core/modal","core/modal_registry","block_remuiblck/events"],function(a,b,c,d,e,f){var g=!1,h={SAVE_BUTTON:"[data-action=\"save\"]",DELETE_BUTTON:"[data-action=\"delete\"]",CANCEL_BUTTON:"[data-action=\"cancel\"]",SUBJECT:"[name=\"subject\"]",SUMMARY:"[name=\"summary\"]",DAY:"[name=\"timedue[day]\"]",MONTH:"[name=\"timedue[month]\"]",YEAR:"[name=\"timedue[year]\"]",VISIBLE:"[name=\"visible\"]",NOTIFY:"[name=\"notify\"]",USERS:"[name=\"userlist[]\"]",ELEMENT_ROW:".fitem",ERROR_FEEDBACK:".form-control-feedback"},i=function(a){d.call(this,a);if(!this.getFooter().find(h.SAVE_BUTTON).length){b.exception({message:M.util.get_string("nosavebutton","block_remuiblck")})}};i.TYPE="block_remuiblck-task";i.prototype=Object.create(d.prototype);i.prototype.constructor=i;i.prototype.registerEventListeners=function(){d.prototype.registerEventListeners.call(this);var a=this;this.getModal().on(c.events.activate,h.SAVE_BUTTON,function(){a.getModal().trigger(f.TASK_SAVE)});this.getModal().on(c.events.activate,h.DELETE_BUTTON,function(){a.getModal().trigger(f.TASK_DELETE)});this.getModal().on(c.events.activate,h.CANCEL_BUTTON,function(){a.getModal().trigger(f.TASK_CANCEL)})};i.prototype.valid_settings=function(){var a=!0,b=this.getModal().find(h.SUBJECT).val();a=""!=b;this.getModal().find(h.SUBJECT)[0].dispatchEvent(new CustomEvent("blur"));return a};i.prototype.get_task_settings=function(){var a={subject:this.getModal().find(h.SUBJECT).val(),summary:this.getModal().find(h.SUMMARY).val(),timedue:function get_date(a){var b=a.find(h.YEAR).val(),c=a.find(h.MONTH).val(),d=a.find(h.DAY).val();b+="-"+(10>c?"0"+c:c);b+="-"+(10>d?"0"+d:d);b+=-1!=navigator.vendor.indexOf("Apple")?"T23:59:59":" 23:59:59";return(-1!=navigator.vendor.indexOf("Apple")?Date.parse(b):new Date(b).getTime())/1e3}(this.getModal()),visible:this.getModal().find(h.VISIBLE).is(":checked"),notify:this.getModal().find(h.NOTIFY).is(":checked"),users:this.getModal().find(h.USERS).val()};return a};i.prototype.saving=function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:!0,b=this.getModal().find(h.SAVE_BUTTON);if(!0==a){b.text(M.util.get_string("saving","core_repository")).attr("disabled","disabled");b.attr("disabled",!0);return}b.attr("disabled",!1);b.text(M.util.get_string("save","core_repository")).removeAttr("disabled")};if(!g){e.register(i.TYPE,i,"block_remuiblck/modal_task_popup");g=!0}return i});
//# sourceMappingURL=modal_task_popup.min.js.map
