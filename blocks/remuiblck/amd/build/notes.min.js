define ("block_remuiblck/notes",["jquery","core/ajax"],function(a,b){var c={ADD_NOTE_BUTTON:".add-notes-button",ADD_NOTE_SELECT:".add-notes-select",SITE_NOTE:".site-note",COURSE_NOTE:".course-note",PERSONAL_NOTE:".personal-note",STUDENT_LIST:".select2-studentlist"};if(a(c.ADD_NOTE_SELECT).length){a(c.ADD_NOTE_BUTTON).hide();a(c.STUDENT_LIST).hide();var d,e,f,g;a(c.ADD_NOTE_SELECT+" select").on("change",function(){a(c.ADD_NOTE_BUTTON).hide();d=a(this).children(":selected").attr("id");g=a(this).children(":selected").text();if(d===void 0){a(c.STUDENT_LIST).empty();a(c.STUDENT_LIST).hide();return}b.call([{methodname:"block_remuiblck_get_enrolled_users_by_course",args:{courseid:d}}])[0].done(function(b){e=Object.keys(b).length;a(c.STUDENT_LIST).show();a(c.STUDENT_LIST).empty();if(e){a(c.STUDENT_LIST).append("<option>"+M.util.get_string("selectastudent","block_remuiblck")+" ("+M.util.get_string("total","moodle")+": "+e+")</option>");a.each(b,function(b,d){a(c.STUDENT_LIST).append("<option value=\""+d.id+"\">"+d.fullname+"</option>")})}else{a(c.STUDENT_LIST).append("<option>"+M.util.get_string("nousersenrolledincourse","block_remuiblck",g)+"</option>")}}).fail(function(b){a(c.STUDENT_LIST).html("<option>"+b.message+"</option>")})});a(c.STUDENT_LIST).on("change",function(){a(c.ADD_NOTE_BUTTON).show();f=a(this).find("option:selected").val();var b=M.cfg.wwwroot+"/notes/edit.php?courseid="+d+"&userid="+f+"&publishstate=site";a(c.ADD_NOTE_BUTTON+" "+c.SITE_NOTE).attr("href",b);b=M.cfg.wwwroot+"/notes/edit.php?courseid="+d+"&userid="+f+"&publishstate=public";a(c.ADD_NOTE_BUTTON+" "+c.COURSE_NOTE).attr("href",b);b=M.cfg.wwwroot+"/notes/edit.php?courseid="+d+"&userid="+f+"&publishstate=draft";a(c.ADD_NOTE_BUTTON+" "+c.PERSONAL_NOTE).attr("href",b)})}});
//# sourceMappingURL=notes.min.js.map
