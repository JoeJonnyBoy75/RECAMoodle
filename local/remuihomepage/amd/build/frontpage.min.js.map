{"version":3,"file":"frontpage.min.js","sources":["../src/frontpage.js"],"sourcesContent":["/* eslint-disable require-jsdoc */\n/* eslint-disable jsdoc/require-jsdoc */\n/* eslint-disable no-unused-vars */\n/* eslint-disable no-undef */\n/* eslint-disable max-len */\n/* eslint-disable no-console */\n// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n// Section manager class\n//\n// @module     local_remuihomepage/frontpage\n// @copyright  (c) 2018 WisdmLabs (https://wisdmlabs.com/)\n// @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later.\n\ndefine([\n    'jquery',\n    'core/modal_factory',\n    'core/templates',\n    'core/str','core/modal_events',\n    'local_remuihomepage/sectionmanager',\n    'core/fragment',\n    'core/ajax',\n    'core/notification',\n    'local_remuihomepage/slick'\n], function(\n    $,\n    ModalFactory,\n    Templates,\n    Str,\n    ModalEvents,\n    SECTIONMANAGER,\n    Fragment,\n    Ajax,\n    Notification\n){\n    var CONTEXTID = -1;\n    var MAINMODAL = null;\n    var CONFIGMODAL = null;\n    var SECTIONSELECT = \".sections-container div[class*='section-']\";\n    var ADDSECTIONTRIGGER = \".add-section\";\n    var EDITSECTIONTRIGGER = \".home-sections button.edit-section\";\n    var DELETESECTIONTRIGGER = \".home-sections button.delete-section\";\n    var DELETESECTIONCANCEL = \".home-sections button.cancel-delete-section\";\n    var DELETESECTIONCONFIRM = \".home-sections button.confirm-delete-section\";\n    var MOVESECTIONUP = \".moveup-section\";\n    var MOVESECTIONDOWN = \".movedown-section\";\n    var EDITINGACTION = \".editing-action\";\n    var SLIDERSECTIONS = \".home-sections section .carousel\";\n    var PUBLISH = \".publish\";\n    var PREVIEW = \".preview-section\";\n    var SETTINGS = \".settings\";\n    var VISIBILITY = \".home-sections button.section-visibility\";\n    var EDITINGALERT = \".editing-alert\";\n    var COURSESECTIONCATEGORY = \".home-sections .section-courses .category-list .category-item\";\n    var COURSESECTIONASIDE = \".home-sections .section-courses .category-list .site-skintools-toggle\";\n    var COURSEPERPAGE = 25;\n    var options = {\n        'logging': false,\n        'useCORS': true\n    };\n    var imageserverurl = 'https://share.edwiser.org/api/base64.php';\n\n    const RemUIEvents = {\n        SECTION_ADDED: 'theme_remui-frontpage-section-added',\n        SECTION_UPDATED: 'theme_remui-frontpage-section-updated',\n    };\n    /**\n     * Polyfill method for Object.assign\n     * @param  {Object}    target    Target Object\n     * @return {Object}              Merged object\n     */\n    var assign = Object.assign || function (target) {\n        for (var i = 1; i < arguments.length; i++) {\n            var source = arguments[i];\n            for (var key in source) {\n                if (Object.prototype.hasOwnProperty.call(source, key)) {\n                    target[key] = source[key];\n                }\n            }\n        }\n        return target;\n    };\n\n    /**\n     * Fetch categories using ajax service\n     * @param  {Number}   instanceid Instance id of section\n     * @param  {Number}   offset     Starting offset of category\n     * @param  {Number}   limit      Number categories to be fetched\n     * @param  {Function} callback   Callback function for successful ajax\n     * @param  {Function} fail       Callbakc function for failed ajax\n     */\n    function fetchCategories(instanceid, offset, limit, callback, fail) {\n        Ajax.call([{\n            methodname: 'local_remuihomepage_get_frontpage_categories',\n            args: {\n                instanceid,\n                offset,\n                limit\n            }\n        }])[0].done(callback).fail(fail);\n    }\n\n    /**\n     * Apply slick to courses list\n     * @param  {Number} instanceid Section instance id\n     * @param  {Object} options    Options of slick slider\n     */\n    function applySlickToCourses(instanceid, options) {\n        var defaults = {\n            dots: false,\n            arrows: true,\n            infinite: false,\n            speed: 500,\n            prevArrow: $(\"section[data-instance='\" + instanceid + \"'] .button-container .btn-prev\"),\n            nextArrow: $(\"section[data-instance='\" + instanceid + \"'] .button-container .btn-next\"),\n            rtl: ($(\"html\").attr(\"dir\") == \"rtl\") ? true : false,\n            slidesToShow: 4,\n            slidesToScroll: 4,\n            responsive: [{\n                breakpoint: 1024,\n                settings: {\n                    slidesToShow: 3,\n                    slidesToScroll: 3\n                }\n            }, {\n                breakpoint: 800,\n                settings: {\n                    slidesToShow: 2,\n                    slidesToScroll: 2\n                }\n            }, {\n                breakpoint: 480,\n                settings: {\n                    slidesToShow: 1,\n                    slidesToScroll: 1\n                }\n            }]\n        };\n        if (options !== null && typeof options == 'object') {\n            assign(defaults, options);\n        }\n        var section = SECTIONMANAGER.getSectionElement(instanceid);\n        section.find('.available-courses').addClass('d-none');\n        if (section.find('.courses-slider .empty-courses-container').length != 0) {\n            return;\n        }\n        section.find('.courses-slider').slick(defaults)\n        .on('setPosition', function (event, slick) {\n            $(section).find('.slick-slide > div').css('height', '100%');\n            slick.$slides.css('height', slick.$slideTrack.height() + 'px');\n        });\n        section.find('.available-courses').removeClass('d-none');\n    }\n\n    /**\n     * Generate courses slick slider\n     * @param  {Number}   instanceid Instance id of section\n     * @param  {Number}   categoryid Category id\n     * @param  {Function} callback   Callback function\n     */\n    function generateCourses(instanceid, categoryid, callback) {\n        SECTIONMANAGER.showSectionLoader(instanceid, true);\n        var section = SECTIONMANAGER.getSectionElement(instanceid);\n        section.find('.courses-slider').removeClass('show');\n        Ajax.call([{\n            methodname: 'local_remuihomepage_get_frontpage_section_courses_in_category',\n            args: {\n                instanceid: instanceid,\n                categoryid: categoryid\n            },\n            done: function(response) {\n                response = JSON.parse(response);\n                response.shadowless = response.sectionproperties.shadowless;\n                response.shadowcolor = response.sectionproperties.shadowcolor;\n                section.find('.courses-slider.slick-initialized.slick-slider').slick('unslick');\n                section.find('.courses-slider').empty();\n                section.data('totalcourses', response.totalcourse);\n                section.data('current', 0);\n                Templates.render('local_remuihomepage/courses_cards', response)\n                .done(function(html, js) {\n                    Templates.appendNodeContents(section.find('.courses-slider'), html, js);\n                    applySlickToCourses(instanceid, {\n                        slidesToShow: 3,\n                        slidesToScroll: 3\n                    });\n                    if (typeof callback == 'function') {\n                        callback();\n                    }\n                })\n                .fail(Notification.exception);\n\n                SECTIONMANAGER.showSectionLoader(instanceid, false);\n            },\n            fail: function(ex) {\n                SECTIONMANAGER.showSectionLoader(instanceid, false);\n                Notification.exception(ex);\n            }\n        }]);\n    }\n\n    /**\n     * Apply style to editor from style element\n     * @param  {Object} element Jquery element object\n     */\n    var applyStyleToEditor = function(element) {\n        var number = $(element).attr('id').replace('id_block_', '').replace('_style', '');\n        var prefix = '#id_block_' + number + '_htmleditable ';\n        var style = $(element).val().replace(/(([\\.\\#]?[\\w\\d\\_\\-]+\\s*)+\\{)/, function(match) {\n            return prefix + match;\n        });\n        if (!$(element).next().is('#block-' + number + '-style')) {\n            $(element).after('<style id=\"block-' + number + '-style\" type=\"text/css\"></style>');\n        }\n        $(element).next().html(style);\n    };\n\n    /**\n     * Apply style to separator\n     * @param  {Object} form Form element\n     */\n    var applyStyleToSeparator = function(form) {\n        var style = $(form).find('#id_style').val();\n        var color = $(form).find('[name=\"color\"]').val();\n        var color2 = $(form).find('[name=\"color2\"]').val();\n        var height = $(form).find('#id_height').val();\n        var width = $(form).find('#id_width').val();\n        var css = {\n            margin: '0px auto',\n            width: width + '%'\n        };\n        $(form).find('[name=\"color2\"]').parents('.separator-style').toggleClass('d-none', style != 'gradient');\n        switch (style) {\n            case 'blur':\n                // Reset.\n                css.height = '0px';\n                css['background-image'] = 'none';\n                // Set.\n                css.border = '1px solid ' + color;\n                css['box-shadow'] = '0 0 ' + height + 'px ' + (height / 2) + 'px ' + color;\n                break;\n            case 'blurend':\n                // Reset.\n                css.background = 'none';\n                css['box-shadow'] = 'none';\n                css.border = 'none';\n                // Set.\n                css.height = height + 'px';\n                css['background-image'] = 'linear-gradient(to right, #ffffff, ' + color + ', #ffffff)';\n                break;\n            case 'gradient':\n                // Reset.\n                css['box-shadow'] = 'none';\n                css['background-image'] = 'none';\n                css.border = 'none';\n                // Set.\n                css.height = height + 'px';\n                css.background = 'linear-gradient(to right, ' + color + ' 0%, ' + color2 + ' 50%, ' + color + ' 100%)';\n                break;\n            default:\n                // Reset.\n                css['box-shadow'] = 'none';\n                css['background-image'] = 'none';\n                css.height = '0px';\n                // Set.\n                css['border-top'] = height + 'px ' + style + ' ' + color;\n                break;\n        }\n        $(form).find('#remui_separator_output').css(css);\n    };\n\n    /**\n     * Return Instance of Selected element, i.e. data-instance attribute.\n     * @param  {String} element Element id/class\n     * @return {DOM} DOM Element\n     */\n    function getInstanceId(element) {\n        return $(element).attr(\"data-instance\");\n    }\n    /**\n     * Return Instance of Selected element, i.e. data-instance attribute.\n     * @param  {String} element Element id/class\n     * @return {DOM}            DOM Element\n     */\n    function getSectionName(element) {\n        return $(element).attr(\"data-sectionname\");\n    }\n\n    /**\n     * Apply some events when form is loaded in modal\n     */\n    function editFormIsLoaded() {\n        setTimeout(function() {\n            var styles = $('body').find('form .block-style textarea');\n            if (styles.length != 0) {\n                    styles.each(function(index, element) {\n                        applyStyleToEditor($(element));\n                    });\n            }\n        }, 2000);\n    }\n\n    /**\n     * Get body content for modal\n     * @param  {String} id   Section id\n     * @param  {Object} args Ajax argument\n     * @return {String}      HTML\n     */\n    var getBody = function(id, args) {\n        var params = {instanceid: id};\n        if (args !== null) {\n            params.formdata = args;\n        }\n        var body = Fragment.loadFragment('local_remuihomepage', 'frontpage_section_form', CONTEXTID, params);\n        body.done(function() {\n            editFormIsLoaded();\n        });\n        return body;\n    };\n\n    /**\n     * Add Sections Modal Creation Function. Context is the list of sections to be added.\n     * @param {String} context Context id\n     */\n    var initModal = function(context) {\n        var triggerButtons = $(ADDSECTIONTRIGGER);\n\n        ModalFactory.create({\n            large: true,\n            body: Templates.render('local_remuihomepage/sections_list', context)\n        }, triggerButtons)\n        .then(function(modal) {\n            MAINMODAL = modal;\n            modal.setTitle(M.util.get_string('addsection', 'local_remuihomepage'));\n            modal.modal.addClass(\"modal-sidebar d-inline-flex\");\n            if (modal.modal.hasClass(\"modal-dialog-scrollable\")) {\n                modal.modal.removeClass(\"modal-dialog-scrollable\");\n            }\n            modal.modal.width('500px');\n            return;\n        }.bind(this))\n        .fail(Notification.exception);\n    };\n\n    /**\n     * Initialize section loader\n     */\n    var initSectionsLoader = function () {\n        SECTIONMANAGER.LoadAllSections();\n    };\n\n    /**\n     * Initialize the Modal.\n     */\n    var initializeModal = function() {\n        initModal({\n            sections: [\n            {\n                section: \"slider\",\n                title: M.util.get_string('slidersection', 'local_remuihomepage'),\n                imageurl: M.util.image_url('screenshots/slider', 'local_remuihomepage')\n            },\n            {\n                section: \"aboutus\",\n                title: M.util.get_string('aboutussection', 'local_remuihomepage'),\n                imageurl: M.util.image_url('screenshots/aboutus', 'local_remuihomepage')\n            },\n            {\n                section: \"contact\",\n                title: M.util.get_string('contactsection', 'local_remuihomepage'),\n                imageurl: M.util.image_url('screenshots/contact', 'local_remuihomepage')\n            },\n            {\n                section: \"feature\",\n                title: M.util.get_string('featuresection', 'local_remuihomepage'),\n                imageurl: M.util.image_url('screenshots/feature', 'local_remuihomepage')\n            },\n            {\n                section: \"courses\",\n                title: M.util.get_string('coursessection', 'local_remuihomepage'),\n                imageurl: M.util.image_url('screenshots/courses', 'local_remuihomepage')\n            },\n            {\n                section: \"team\",\n                title: M.util.get_string('teamsection', 'local_remuihomepage'),\n                imageurl: M.util.image_url('screenshots/team', 'local_remuihomepage')\n            },\n            {\n                section: \"testimonial\",\n                title: M.util.get_string('testimonialsection', 'local_remuihomepage'),\n                imageurl: M.util.image_url('screenshots/testimonial', 'local_remuihomepage')\n            },\n            {\n                section: \"html\",\n                title: M.util.get_string('htmlsection', 'local_remuihomepage'),\n                imageurl: M.util.image_url('screenshots/html', 'local_remuihomepage')\n            },\n            {\n                section: \"separator\",\n                title: M.util.get_string('separatorsection', 'local_remuihomepage'),\n                imageurl: M.util.image_url('screenshots/separator', 'local_remuihomepage')\n            }\n            ]\n        });\n    };\n\n\n    /**\n     * Initialize js events\n     * @return {void} [description]\n     */\n    var initializeEvents = function() {\n\n        // Every time the window is scrolled.\n        $(window).scroll( function() {\n            // Check the location of each lazy section.\n            $('.pagelayout-frontpage section.lazy-section').each(function() {\n                var sectiontop = $(this).position().top;\n                var bottomOfWindow = $(window).scrollTop() + $(window).height();\n                // Load upto three sections.\n                var thricewindow = bottomOfWindow + $(window).height() * 2;\n                if (thricewindow > sectiontop) {\n                    if ($(this).is('.lazy-section')) {\n                        $(this).removeClass(\"lazy-section\");\n                        var instanceid = $(this).data('instance');\n                        var section = SECTIONMANAGER.getLoadedSection(instanceid);\n                        SECTIONMANAGER.reloadSection({\n                            success: true,\n                            context: section\n                        }, function() {\n                            var section  = $('.home-sections section[data-instance=\"' + instanceid + '\"]');\n                        });\n                        return;\n                    }\n                }\n            });\n\n            // Check the location of each invisible section.\n            $('.pagelayout-frontpage section.invisible').each(function() {\n                var sectiontop = $(this).position().top + 100;\n                var bottomOfWindow = $(window).scrollTop() + $(window).height();\n                if( bottomOfWindow > sectiontop ) {\n                    setTimeout((function() {\n                        $(this).removeClass('invisible');\n                        // Show animation if appear animation is enabled.\n                        if (appearanimation == true) {\n                            if (appearanimationstyle == 'animation-slide-left-right') {\n                                if ($(this).prev().is('.animation-slide-left')) {\n                                    $(this).addClass('animation-slide-right');\n                                } else {\n                                    $(this).addClass('animation-slide-left');\n                                }\n                            } else {\n                                $(this).addClass(appearanimationstyle);\n                            }\n                        }\n                    }).bind(this), 100);\n                }\n            });\n            if (transparentheader) {\n                if ($('section[data-instance]:first-child').is('.section-slider')) {\n                    var windowtop = $(window).scrollTop();\n                    if(windowtop < 45) {\n                        $(\"body.has-slider\").addClass(\"animate-header\");\n                        return;\n                    }\n                }\n                $(\"body.has-slider\").removeClass(\"animate-header\");\n            }\n        });\n\n        // Apply style to separator on change.\n        $('body').on('input', '.separator-style select, .separator-style input', function() {\n            applyStyleToSeparator($(this).closest('form'));\n        });\n\n        $('body').on('change', '.updateform select', function() {\n            var instanceid = $(this).parents('form').find('[name=\"instanceid\"]').val();\n            var formdata = JSON.stringify(CONFIGMODAL.getRoot().find('form').serialize());\n            var frag = getBody(instanceid, formdata);\n            CONFIGMODAL.setBody(frag);\n        });\n\n        // Section Edit Event Trigger.\n        $(document).on(\"click\", EDITSECTIONTRIGGER, function() {\n            var id = getInstanceId(this);\n            var sectionname = getSectionName(this);\n            ModalFactory.create({\n                type: ModalFactory.types.SAVE_CANCEL,\n                title: 'Edit ' + M.util.get_string(sectionname + 'section', 'local_remuihomepage'),\n                body: getBody(id, null),\n            })\n            .then(function(modal) {\n                CONFIGMODAL = modal;\n                modal.modal.addClass(\"modal-sidebar d-inline-flex editmodal remuihomepage\");\n                if (modal.modal.hasClass(\"modal-dialog-scrollable\")) {\n                    modal.modal.removeClass(\"modal-dialog-scrollable\");\n                }\n                var root = modal.getRoot();\n\n                // Save the details to the database when save button is clicked.\n                root.on(ModalEvents.save, function(e) {\n                    e.preventDefault();\n\n                    var form = root.find('form');\n\n                    function updateSectionData() {\n                        // Convert all the form elements values to a serialised string.\n                        var formdata = JSON.stringify(form.serialize());\n                        SECTIONMANAGER.updateSection(id, formdata);\n                        CONFIGMODAL.hide();\n                    }\n\n                    if (typeof remui_section_form_validate != 'undefined') {\n                        response = remui_section_form_validate(form);\n                        if (typeof response === 'object') {\n                            response.then(function(response) {\n                                if (!response) {\n                                    return;\n                                }\n                                updateSectionData();\n                            });\n                            return;\n                        }\n                        if(!response) {\n                            return;\n                        }\n                    }\n                    updateSectionData();\n                });\n\n                // Destroy the modal when the modal is closed.\n                root.on(ModalEvents.hidden, function() {\n                    CONFIGMODAL.destroy();\n                    $(document).find('.mform.atto_form.atto_media').parents('.moodle-dialogue-base').remove();\n                });\n                modal.show();\n            });\n        });\n\n        // Section Delete Event Trigger.\n        $( document ).on( \"click\", DELETESECTIONTRIGGER, function(){\n\n            var id = getInstanceId(this);\n\n            ModalFactory.create({\n                type: ModalFactory.types.SAVE_CANCEL,\n                title: 'Delete item',\n                body: 'Do you really want to delete?',\n            })\n            .then(function(modal) {\n                modal.setSaveButtonText('Delete');\n                var root = modal.getRoot();\n                root.on(ModalEvents.save, function() {\n                    SECTIONMANAGER.deleteInstance(id, true);\n                });\n\n                root.on(ModalEvents.hidden, function() {\n                    modal.destroy();\n                });\n                modal.show();\n            });\n        });\n\n        // Cancel section deletion.\n        $(document).on(\"click\", DELETESECTIONCANCEL, function() {\n            var id = getInstanceId(this);\n            SECTIONMANAGER.deleteInstance(id, false);\n        });\n\n        // Skip timer and confirm section deletion.\n        $(document).on(\"click\", DELETESECTIONCONFIRM, function() {\n            var id = getInstanceId(this);\n            SECTIONMANAGER.deleteInstance(id, 2);\n        });\n\n        // Apply style to editor on change.\n        $('body').on('input', '.block-style textarea', function() {\n            applyStyleToEditor($(this));\n        });\n\n        // Open modal to show frontpage settings.\n        $(document).on('click', SETTINGS, function() {\n            ModalFactory.create({\n                type: ModalFactory.types.SAVE_CANCEL,\n                title: M.util.get_string('homepagesettings', 'local_remuihomepage'),\n                body: Fragment.loadFragment('local_remuihomepage', 'frontpage_settings_form', CONTEXTID)\n            }, $('#create'))\n            .done(function(modal) {\n                modal.modal.addClass(\"modal-sidebar d-inline-flex editmodal\");\n                if (modal.modal.hasClass(\"modal-dialog-scrollable\")) {\n                    modal.modal.removeClass(\"modal-dialog-scrollable\");\n                }\n                modal.show();\n                modal.getRoot().on(ModalEvents.save, function(e) {\n                    e.preventDefault();\n\n                    var form = modal.getRoot().find('form');\n\n                    // Convert all the form elements values to a serialised string.\n                    var formdata = JSON.stringify(form.serialize());\n                    Ajax.call([{\n                        methodname: 'local_remuihomepage_save_frontpage_settings',\n                        args: {\n                            settings: formdata\n                        }\n                    }])[0]\n                    .done(function(response) {\n                        window.location.reload();\n                    })\n                    .fail(Notification.exception);\n                    modal.hide();\n                });\n\n                // Destroy the modal when the modal is closed.\n                modal.getRoot().on(ModalEvents.hidden, function() {\n                    modal.destroy();\n                });\n            });\n        });\n\n        $( document ).on( \"click\", SECTIONSELECT, function(){\n            // Get the data attribute.\n            var dataatr = $(this).data('section');\n\n            // Hide the existing section modal.\n            MAINMODAL.hide();\n\n            // Set Name of section.\n            SECTIONMANAGER.setSectionName(dataatr);\n\n            // Call method to add the section.\n            SECTIONMANAGER.addSection();\n        });\n\n        // Move section up and downside.\n        $('body').on('click', MOVESECTIONUP, function() {\n            SECTIONMANAGER.reorderSection($(this).data('instance'), -1, true);\n        }).on('click', MOVESECTIONDOWN, function() {\n            SECTIONMANAGER.reorderSection($(this).data('instance'), 1, true);\n        });\n\n        // Change the visibility of section.\n        $('body').on('click', VISIBILITY, function() {\n            var instanceid = $(this).data('instance');\n            var visible = $(this).data('visible');\n            SECTIONMANAGER.updateVisibility(instanceid, !visible);\n        });\n\n        // Play video from slider when slide is changed.\n        $(document).on('slid.bs.carousel', SLIDERSECTIONS, function() {\n            var instanceid = $(this).parent().data('instance');\n            SECTIONMANAGER.playSliderVideo(instanceid);\n        });\n\n        $(document).on('click', EDITINGACTION, function() {\n            var form = $('<form method=\"post\"></form>');\n            form.append(\"<input type='hidden' name='frontpageediting' value='1'/>\");\n            form.append(\"<input type='hidden' name='editpage' value='\" + $(this).data('edit') + \"'/>\");\n            $('body').append(form);\n            form.submit();\n        });\n\n        $(document).on('click', PUBLISH, function() {\n            var form = $('<form method=\"post\"></form>');\n            form.append(\"<input type='hidden' name='frontpageediting' value='1'/>\");\n            form.append(\"<input type='hidden' name='publish' value='1'/>\");\n            $('body').append(form);\n            form.submit();\n        });\n\n        // Toggle frontpage preview.\n        $(document).on('click', PREVIEW, function() {\n            SECTIONMANAGER.showAllSectionsLoader();\n            $(this).find('i').toggleClass('fa-eye fa-eye-slash');\n            var previewon = $(this).find('i').is('.fa-eye-slash');\n            $('body').toggleClass('preview', previewon);\n            $(SETTINGS + ',' + PUBLISH + ',' + ADDSECTIONTRIGGER + ',' + EDITINGACTION + ',' + EDITINGALERT).toggleClass('d-flex', !previewon).toggleClass('d-none', previewon);\n            $('html, body').animate({scrollTop:0}, $(window).scrollTop() / 6);\n            $(VISIBILITY + ' .fa-eye-slash').parents('section[data-instance]').toggleClass('section-invisible', previewon);\n            if (transparentheader) {\n                console.log(\"We should not come here\");\n                if (previewon) {\n                    var sections = $('body').find('section[data-instance]:not(.section-invisible)');\n                    var hasslider = false;\n                    if (sections) {\n                        hasslider = $(sections[0]).is('.section-slider');\n                    }\n                    $('body').toggleClass('has-slider animate-header', hasslider);\n                } else {\n                    $('body').toggleClass('has-slider animate-header', $('body').find('section[data-instance]:first-child').is('.section-slider'));\n                }\n            }\n            setTimeout(function(){ SECTIONMANAGER.hideAllSectionsLoader(); }, 2000);\n\n        });\n\n        // Trigger testimonial auto slider, coursesandcategories first category.\n        $(document).on(RemUIEvents.SECTION_ADDED + ' ' + RemUIEvents.SECTION_UPDATED, function(event) {\n            switch(event.configdata.sectionname) {\n                case 'courses':\n                    var section = SECTIONMANAGER.getSectionElement(event.configdata.id);\n                    if (section.is('.categoryandcourses-view') && event.configdata.categorylist.length != 0) {\n                        var firstcat = event.configdata.categorylist[0].categoryid;\n                        generateCourses(event.configdata.id, firstcat);\n                    } else {\n                        applySlickToCourses(section.data('instance'), {});\n                    }\n                    break;\n            }\n        });\n\n        // Load courses on course category selection.\n        $('body').on('click', COURSESECTIONCATEGORY, function() {\n            var instanceid = $(this).parents('section[data-instance]').data('instance');\n            $(this).parents('section[data-instance]').find('.courses-slider').removeClass('show');\n            var categoryid = $(this).data('id');\n            generateCourses(instanceid, categoryid, (function() {\n                $(this).siblings().removeClass('active');\n                $(this).addClass('active');\n                $(this).parents('.category-list').removeClass('show');\n            }).bind(this));\n        });\n\n        $('body').on('click', COURSESECTIONASIDE, function() {\n            $(this).parents('.category-list').toggleClass('show');\n        }).on('afterChange', '[data-sectionname=\"courses\"].section-courses:not(.categories-view) .courses-slider', function (event, slick, currentSlide) {\n            if ($(slick.$nextArrow).is('.slick-disabled')) {\n                var section = $(this).closest('section[data-sectionname=\"courses\"]');\n                var categoryid = $(section).is('.categoryandcourses-view') ? $(section).find('.category-list .category-item.active').data('id') : 0;\n                var instanceid = section.data('instance');\n                var totalcourses = section.data('totalcourses');\n                var current = section.data('current');\n                if(current + COURSEPERPAGE < totalcourses) {\n                    Ajax.call([{\n                        methodname: 'local_remuihomepage_get_frontpage_section_courses_in_category',\n                        args: {\n                            instanceid: instanceid,\n                            categoryid: categoryid,\n                            start: current + COURSEPERPAGE\n                        },\n                    }])[0]\n                    .done(function(response) {\n                        var rendered = 0;\n                        SECTIONMANAGER.showSectionLoader(instanceid, true);\n                        response = JSON.parse(response);\n                        section.data('current', current + COURSEPERPAGE);\n                        response.courses.forEach(function(course) {\n                            course.sectionproperties = response.sectionproperties;\n                            course.shadowless = response.sectionproperties.shadowless;\n                            Templates.render('local_remuihomepage/course_card_grid', course)\n                            .done(function(html, js) {\n                                html = \"<div><div>\" + html + \"</div></div>\";\n                                $(slick.$slider).slick('slickAdd', html);\n                                ++rendered;\n                                if (rendered == response.courses.length) {\n                                    SECTIONMANAGER.showSectionLoader(instanceid, false);\n                                }\n                            })\n                            .fail(Notification.exception);\n                        });\n                    })\n                    .fail(Notification.exception);\n                }\n            }\n        }).on('afterChange', '[data-sectionname=\"courses\"].section-courses.categories-view .courses-slider', function(event, slick, currentSlide) {\n            if ($(slick.$nextArrow).is('.slick-disabled')) {\n                var section = $(this).closest('section[data-sectionname=\"courses\"]');\n                var instanceid = section.data('instance');\n                var categories = section.find('.category-wrapper').data('categories');\n                var categoriesloaded = section.find('.category-wrapper').data('categories-loaded');\n                if (categoriesloaded < categories) {\n                    SECTIONMANAGER.showSectionLoader(instanceid, true);\n                    fetchCategories(instanceid, categoriesloaded + 1, 20, function(response) {\n                        var rendered = 0;\n                        response = JSON.parse(response);\n                        section.find('.category-wrapper').data('categories-loaded', categoriesloaded + response.categorylist.length);\n                        response.categorylist.forEach(function(category) {\n                            category.sectionproperties = response.sectionproperties;\n                            category.shadowless = response.sectionproperties.shadowless;\n                            Templates.render('local_remuihomepage/category_container', category)\n                            .done(function(html, js) {\n                                html = \"<div><div>\" + html + \"</div></div>\";\n                                $(slick.$slider).slick('slickAdd', html);\n                                ++rendered;\n                                if (rendered == response.categorylist.length) {\n                                    SECTIONMANAGER.showSectionLoader(instanceid, false);\n                                }\n                            })\n                            .fail(function(ex) {\n                                Notification.exception(ex);\n                                SECTIONMANAGER.showSectionLoader(instanceid, false);\n                            });\n                        });\n                    }, function(ex) {\n                        Notification.exception(ex);\n                        SECTIONMANAGER.showSectionLoader(instanceid, false);\n                    });\n                }\n            }\n        }).on('card-list-scroll', function(event, instanceid) {\n            var section = $('[data-instance=\"' + instanceid + '\"][data-sectionname=\"courses\"].categoryandcourses-view');\n            var list = section.find('.card-list');\n            if ($(list).scrollTop() + $(list).innerHeight() >= $(list)[0].scrollHeight) {\n                var instanceid = section.data('instance');\n                var categories = section.find('.course-category-wrapper').data('categories');\n                var categoriesloaded = section.find('.course-category-wrapper').data('categories-loaded');\n                if (categoriesloaded < categories) {\n                    SECTIONMANAGER.showSectionLoader(instanceid, true);\n                    fetchCategories(instanceid, categoriesloaded + 1, 50, function(response) {\n                        response = JSON.parse(response);\n                        response.shadowless = response.sectionproperties.shadowless;\n                        section.find('.course-category-wrapper').data('categories-loaded', categoriesloaded + response.categorylist.length);\n                        Templates.render('local_remuihomepage/course_categories', response)\n                        .done(function(html, js) {\n                            Templates.appendNodeContents($(list), html, js);\n                            SECTIONMANAGER.showSectionLoader(instanceid, false);\n                        })\n                        .fail(function(ex) {\n                            Notification.exception(ex);\n                            SECTIONMANAGER.showSectionLoader(instanceid, false);\n                        });\n                    }, function(ex) {\n                        Notification.exception(ex);\n                        SECTIONMANAGER.showSectionLoader(instanceid, false);\n                    });\n                }\n            }\n        });\n    };\n\n    return {\n        // Intialize the JS, with context id.\n        init: function(contextid, userisediting) {\n            CONTEXTID = contextid;\n            if (userisediting) {\n                initializeModal();\n            }\n            $(document).ready(function() {\n                initializeEvents();\n                // Load on page ready.\n                initSectionsLoader();\n            });\n        }\n    };\n});\n"],"names":["define","$","ModalFactory","Templates","Str","ModalEvents","SECTIONMANAGER","Fragment","Ajax","Notification","CONTEXTID","MAINMODAL","CONFIGMODAL","VISIBILITY","RemUIEvents","assign","Object","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","fetchCategories","instanceid","offset","limit","callback","fail","methodname","args","done","applySlickToCourses","options","defaults","dots","arrows","infinite","speed","prevArrow","nextArrow","rtl","attr","slidesToShow","slidesToScroll","responsive","breakpoint","settings","section","getSectionElement","find","addClass","slick","on","event","css","$slides","$slideTrack","height","removeClass","generateCourses","categoryid","showSectionLoader","response","JSON","parse","shadowless","sectionproperties","shadowcolor","empty","data","totalcourse","render","html","js","appendNodeContents","exception","ex","applyStyleToEditor","element","number","replace","prefix","style","val","match","next","is","after","getInstanceId","getBody","id","params","formdata","body","loadFragment","setTimeout","styles","each","index","initializeModal","context","triggerButtons","create","large","then","modal","setTitle","M","util","get_string","hasClass","width","bind","this","initModal","sections","title","imageurl","image_url","initializeEvents","window","scroll","sectiontop","position","top","scrollTop","getLoadedSection","reloadSection","success","appearanimation","appearanimationstyle","prev","transparentheader","form","color","color2","margin","parents","toggleClass","border","background","applyStyleToSeparator","closest","stringify","getRoot","serialize","frag","setBody","document","sectionname","type","types","SAVE_CANCEL","root","save","e","preventDefault","updateSectionData","updateSection","hide","remui_section_form_validate","hidden","destroy","remove","show","setSaveButtonText","deleteInstance","location","reload","dataatr","setSectionName","addSection","reorderSection","visible","updateVisibility","parent","playSliderVideo","append","submit","showAllSectionsLoader","previewon","SETTINGS","animate","console","log","hasslider","hideAllSectionsLoader","configdata","categorylist","firstcat","siblings","currentSlide","$nextArrow","totalcourses","current","start","rendered","courses","forEach","course","$slider","categories","categoriesloaded","category","list","innerHeight","scrollHeight","init","contextid","userisediting","ready","LoadAllSections"],"mappings":"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"}