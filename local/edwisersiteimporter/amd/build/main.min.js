define(["jquery","core/modal_factory","core/modal_events","core/fragment","core/templates","core/notification","core/ajax","core/modal_save_cancel"],function(e,t,i,r,o,n,a){let s={refresh_templates:function(){return a.call([{methodname:"local_edwisersiteimporter_refresh_templates",args:{}}])[0]}},c=!1;function l(){e(".view-template").on("click",function(r){var a=this;r.preventDefault();var s=e(this).data("type");return o.render("local_edwisersiteimporter/"+s+"_modal",e(this).data()).done(function(r,n){!function(r,n,a){var s=e(r).data("type");require(["local_edwisersiteimporter/"+s],function(c){t.create({title:M.util.get_string("import"+s,"local_edwisersiteimporter"),type:t.types.SAVE_CANCEL},e("#create")).done(function(t){o.replaceNodeContents(t.body,n,a),t.show(),t.setSaveButtonText(M.util.get_string("import","local_edwisersiteimporter")),t.getRoot().on(i.save,function(i){i.preventDefault(),c.importTemplate(e(r).data(),t)}),t.getRoot().on(i.hidden,function(){t.destroy()})})})}(a,r,n)}).fail(n.exception),!1})}function d(){1!=c&&(e("#edwisersiteimporter .templates-list").hide(),e("#edwisersiteimporter .loader-wrapper").show(),r.loadFragment("local_edwisersiteimporter","load_view",1,{}).done(function(t,i){o.replaceNodeContents("#edwisersiteimporter .templates-list",t,i),e("#edwisersiteimporter .loader-wrapper").hide(),e("#edwisersiteimporter .templates-list").show(),c=!0}).fail(n.exception))}return{init:function(t){l(),function(t){e(t+" .nav-tabs a").on("click",function(t){t.preventDefault(),e(this).tab("show")}),e(t+" #refresh-templates").on("click",function(){s.refresh_templates().done(function(e){e&&(c=!1,d())}).fail(n.exception)})}(t)},initLoader:function(){e(document).ready(function(){e('[href="#edwisersiteimporter"]').on("click",function(){d()}),e('[href="#edwisersiteimporter"]').is(".active")&&d()})}}});
//# sourceMappingURL=main.min.js.map
