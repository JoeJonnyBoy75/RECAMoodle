{"version":3,"file":"edwiserfrompreview.min.js","sources":["../src/edwiserfrompreview.js"],"sourcesContent":["/* eslint-disable camelcase */\n/* eslint-disable no-unused-vars */\n/* eslint-disable require-jsdoc */\n/* eslint-disable valid-jsdoc */\n/* eslint-disable */\ndefine('local_edwiserpagebuilder/edwiserfrompreview', ['jquery', 'core/ajax', 'local_edwiserform/form_styles', 'local_edwiserform/iefixes', 'local_edwiserform/formviewer'], function ($, ajax, formStyles) {\n    function get_from_data(formid) {\n        return ajax.call([{\n            methodname: 'edwiserform_get_form_definition',\n            args: {\n                form_id: formid,\n                countries: typeof window['countries'] == 'undefined' || true\n            }\n        }]);\n    }\n\n    render_form = (ele) => {\n        var formid = $(ele)[0].dataset.formid;\n        var formdata = get_from_data(formid);\n        var rootcont = $(ele).find('.edwiserform-root-container').find('.edwiserform-wrap-container');\n        var form = $(ele).find('.edwiserform-root-container').find('.edwiserform-wrap-container').find('.edwiserform-container');\n\n        var formOptions = {\n            container: form.get(0),\n            sitekey: M.cfg.sesskey,\n            countries: null,\n            localStorage: false,\n        };\n        formdata[0].done(function (responce) {\n            if (responce.status != false) {\n                formOptions.countries = responce.countries;\n                $(rootcont).prepend(`<h2 class='form-header'>${responce.title}</h2>`);\n                var formeo = new Formeo(formOptions, responce.definition);\n                formeo.render(form.get(0));\n                formStyles.apply($(form).find('.formeo-render'), 'add', responce.style);\n            }\n        });\n    }\n    render_all_form = () => {\n        var editorbody = $(\"#iframe1\").contents().find(\"body\");\n        $.each($(editorbody).find('.edwiser-pb-form-wrap'), function (index, ele) {\n            render_form(this);\n        });\n    };\n\n    return {\n        render_all_form: this.render_all_form,\n        render_form: this.render_form,\n        init: function () {\n            $(document).ready(function () {\n                Vvveb.Builder.iframe.onload = function () { render_all_form() };\n            });\n        }\n    }\n});\n"],"names":["define","$","ajax","formStyles","render_form","ele","formdata","formid","call","methodname","args","form_id","countries","window","get_from_data","dataset","rootcont","find","form","formOptions","container","get","sitekey","M","cfg","sesskey","localStorage","done","responce","status","prepend","title","Formeo","definition","render","apply","style","render_all_form","editorbody","contents","each","index","this","init","document","ready","Vvveb","Builder","iframe","onload"],"mappings":"AAKAA,qDAAsD,CAAC,SAAU,YAAa,gCAAiC,4BAA6B,iCAAiC,SAAUC,EAAGC,KAAMC,mBAW5LC,YAAeC,UAEPC,kBAZeC,eACZL,KAAKM,KAAK,CAAC,CACdC,WAAY,kCACZC,KAAM,CACFC,QAASJ,OACTK,eAAyC,IAAvBC,OAAM,YAAgC,MAOjDC,CADFb,EAAEI,KAAK,GAAGU,QAAQR,QAE3BS,SAAWf,EAAEI,KAAKY,KAAK,+BAA+BA,KAAK,+BAC3DC,KAAOjB,EAAEI,KAAKY,KAAK,+BAA+BA,KAAK,+BAA+BA,KAAK,0BAE3FE,YAAc,CACdC,UAAWF,KAAKG,IAAI,GACpBC,QAASC,EAAEC,IAAIC,QACfb,UAAW,KACXc,cAAc,GAElBpB,SAAS,GAAGqB,MAAK,SAAUC,UACA,GAAnBA,SAASC,SACTV,YAAYP,UAAYgB,SAAShB,UACjCX,EAAEe,UAAUc,0CAAmCF,SAASG,gBAC3C,IAAIC,OAAOb,YAAaS,SAASK,YACvCC,OAAOhB,KAAKG,IAAI,IACvBlB,WAAWgC,MAAMlC,EAAEiB,MAAMD,KAAK,kBAAmB,MAAOW,SAASQ,YAI7EC,gBAAkB,SACVC,WAAarC,EAAE,YAAYsC,WAAWtB,KAAK,QAC/ChB,EAAEuC,KAAKvC,EAAEqC,YAAYrB,KAAK,0BAA0B,SAAUwB,MAAOpC,KACjED,YAAYsC,UAIb,CACHL,gBAAiBK,KAAKL,gBACtBjC,YAAasC,KAAKtC,YAClBuC,KAAM,WACF1C,EAAE2C,UAAUC,OAAM,WACdC,MAAMC,QAAQC,OAAOC,OAAS,WAAcZ"}