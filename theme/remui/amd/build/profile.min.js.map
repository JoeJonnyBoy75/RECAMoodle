{"version":3,"sources":["profile.js"],"names":["define","$","Ajax","click","SELECTORS","show","removeClass","addClass","find","html","fname","val","lname","description","trim","city","country","M","util","get_string","focus","call","methodname","args","done","css","text","fail","ex","errorcode","error","Notification","exception","asPieProgress","namespace"],"mappings":"AAAA,aAEAA,OAAO,CAAC,SAAU,YAAa,oBAAqB,mCAAoC,6BAA8B,SAAUC,EAAGC,GACjID,EAAE,mDAAmDE,MAAM,WACzD,IAAIC,EACK,oBADLA,EAEM,eAFNA,EAGO,gBAEXH,EAAEG,GAAiBC,OACnBJ,EAAEG,GAAiBE,YAAYF,GAAkBG,SAASH,GAC1DH,EAAEG,GAAiBI,KAAK,KAAKC,KAAK,aAClC,IAAIC,EAAQT,EAAE,eAAeU,MACzBC,EAAQX,EAAE,YAAYU,MACtBE,EAAcZ,EAAEa,KAAKb,EAAE,gBAAgBU,OACvCI,EAAOd,EAAEa,KAAKb,EAAE,SAASU,OACzBK,EAAUf,EAAE,0DAA0DU,MAE1E,MAAc,KAAVD,GACFT,EAAEG,GAAiBC,OACnBJ,EAAEG,GAAiBE,YAAYF,GAAmBG,SAASH,GAC3DH,EAAEG,GAAiBI,KAAK,KAAKC,KAAKQ,EAAEC,KAAKC,WAAW,iBAAkB,gBACtElB,EAAE,eAAemB,SACV,GAGK,KAAVR,GACFX,EAAEG,GAAiBC,OACnBJ,EAAEG,GAAiBE,YAAYF,GAAmBG,SAASH,GAC3DH,EAAEG,GAAiBI,KAAK,KAAKC,KAAKQ,EAAEC,KAAKC,WAAW,gBAAiB,gBACrElB,EAAE,YAAYmB,SACP,IAGKlB,EAAKmB,KAAK,CAAC,CACvBC,WAAY,yCACZC,KAAM,CACJb,MAAOA,EACPE,MAAOA,EACPC,YAAaA,EACbE,KAAMA,EACNC,QAASA,MAET,GACIQ,KAAK,WACXvB,EAAEG,GAAiBC,OACnBJ,EAAEG,GAAiBE,YAAYF,GAAkBG,SAASH,GAC1DH,EAAEG,GAAiBI,KAAK,KAAKiB,IAAI,SAAU,KAAKhB,KAAKQ,EAAEC,KAAKC,WAAW,2BAA4B,gBACnGlB,EAAE,iBAAiByB,KAAKhB,EAAQ,IAAME,GACtCX,EAAE,6BAA6ByB,KAAKhB,EAAQ,IAAME,GAClDX,EAAE,qBAAqByB,KAAKb,KAC3Bc,KAAK,SAAUC,GAChB3B,EAAEG,GAAiBE,YAAYF,GAAmBG,SAASH,GAC3DH,EAAEG,GAAiBI,KAAK,KAAKiB,IAAI,SAAU,KAAKhB,KAAKmB,EAAGC,UAAY,MAAQD,EAAGE,MAAQ,KAAOb,EAAEC,KAAKC,WAAW,4BAA6B,gBAC7IY,aAAaC,UAAUJ,MAElB,KAGT3B,EAAE,0BAA0BgC,cAAc,CACxCC,UAAW","sourcesContent":["\"use strict\";\ndefine([\n    'jquery',\n    'core/ajax',\n    'core/notification',\n    'theme_remui/jquery-asPieProgress',\n    'theme_remui/aspieprogress'\n], function($, Ajax) {\n    $('#editprofile .form-horizontal #btn-save-changes').click(function() {\n        var SELECTORS = {\n            ERROR: 'div#error-message',\n            DANGER: 'alert-danger',\n            SUCCESS: 'alert-success'\n        };\n        $(SELECTORS.ERROR).show();\n        $(SELECTORS.ERROR).removeClass(SELECTORS.DANGER).addClass(SELECTORS.SUCCESS);\n        $(SELECTORS.ERROR).find('p').html(\"Saving...\");\n\n        var fname = $('#first_name').val();\n        var lname = $('#surname').val();\n        var description = $.trim($('#description').val());\n        var city = $.trim($('#city').val());\n        var country = $('#editprofile .form-horizontal #country option:selected').val();\n\n        if (fname === '') {\n            $(SELECTORS.ERROR).show();\n            $(SELECTORS.ERROR).removeClass(SELECTORS.SUCCESS).addClass(SELECTORS.DANGER);\n            $(SELECTORS.ERROR).find('p').html(M.util.get_string('enterfirstname', 'theme_remui'));\n            $('#first_name').focus();\n            return false;\n        }\n        if (lname === '') {\n            $(SELECTORS.ERROR).show();\n            $(SELECTORS.ERROR).removeClass(SELECTORS.SUCCESS).addClass(SELECTORS.DANGER);\n            $(SELECTORS.ERROR).find('p').html(M.util.get_string('enterlastname', 'theme_remui'));\n            $('#surname').focus();\n            return false;\n        }\n\n        var promise = Ajax.call([{\n            methodname: 'theme_remui_save_user_profile_settings',\n            args: {\n                fname,\n                lname,\n                description,\n                city,\n                country\n            }\n        }])[0];\n        promise.done(function() {\n            $(SELECTORS.ERROR).show();\n            $(SELECTORS.ERROR).removeClass(SELECTORS.DANGER).addClass(SELECTORS.SUCCESS);\n            $(SELECTORS.ERROR).find('p').css('margin', '0').html(M.util.get_string('detailssavedsuccessfully', 'theme_remui'));\n            $('.profile-user').text(fname + \" \" + lname);\n            $('.usermenu a span.usertext').text(fname + \" \" + lname);\n            $('#user-description').text(description);\n        })\n        .fail(function(ex) {\n            $(SELECTORS.ERROR).removeClass(SELECTORS.SUCCESS).addClass(SELECTORS.DANGER);\n            $(SELECTORS.ERROR).find('p')\n            .css('margin', '0')\n            .html(ex.errorcode + ' : ' + ex.error + ', ' + M.util.get_string('actioncouldnotbeperformed', 'theme_remui'));\n            Notification.exception(ex);\n        });\n\n        return false;\n    });\n\n    // Initiliaze coruse progress in profile.\n    $('.remui-course-progress').asPieProgress({\n        namespace: 'asPieProgress'\n    });\n});\n"],"file":"profile.min.js"}