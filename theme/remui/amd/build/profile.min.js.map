{"version":3,"file":"profile.min.js","sources":["../src/profile.js"],"sourcesContent":["\"use strict\";\ndefine([\n    'jquery',\n    'core/ajax',\n    'core/notification'\n], function($, Ajax) {\n    $('#editprofile .form-horizontal #btn-save-changes').click(function() {\n        var SELECTORS = {\n            ERROR: 'div#error-message',\n            DANGER: 'alert-danger',\n            SUCCESS: 'alert-success'\n        };\n        $(SELECTORS.ERROR).show();\n        $(SELECTORS.ERROR).removeClass(SELECTORS.DANGER).addClass(SELECTORS.SUCCESS);\n        $(SELECTORS.ERROR).find('p').html(\"Saving...\");\n\n        var fname = $('#first_name').val();\n        var lname = $('#surname').val();\n        var description = $.trim($('#description').val());\n        var city = $.trim($('#city').val());\n        var country = $('#editprofile .form-horizontal #country option:selected').val();\n\n        if (fname === '') {\n            $(SELECTORS.ERROR).show();\n            $(SELECTORS.ERROR).removeClass(SELECTORS.SUCCESS).addClass(SELECTORS.DANGER);\n            $(SELECTORS.ERROR).find('p').html(M.util.get_string('enterfirstname', 'theme_remui'));\n            $('#first_name').focus();\n            return false;\n        }\n        if (lname === '') {\n            $(SELECTORS.ERROR).show();\n            $(SELECTORS.ERROR).removeClass(SELECTORS.SUCCESS).addClass(SELECTORS.DANGER);\n            $(SELECTORS.ERROR).find('p').html(M.util.get_string('enterlastname', 'theme_remui'));\n            $('#surname').focus();\n            return false;\n        }\n\n        var promise = Ajax.call([{\n            methodname: 'theme_remui_save_user_profile_settings',\n            args: {\n                fname,\n                lname,\n                description,\n                city,\n                country\n            }\n        }])[0];\n        promise.done(function() {\n            $(SELECTORS.ERROR).show();\n            $(SELECTORS.ERROR).removeClass(SELECTORS.DANGER).addClass(SELECTORS.SUCCESS);\n            $(SELECTORS.ERROR).find('p').css('margin', '0').html(M.util.get_string('detailssavedsuccessfully', 'theme_remui'));\n            $('.profile-user').text(fname + \" \" + lname);\n            $('.usermenu a span.usertext').text(fname + \" \" + lname);\n            $('#user-description').text(description);\n        })\n        .fail(function(ex) {\n            $(SELECTORS.ERROR).removeClass(SELECTORS.SUCCESS).addClass(SELECTORS.DANGER);\n            $(SELECTORS.ERROR).find('p')\n            .css('margin', '0')\n            .html(ex.errorcode + ' : ' + ex.error + ', ' + M.util.get_string('actioncouldnotbeperformed', 'theme_remui'));\n            Notification.exception(ex);\n        });\n\n        return false;\n    });\n\n});\n"],"names":["define","$","Ajax","click","SELECTORS","show","removeClass","addClass","find","html","fname","val","lname","description","trim","city","country","M","util","get_string","focus","call","methodname","args","done","css","text","fail","ex","errorcode","error","Notification","exception"],"mappings":"AACAA,6BAAO,CACH,SACA,YACA,sBACD,SAASC,EAAGC,MACXD,EAAE,mDAAmDE,OAAM,eACnDC,gBACO,oBADPA,iBAEQ,eAFRA,kBAGS,gBAEbH,EAAEG,iBAAiBC,OACnBJ,EAAEG,iBAAiBE,YAAYF,kBAAkBG,SAASH,mBAC1DH,EAAEG,iBAAiBI,KAAK,KAAKC,KAAK,iBAE9BC,MAAQT,EAAE,eAAeU,MACzBC,MAAQX,EAAE,YAAYU,MACtBE,YAAcZ,EAAEa,KAAKb,EAAE,gBAAgBU,OACvCI,KAAOd,EAAEa,KAAKb,EAAE,SAASU,OACzBK,QAAUf,EAAE,0DAA0DU,YAE5D,KAAVD,OACAT,EAAEG,iBAAiBC,OACnBJ,EAAEG,iBAAiBE,YAAYF,mBAAmBG,SAASH,kBAC3DH,EAAEG,iBAAiBI,KAAK,KAAKC,KAAKQ,EAAEC,KAAKC,WAAW,iBAAkB,gBACtElB,EAAE,eAAemB,SACV,GAEG,KAAVR,OACAX,EAAEG,iBAAiBC,OACnBJ,EAAEG,iBAAiBE,YAAYF,mBAAmBG,SAASH,kBAC3DH,EAAEG,iBAAiBI,KAAK,KAAKC,KAAKQ,EAAEC,KAAKC,WAAW,gBAAiB,gBACrElB,EAAE,YAAYmB,SACP,IAGGlB,KAAKmB,KAAK,CAAC,CACrBC,WAAY,yCACZC,KAAM,CACFb,MAAAA,MACAE,MAAAA,MACAC,YAAAA,YACAE,KAAAA,KACAC,QAAAA,YAEJ,GACIQ,MAAK,WACTvB,EAAEG,iBAAiBC,OACnBJ,EAAEG,iBAAiBE,YAAYF,kBAAkBG,SAASH,mBAC1DH,EAAEG,iBAAiBI,KAAK,KAAKiB,IAAI,SAAU,KAAKhB,KAAKQ,EAAEC,KAAKC,WAAW,2BAA4B,gBACnGlB,EAAE,iBAAiByB,KAAKhB,MAAQ,IAAME,OACtCX,EAAE,6BAA6ByB,KAAKhB,MAAQ,IAAME,OAClDX,EAAE,qBAAqByB,KAAKb,gBAE/Bc,MAAK,SAASC,IACX3B,EAAEG,iBAAiBE,YAAYF,mBAAmBG,SAASH,kBAC3DH,EAAEG,iBAAiBI,KAAK,KACvBiB,IAAI,SAAU,KACdhB,KAAKmB,GAAGC,UAAY,MAAQD,GAAGE,MAAQ,KAAOb,EAAEC,KAAKC,WAAW,4BAA6B,gBAC9FY,aAAaC,UAAUJ,QAGpB"}