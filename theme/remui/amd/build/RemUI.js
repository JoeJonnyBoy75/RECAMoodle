/*!
 * remark (http://getbootstrapadmin.com/remark)
 * Copyright 2017 amazingsurge
 * Licensed under the Themeforest Standard Licenses
 */

define(["exports","jquery","./Site","core/event"],function(exports,_jquery,_Site2,_event){"use strict";function getInstance(){return instance||(instance=new RemUI),instance}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getInstance=exports.run=exports.RemUI=void 0;var _jquery2=babelHelpers.interopRequireDefault(_jquery),_Site3=babelHelpers.interopRequireDefault(_Site2),_event2=babelHelpers.interopRequireDefault(_event),$BODY=(document,(0,_jquery2.default)(document),(0,_jquery2.default)("body")),RemUI=function(_Site){function RemUI(){return babelHelpers.classCallCheck(this,RemUI),babelHelpers.possibleConstructorReturn(this,(RemUI.__proto__||Object.getPrototypeOf(RemUI)).apply(this,arguments))}return babelHelpers.inherits(RemUI,_Site),babelHelpers.createClass(RemUI,[{key:"willProcess",value:function(){this.initializePluginAPIs(),this.initializePlugins()}},{key:"processed",value:function(){this.polyfillIEWidth(),this.initBootstrap(),this.setupMenubar(),this.setupFullScreen(),this.setupMegaNavbar(),this.setupNavbarCollpase(),this.asscrollRemUIElements(),this.moodleEvents(),this.$el.on("click",".dropdown-menu-media",function(e){e.stopPropagation()})}},{key:"asscrollRemUIElements",value:function(){var $nume=(0,_jquery2.default)("div.card div.divScroll");if($nume.length>0){var api=$nume.data("asScrollable");api?api.update():$nume.asScrollable({namespace:"scrollable",contentSelector:"> [data-role='content']",containerSelector:"> [data-role='container']"})}}},{key:"moodleEvents",value:function(){var this2=this;_event2.default.getLegacyEvents().done(function(events){jQuery(document).on(events.FILTER_CONTENT_UPDATED,function(){this2.asscrollRemUIElements()})})}},{key:"_getDefaultMeunbarType",value:function(){var breakpoint=this.getCurrentBreakpoint(),type=!1;switch((!1===$BODY.data("autoMenubar")||$BODY.is(".site-menubar-keep"))&&(1==$BODY.data("isfolded")?type="fold":0==$BODY.data("isfolded")&&(type="unfold")),breakpoint){case"lg":type=type||"unfold";break;case"md":case"sm":type="fold";break;case"xs":type="hide"}return type}},{key:"setupMenubar",value:function(){var _this2=this;(0,_jquery2.default)(document).on("click",'[data-toggle="menubar"]',function(){var type=_this2.getState("menubarType");switch(type){case"fold":type="unfold";break;case"unfold":type="fold";break;case"open":type="hide";break;case"hide":type="open"}return"lg"==_this2.getCurrentBreakpoint()&&M.util.set_user_preference("menubar_state",type),_this2.setState("menubarType",type),!1}),Breakpoints.on("change",function(){_this2.setState("menubarType",_this2._getDefaultMeunbarType())})}}]),RemUI}(_Site3.default),instance=null;exports.default=RemUI,exports.RemUI=RemUI,exports.run=function(){getInstance().run()},exports.getInstance=getInstance});