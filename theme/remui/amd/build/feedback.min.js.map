{"version":3,"file":"feedback.min.js","sources":["../src/feedback.js"],"sourcesContent":["/* eslint-disable no-undef */\ndefine(['jquery', 'core/ajax'], function($, Ajax) {\n    $.feedback = function(options) {\n\n        var settings = $.extend({\n            ajaxURL:                '',\n            postBrowserInfo:        true,\n            postHTML:               true,\n            postURL:                true,\n            proxy:                  undefined,\n            letterRendering:        false,\n            initButtonText:         'Send feedback',\n            strokeStyle:            'black',\n            shadowColor:            'black',\n            shadowOffsetX:          1,\n            shadowOffsetY:          1,\n            shadowBlur:             10,\n            lineJoin:               'bevel',\n            lineWidth:              3,\n            html2canvasURL:         'html2canvas.js',\n            feedbackButton:         '.feedback-btn',\n            showDescriptionModal:   true,\n            isDraggable:            true,\n            onScreenshotTaken:      function() {},\n            tpl: {\n                description:    '<div id=\"feedback-welcome\"><div class=\"feedback-logo\">Feedback</div><p>Feedback lets you send us suggestions about our products. We welcome problem reports, feature ideas and general comments.</p><p>Start by writing a brief description:</p><textarea id=\"feedback-note-tmp\"></textarea><p>Next we\\'ll let you identify areas of the page related to your description.</p><button id=\"feedback-welcome-next\" class=\"feedback-next-btn feedback-btn-gray\">Next</button><div id=\"feedback-welcome-error\">Please enter a description.</div><div class=\"feedback-wizard-close\"></div></div>',\n                highlighter:    '<div id=\"feedback-highlighter\"><div class=\"feedback-logo\">Feedback</div><p>Click and drag on the page to help us better understand your feedback. You can move this dialog if it\\'s in the way.</p><button class=\"feedback-sethighlight feedback-active\"><div class=\"ico\"></div><span>Highlight</span></button><label>Highlight areas relevant to your feedback.</label><button class=\"feedback-setblackout\"><div class=\"ico\"></div><span>Black out</span></button><label class=\"lower\">Black out any personal information.</label><div class=\"feedback-buttons\"><button id=\"feedback-highlighter-next\" class=\"feedback-next-btn feedback-btn-gray\">Next</button><button id=\"feedback-highlighter-back\" class=\"feedback-back-btn feedback-btn-gray\">Back</button></div><div class=\"feedback-wizard-close\"></div></div>',\n                overview:       '<div id=\"feedback-overview\"><div class=\"feedback-logo\">Feedback</div><div id=\"feedback-overview-description\"><div id=\"feedback-overview-description-text\"><h3>Description</h3><h3 class=\"feedback-additional\">Additional info</h3><div id=\"feedback-additional-none\"><span>None</span></div><div id=\"feedback-browser-info\"><span>Browser Info</span></div><div id=\"feedback-page-info\"><span>Page Info</span></div><div id=\"feedback-page-structure\"><span>Page Structure</span></div></div></div><div id=\"feedback-overview-screenshot\"><h3>Screenshot</h3></div><div class=\"feedback-buttons\"><button id=\"feedback-submit\" class=\"feedback-submit-btn feedback-btn-blue\">Submit</button><button id=\"feedback-overview-back\" class=\"feedback-back-btn feedback-btn-gray\">Back</button></div><div id=\"feedback-overview-error\">Please enter a description.</div><div class=\"feedback-wizard-close\"></div></div>',\n                submitLoading:  '<div id=\"feedback-submit-loading\"><div class=\"feedback-logo\">Feedback</div><p>Loading...</p></div>',\n                submitSuccess:  '<div id=\"feedback-submit-success\"><div class=\"feedback-logo\">Feedback</div><p>Thank you for your feedback. We value every piece of feedback we receive.</p></p><button class=\"feedback-close-btn feedback-btn-blue\">OK</button><div class=\"feedback-wizard-close\"></div></div>',\n                submitError:    '<div id=\"feedback-submit-error\"><div class=\"feedback-logo\">Feedback</div><p>Sadly an error occured while sending your feedback. Please try again.</p><button class=\"feedback-close-btn feedback-btn-blue\">OK</button><div class=\"feedback-wizard-close\"></div></div>'\n            },\n            onClose:                function() {},\n            onTrigger: function(){},\n            screenshotStroke:       true,\n            highlightElement:       true,\n            initialBox:             false\n        }, options);\n        var supportedBrowser = !!window.HTMLCanvasElement;\n        var isFeedbackButtonNative = settings.feedbackButton == '.feedback-btn';\n        var _html2canvas = false;\n        if (supportedBrowser) {\n            if (isFeedbackButtonNative) {\n                $('body').append('<button class=\"feedback-btn feedback-btn-gray feedback-btn-native\">' + settings.initButtonText + '</button>');\n            }\n            $(document).on('click.feedback', settings.feedbackButton, function() {\n                settings.onTrigger.call(this);\n                if (isFeedbackButtonNative) {\n                    $(this).hide();\n                }\n                if (!_html2canvas) {\n                    $.getScript(settings.html2canvasURL, function() {\n                        _html2canvas = true;\n                    });\n                }\n                var canDraw = false,\n                    img = '',\n                    h = $(document).height(),\n                    w = $(document).width(),\n                    tpl = '<div id=\"feedback-module\">';\n\n                if (settings.initialBox) {\n                    tpl += settings.tpl.description;\n                }\n\n                tpl += settings.tpl.highlighter + settings.tpl.overview + '<canvas id=\"feedback-canvas\"></canvas><div id=\"feedback-helpers\"></div><input id=\"feedback-note\" name=\"feedback-note\" type=\"hidden\"></div>';\n\n                $('body').append(tpl);\n\n                var moduleStyle = {\n                    'position': 'absolute',\n                    'left':     '0px',\n                    'top':      '0px'\n                };\n                var canvasAttr = {\n                    'width': w,\n                    'height': h\n                };\n\n                $('#feedback-module').css(moduleStyle);\n                $('#feedback-canvas').attr(canvasAttr).css('z-index', '30000');\n\n                if (!settings.initialBox) {\n                    $('#feedback-highlighter-back').remove();\n                    canDraw = true;\n                    $('#feedback-canvas').css('cursor', 'crosshair');\n                    $('#feedback-helpers').show();\n                    $('#feedback-welcome').hide();\n                    $('#feedback-highlighter').show();\n                }\n\n                if (settings.isDraggable) {\n                    $('#feedback-highlighter').on('mousedown.feedback', function(e) {\n                        var $d = $(this).addClass('feedback-draggable'),\n                            drag_h = $d.outerHeight(),\n                            drag_w = $d.outerWidth(),\n                            pos_y = $d.offset().top + drag_h - e.pageY,\n                            pos_x = $d.offset().left + drag_w - e.pageX;\n                        $d.css('z-index', 40000).parents().on('mousemove.feedback', function(e) {\n                            _top = e.pageY + pos_y - drag_h;\n                            _left = e.pageX + pos_x - drag_w;\n                            _bottom = drag_h - e.pageY;\n                            _right = drag_w - e.pageX;\n\n                            if (_left < 0) {\n _left = 0;\n}\n                            if (_top < 0) {\n _top = 0;\n}\n                            if (_right > $(window).width()) {\n _left = $(window).width() - drag_w;\n}\n                            if (_left > $(window).width() - drag_w) {\n _left = $(window).width() - drag_w;\n}\n                            if (_bottom > $(document).height()) {\n _top = $(document).height() - drag_h;\n}\n                            if (_top > $(document).height() - drag_h) {\n _top = $(document).height() - drag_h;\n}\n\n                            $('.feedback-draggable').offset({\n                                top:    _top,\n                                left:   _left\n                            }).on(\"mouseup\", function() {\n                                $(this).removeClass('feedback-draggable');\n                            });\n                        });\n                        e.preventDefault();\n                    }).on('mouseup.feedback', function() {\n                        $(this).removeClass('feedback-draggable');\n                        $(this).parents().off('mousemove mousedown');\n                    });\n                }\n\n                var ctx = $('#feedback-canvas')[0].getContext('2d');\n\n                ctx.fillStyle = 'rgba(102,102,102,0.5)';\n                ctx.fillRect(0, 0, $('#feedback-canvas').width(), $('#feedback-canvas').height());\n\n                rect = {};\n                drag = false;\n                highlight = 0; // Made it 0 so default is blackout - remui\n                post = {};\n\n                if (settings.postBrowserInfo) {\n                    post.browser = {};\n                    post.browser.appCodeName = navigator.appCodeName;\n                    post.browser.appName = navigator.appName;\n                    post.browser.appVersion = navigator.appVersion;\n                    post.browser.cookieEnabled = navigator.cookieEnabled;\n                    post.browser.onLine = navigator.onLine;\n                    post.browser.platform = navigator.platform;\n                    post.browser.userAgent = navigator.userAgent;\n                    post.browser.plugins = [];\n\n                    $.each(navigator.plugins, function(i) {\n                        post.browser.plugins.push(navigator.plugins[i].name);\n                    });\n                    $('#feedback-browser-info').show();\n                }\n\n                if (settings.postURL) {\n                    post.url = document.URL;\n                    $('#feedback-page-info').show();\n                }\n\n                if (settings.postHTML) {\n                    post.html = $('html').html();\n                    $('#feedback-page-structure').show();\n                }\n\n                if (!settings.postBrowserInfo && !settings.postURL && !settings.postHTML) {\n $('#feedback-additional-none').show();\n}\n\n                // // We can add the extra data\n                // $(document).ready(function(){\n                //     var serviceName = 'theme_remui_handle_bug_feedback_report';\n                //     var getusagedata = Ajax.call([{\n                //         methodname: serviceName,\n                //         args: {}\n                //     }]);\n                //     getusagedata[0].done(function(response) {\n                //         response = JSON.parse(response);\n                //         console.log(\"Response : \");\n                //         console.log(response);\n                //         post.siteurl = response.siteurl;\n                //         delete response.siteurl;\n\n                //         post.databasename = response.databasename;\n                //         delete response.databasename;\n\n                //         post.php = response.php_version;\n                //         delete response.php_version;\n\n                //         post.web_server = response.web_server;\n                //         delete response.web_server;\n\n                //         post.server_os = response.server_os;\n                //         delete response.server_os;\n\n                //         post.system_version = response.system_version;\n                //         delete response.system_version;\n                //     }).fail(Notification.exception);\n                // });\n\n\n                $(document).on('mousedown.feedback', '#feedback-canvas', function(e) {\n                    if (canDraw) {\n\n                        rect.startX = e.pageX - $(this).offset().left;\n                        rect.startY = e.pageY - $(this).offset().top;\n                        rect.w = 0;\n                        rect.h = 0;\n                        drag = true;\n                    }\n                });\n\n                $(document).on('mouseup.feedback', function() {\n                    if (canDraw) {\n                        drag = false;\n\n                        var dtop = rect.startY,\n                            dleft = rect.startX,\n                            dwidth = rect.w,\n                            dheight = rect.h;\n                        dtype = 'highlight';\n\n                        if (dwidth == 0 || dheight == 0) {\n return;\n}\n\n                        if (dwidth < 0) {\n                            dleft += dwidth;\n                            dwidth *= -1;\n                        }\n                        if (dheight < 0) {\n                            dtop += dheight;\n                            dheight *= -1;\n                        }\n\n                        if (dtop + dheight > $(document).height()) {\n dheight = $(document).height() - dtop;\n}\n                        if (dleft + dwidth > $(document).width()) {\n dwidth = $(document).width() - dleft;\n}\n\n                        if (highlight == 0) {\n dtype = 'blackout';\n}\n\n                        $('#feedback-helpers').append('<div class=\"feedback-helper\" data-type=\"' + dtype + '\" data-time=\"' + Date.now() + '\" style=\"position:absolute;top:' + dtop + 'px;left:' + dleft + 'px;width:' + dwidth + 'px;height:' + dheight + 'px;z-index:30000;\"></div>');\n\n                        redraw(ctx);\n                        rect.w = 0;\n                    }\n\n                });\n\n                $(document).on('mousemove.feedback', function(e) {\n                    if (canDraw && drag) {\n                        $('#feedback-highlighter').css('cursor', 'default');\n\n                        rect.w = (e.pageX - $('#feedback-canvas').offset().left) - rect.startX;\n                        rect.h = (e.pageY - $('#feedback-canvas').offset().top) - rect.startY;\n\n                        ctx.clearRect(0, 0, $('#feedback-canvas').width(), $('#feedback-canvas').height());\n                        ctx.fillStyle = 'rgba(102,102,102,0.5)';\n                        ctx.fillRect(0, 0, $('#feedback-canvas').width(), $('#feedback-canvas').height());\n                        $('.feedback-helper').each(function() {\n                            if ($(this).attr('data-type') == 'highlight') {\n drawlines(ctx, parseInt($(this).css('left'), 10), parseInt($(this).css('top'), 10), $(this).width(), $(this).height());\n}\n                        });\n                        if (highlight == 1) {\n                            drawlines(ctx, rect.startX, rect.startY, rect.w, rect.h);\n                            ctx.clearRect(rect.startX, rect.startY, rect.w, rect.h);\n                        }\n                        $('.feedback-helper').each(function() {\n                            if ($(this).attr('data-type') == 'highlight') {\n ctx.clearRect(parseInt($(this).css('left'), 10), parseInt($(this).css('top'), 10), $(this).width(), $(this).height());\n}\n                        });\n                        $('.feedback-helper').each(function() {\n                            if ($(this).attr('data-type') == 'blackout') {\n                                ctx.fillStyle = 'rgba(0,0,0,1)';\n                                ctx.fillRect(parseInt($(this).css('left'), 10), parseInt($(this).css('top'), 10), $(this).width(), $(this).height());\n                            }\n                        });\n                        if (highlight == 0) {\n                            ctx.fillStyle = 'rgba(0,0,0,0.5)';\n                            ctx.fillRect(rect.startX, rect.startY, rect.w, rect.h);\n                        }\n                    }\n                });\n\n                if (settings.highlightElement) {\n                    var highlighted = [],\n                        tmpHighlighted = [],\n                        hidx = 0;\n\n                    $(document).on('click.feedback', '#feedback-canvas', function(e) {\n                        if (canDraw) {\n                            redraw(ctx);\n                            tmpHighlighted = [];\n\n                            $('#feedback-canvas').css('cursor', 'crosshair');\n\n                            $('* :not(body,script,iframe,div,section,.feedback-btn,#feedback-module *)').each(function() {\n                                if ($(this).attr('data-highlighted') === 'true') {\n return;\n}\n\n                                if (e.pageX > $(this).offset().left && e.pageX < $(this).offset().left + $(this).width() && e.pageY > $(this).offset().top + parseInt($(this).css('padding-top'), 10) && e.pageY < $(this).offset().top + $(this).height() + parseInt($(this).css('padding-top'), 10)) {\n                                    tmpHighlighted.push($(this));\n                                }\n                            });\n\n                            var $toHighlight = tmpHighlighted[tmpHighlighted.length - 1];\n\n                            if ($toHighlight && !drag) {\n                                $('#feedback-canvas').css('cursor', 'pointer');\n\n                                var _x = $toHighlight.offset().left - 2,\n                                    _y = $toHighlight.offset().top - 2,\n                                    _w = $toHighlight.width() + parseInt($toHighlight.css('padding-left'), 10) + parseInt($toHighlight.css('padding-right'), 10) + 6,\n                                    _h = $toHighlight.height() + parseInt($toHighlight.css('padding-top'), 10) + parseInt($toHighlight.css('padding-bottom'), 10) + 6;\n\n                                if (highlight == 1) {\n                                    drawlines(ctx, _x, _y, _w, _h);\n                                    ctx.clearRect(_x, _y, _w, _h);\n                                    dtype = 'highlight';\n                                }\n\n                                $('.feedback-helper').each(function() {\n                                    if ($(this).attr('data-type') == 'highlight') {\n ctx.clearRect(parseInt($(this).css('left'), 10), parseInt($(this).css('top'), 10), $(this).width(), $(this).height());\n}\n                                });\n\n                                if (highlight == 0) {\n                                    dtype = 'blackout';\n                                    ctx.fillStyle = 'rgba(0,0,0,0.5)';\n                                    ctx.fillRect(_x, _y, _w, _h);\n                                }\n\n                                $('.feedback-helper').each(function() {\n                                    if ($(this).attr('data-type') == 'blackout') {\n                                        ctx.fillStyle = 'rgba(0,0,0,1)';\n                                        ctx.fillRect(parseInt($(this).css('left'), 10), parseInt($(this).css('top'), 10), $(this).width(), $(this).height());\n                                    }\n                                });\n\n                                if (e.type == 'click' && e.pageX == rect.startX && e.pageY == rect.startY) {\n                                    $('#feedback-helpers').append('<div class=\"feedback-helper\" data-highlight-id=\"' + hidx + '\" data-type=\"' + dtype + '\" data-time=\"' + Date.now() + '\" style=\"position:absolute;top:' + _y + 'px;left:' + _x + 'px;width:' + _w + 'px;height:' + _h + 'px;z-index:30000;\"></div>');\n                                    highlighted.push(hidx);\n                                    ++hidx;\n                                    redraw(ctx);\n                                }\n                            }\n                        }\n                    });\n                }\n\n                $(document).on('mouseleave.feedback', 'body,#feedback-canvas', function() {\n                    redraw(ctx);\n                });\n\n                $(document).on('mouseenter.feedback', '.feedback-helper', function() {\n                    redraw(ctx);\n                });\n\n                $(document).on('click.feedback', '#feedback-welcome-next', function() {\n                    if ($('#feedback-note').val().length > 0) {\n                        canDraw = true;\n                        $('#feedback-canvas').css('cursor', 'crosshair');\n                        $('#feedback-helpers').show();\n                        $('#feedback-welcome').hide();\n                        $('#feedback-highlighter').show();\n                    } else {\n                        $('#feedback-welcome-error').show();\n                    }\n                });\n\n                $(document).on('mouseenter.feedback mouseleave.feedback', '.feedback-helper', function(e) {\n                    if (drag) {\n return;\n}\n\n                    rect.w = 0;\n                    rect.h = 0;\n\n                    if (e.type === 'mouseenter') {\n                        $(this).css('z-index', '30001');\n                        $(this).append('<div class=\"feedback-helper-inner\" style=\"width:' + ($(this).width() - 2) + 'px;height:' + ($(this).height() - 2) + 'px;position:absolute;margin:1px;\"></div>');\n                        $(this).append('<div id=\"feedback-close\"></div>');\n                        $(this).find('#feedback-close').css({\n                            'top': -1 * ($(this).find('#feedback-close').height() / 2) + 'px',\n                            'left': $(this).width() - ($(this).find('#feedback-close').width() / 2) + 'px'\n                        });\n\n                        if ($(this).attr('data-type') == 'blackout') {\n                            /* Redraw white */\n                            ctx.clearRect(0, 0, $('#feedback-canvas').width(), $('#feedback-canvas').height());\n                            ctx.fillStyle = 'rgba(102,102,102,0.5)';\n                            ctx.fillRect(0, 0, $('#feedback-canvas').width(), $('#feedback-canvas').height());\n                            $('.feedback-helper').each(function() {\n                                if ($(this).attr('data-type') == 'highlight') {\n drawlines(ctx, parseInt($(this).css('left'), 10), parseInt($(this).css('top'), 10), $(this).width(), $(this).height());\n}\n                            });\n                            $('.feedback-helper').each(function() {\n                                if ($(this).attr('data-type') == 'highlight') {\n ctx.clearRect(parseInt($(this).css('left'), 10), parseInt($(this).css('top'), 10), $(this).width(), $(this).height());\n}\n                            });\n\n                            ctx.clearRect(parseInt($(this).css('left'), 10), parseInt($(this).css('top'), 10), $(this).width(), $(this).height());\n                            ctx.fillStyle = 'rgba(0,0,0,0.75)';\n                            ctx.fillRect(parseInt($(this).css('left'), 10), parseInt($(this).css('top'), 10), $(this).width(), $(this).height());\n\n                            ignore = $(this).attr('data-time');\n\n                            /* Redraw black */\n                            $('.feedback-helper').each(function() {\n                                if ($(this).attr('data-time') == ignore) {\n return true;\n}\n                                if ($(this).attr('data-type') == 'blackout') {\n                                    ctx.fillStyle = 'rgba(0,0,0,1)';\n                                    ctx.fillRect(parseInt($(this).css('left'), 10), parseInt($(this).css('top'), 10), $(this).width(), $(this).height());\n                                }\n                            });\n                        }\n                    } else {\n                        $(this).css('z-index', '30000');\n                        $(this).children().remove();\n                        if ($(this).attr('data-type') == 'blackout') {\n                            redraw(ctx);\n                        }\n                    }\n                });\n\n                $(document).on('click.feedback', '#feedback-close', function() {\n                    if (settings.highlightElement && $(this).parent().attr('data-highlight-id')) {\n var _hidx = $(this).parent().attr('data-highlight-id');\n}\n\n                    $(this).parent().remove();\n\n                    if (settings.highlightElement && _hidx) {\n $('[data-highlight-id=\"' + _hidx + '\"]').removeAttr('data-highlighted').removeAttr('data-highlight-id');\n}\n\n                    redraw(ctx);\n                });\n\n                $('#feedback-module').on('click.feedback', '.feedback-wizard-close,.feedback-close-btn', function() {\n                    close();\n                });\n\n                $(document).on('keyup.feedback', function(e) {\n                    if (e.keyCode == 27) {\n close();\n}\n                });\n\n                $(document).on('selectstart.feedback dragstart.feedback', function(e) {\n                    e.preventDefault();\n                });\n\n                $(document).on('click.feedback', '#feedback-highlighter-back', function() {\n                    canDraw = false;\n                    $('#feedback-canvas').css('cursor', 'default');\n                    $('#feedback-helpers').hide();\n                    $('#feedback-highlighter').hide();\n                    $('#feedback-welcome-error').hide();\n                    $('#feedback-welcome').show();\n                });\n\n                $(document).on('mousedown.feedback', '.feedback-sethighlight', function() {\n                    highlight = 1;\n                    $(this).addClass('feedback-active');\n                    $('.feedback-setblackout').removeClass('feedback-active');\n                });\n\n                $(document).on('mousedown.feedback', '.feedback-setblackout', function() {\n                    highlight = 0;\n                    $(this).addClass('feedback-active');\n                    $('.feedback-sethighlight').removeClass('feedback-active');\n                });\n\n                $(document).on('click.feedback', '#feedback-highlighter-next', function() {\n                    canDraw = false;\n                    $('#feedback-canvas').css('cursor', 'default');\n                    var sy = $(document).scrollTop(),\n                        dh = $(window).height();\n                    $('#feedback-helpers').hide();\n                    $('#feedback-highlighter').hide();\n                    $('#feedback-loading-icon').show(); // Show loading icon after the next button is pressed on highlighter\n                    if (!settings.screenshotStroke) {\n                        redraw(ctx, false);\n                    }\n                    html2canvas($('body'), {\n                        onrendered: function(canvas) {\n                            if (!settings.screenshotStroke) {\n                                redraw(ctx);\n                            }\n                            _canvas = $('<canvas id=\"feedback-canvas-tmp\" width=\"' + w + '\" height=\"' + dh + '\"/>').hide().appendTo('body');\n                            _ctx = _canvas.get(0).getContext('2d');\n                            _ctx.drawImage(canvas, 0, sy, w, dh, 0, 0, w, dh);\n                            img = _canvas.get(0).toDataURL();\n                            $(document).scrollTop(sy);\n                            post.img = img;\n                            settings.onScreenshotTaken(post.img);\n                            if (settings.showDescriptionModal) {\n                                $('#feedback-canvas-tmp').remove();\n                                $('#feedback-loading-icon').hide(); // Hide loading icon when the overview modal with screenshot is loaded\n                                $('#feedback-overview').show();\n                                $('#feedback-overview-description-text>textarea').remove();\n                                $('#feedback-overview-screenshot>img').remove();\n                                $('<textarea class=\"form-control\" id=\"feedback-overview-note\">' + $('#feedback-note').val() + '</textarea>').insertAfter('#feedback-overview-description-text h3:eq(0)');\n                                $('#feedback-overview-screenshot').append('<img class=\"feedback-screenshot border-0\" src=\"' + img + '\" />');\n                            } else {\n                                $('#feedback-module').remove();\n                                close();\n                                _canvas.remove();\n                            }\n                        },\n                        proxy: settings.proxy,\n                        letterRendering: settings.letterRendering\n                    });\n                });\n\n                // Skip screenshot creation via html2canvas and only send text feedback\n                // Bharat\n                // Custom added for RemUI\n                $(document).on('click.feedback', '#feedback-skiphighlighter-next', function() {\n                    canDraw = false;\n                    $('#feedback-canvas').css('cursor', 'default');\n                    // Unset any screenshot data\n                    img = '';\n                    post.img = '';\n\n                    $('#feedback-helpers').hide();\n                    $('#feedback-highlighter').hide();\n                    $('#feedback-loading-icon').show(); // Show loading icon after the next button is pressed on highlighter\n                    $('#feedback-canvas-tmp').remove();\n                    $('#feedback-loading-icon').hide(); // Hide loading icon when the overview modal with screenshot is loaded\n                    $('#feedback-overview').show();\n                    $('#feedback-overview-description-text>textarea').remove();\n                    $('#feedback-overview-screenshot>img').remove();\n                    $('<textarea class=\"form-control\" id=\"feedback-overview-note\">' + $('#feedback-note').val() + '</textarea>').insertAfter('#feedback-overview-description-text h3:eq(0)');\n                    $('#feedback-overview-screenshot').append('<img class=\"feedback-screenshot border-0\" src=\"' + M.util.image_url('no_screenshot', 'theme_remui') + '\" />');\n                });\n\n                $(document).on('click.feedback', '#feedback-overview-back', function() {\n                    canDraw = true;\n                    $('#feedback-canvas').css('cursor', 'crosshair');\n                    $('#feedback-overview').hide();\n                    $('#feedback-helpers').show();\n                    $('#feedback-highlighter').show();\n                    $('#feedback-overview-error').hide();\n                    $('#feedback-email-error').hide();\n                });\n\n                $(document).on('keyup.feedback', '#feedback-note-tmp,#feedback-overview-note', function(e) {\n                    var tx;\n                    if (e.target.id === 'feedback-note-tmp') {\n tx = $('#feedback-note-tmp').val();\n} else {\n                        tx = $('#feedback-overview-note').val();\n                        $('#feedback-note-tmp').val(tx);\n                    }\n\n                    $('#feedback-note').val(tx);\n                });\n\n                $(document).on('click.feedback', '#feedback-submit', function() {\n                    canDraw = false;\n\n                    $('#feedback-overview-error').hide();\n                    $('#feedback-email-error').hide();\n\n                    if ($('#feedback-note').val().length > 0 && validateFeedbackEmail($('#feedback_person_email_id_field').val()) !== false) {\n                        $('#feedback-submit-success,#feedback-submit-error').remove();\n                        $('#feedback-overview').hide();\n                        $(\"#feedback-module\").append(settings.tpl.submitLoading);\n\n                        post.img = img;\n                        post.note = $('#feedback-note').val();\n                        post.customer_email = $('#feedback_person_email_id_field').val();\n                        // var data = {feedback: JSON.stringify(post)};\n                        // $.ajax({\n                        // url: settings.ajaxURL,\n                        // dataType: 'json',\n                        // type: 'POST',\n                        // data: data,\n                        // success: function(response) {\n                        // var success = '<div id=\"feedback-submit-success\"><div class=\"feedback-logo\">Feedback</div><p>Thank you for your feedback. We value every piece of feedback we receive.</p>';\n                        // success += '<p><b>Feedback Reference ID : '+response+' </b></p>';\n                        // success += '<button class=\"feedback-close-btn feedback-btn-blue\">OK</button><div class=\"feedback-wizard-close\"></div></div>';\n                        // $('#feedback-module').append(success);\n                        // },\n                        // error: function(){\n                        // $('#feedback-module').append(settings.tpl.submitError);\n                        // }\n                        // });\n\n                        // Bharat\n                        // Replaces the AJAX send function with Moodle Ajax API\n                        var handle_report = Ajax.call([{\n                            methodname: settings.ajaxURL,\n                            args: {\n                                'feedbackdata': JSON.stringify(post)\n                            }\n                        }]);\n                        handle_report[0].done(function(response) {\n\n                            // Check for feedback ID\n                            if (response != false && response > 0) {\n                                var success = '<div id=\"feedback-submit-success\"><div class=\"feedback-logo\">Feedback</div><p>Thank you for your feedback. We value every piece of feedback we receive.</p>';\n                                success += '<p><b>Feedback Reference ID : ' + response + ' </b></p>';\n                                success += '<button class=\"feedback-close-btn feedback-btn-blue\">OK</button><div class=\"feedback-wizard-close\"></div></div>';\n                                $('#feedback-module').append(success);\n                            } else {\n                                $('#feedback-module').append(settings.tpl.submitError);\n                            }\n                        }).fail(function() {\n                            // Do something with the exception\n                            $('#feedback-module').append(settings.tpl.submitError);\n                        });\n                    } else {\n                        if ($('#feedback-note').val().length <= 0) {\n                            $('#feedback-overview-error').show();\n                        }\n                        if (validateFeedbackEmail($('#feedback_person_email_id_field').val()) === false) {\n                            $('#feedback-email-error').show();\n                        }\n                    }\n                });\n            });\n        }\n\n        /**\n         *\n         */\n        function close() {\n            $(document).off('mouseenter.feedback mouseleave.feedback', '.feedback-helper');\n            $(document).off('mouseup.feedback keyup.feedback');\n            $(document).off('mousedown.feedback', '.feedback-setblackout');\n            $(document).off('mousedown.feedback', '.feedback-sethighlight');\n            $(document).off('mousedown.feedback click.feedback', '#feedback-close');\n            $(document).off('mousedown.feedback', '#feedback-canvas');\n            $(document).off('click.feedback', '#feedback-highlighter-next');\n            $(document).off('click.feedback', '#feedback-highlighter-back');\n            $(document).off('click.feedback', '#feedback-welcome-next');\n            $(document).off('click.feedback', '#feedback-overview-back');\n            $(document).off('mouseleave.feedback', 'body');\n            $(document).off('mouseenter.feedback', '.feedback-helper');\n            $(document).off('selectstart.feedback dragstart.feedback');\n            $('#feedback-module').off('click.feedback', '.feedback-wizard-close,.feedback-close-btn');\n            $(document).off('click.feedback', '#feedback-submit');\n\n            if (settings.highlightElement) {\n                $(document).off('click.feedback', '#feedback-canvas');\n                $(document).off('mousemove.feedback', '#feedback-canvas');\n            }\n            $('[data-highlighted=\"true\"]').removeAttr('data-highlight-id').removeAttr('data-highlighted');\n            $('#feedback-module').remove();\n            $('.feedback-btn').show();\n\n            settings.onClose.call(this);\n        }\n\n        /**\n         * @param {String} ctx\n         * @param {String} border\n         */\n        function redraw(ctx, border) {\n            border = typeof border !== 'undefined' ? border : true;\n            ctx.clearRect(0, 0, $('#feedback-canvas').width(), $('#feedback-canvas').height());\n            ctx.fillStyle = 'rgba(102,102,102,0.5)';\n            ctx.fillRect(0, 0, $('#feedback-canvas').width(), $('#feedback-canvas').height());\n            $('.feedback-helper').each(function() {\n                if ($(this).attr('data-type') == 'highlight') {\n if (border) {\n drawlines(ctx, parseInt($(this).css('left'), 10), parseInt($(this).css('top'), 10), $(this).width(), $(this).height());\n}\n}\n            });\n            $('.feedback-helper').each(function() {\n                if ($(this).attr('data-type') == 'highlight') {\n ctx.clearRect(parseInt($(this).css('left'), 10), parseInt($(this).css('top'), 10), $(this).width(), $(this).height());\n}\n            });\n            $('.feedback-helper').each(function() {\n                if ($(this).attr('data-type') == 'blackout') {\n                    ctx.fillStyle = 'rgba(0,0,0,1)';\n                    ctx.fillRect(parseInt($(this).css('left'), 10), parseInt($(this).css('top'), 10), $(this).width(), $(this).height());\n                }\n            });\n        }\n\n        /**\n         * @param {String} ctx\n         * @param {String} x\n         * @param {String} y\n         * @param {String} w\n         * @param {String} h\n         */\n        function drawlines(ctx, x, y, w, h) {\n            ctx.strokeStyle = settings.strokeStyle;\n            ctx.shadowColor = settings.shadowColor;\n            ctx.shadowOffsetX = settings.shadowOffsetX;\n            ctx.shadowOffsetY = settings.shadowOffsetY;\n            ctx.shadowBlur = settings.shadowBlur;\n            ctx.lineJoin = settings.lineJoin;\n            ctx.lineWidth = settings.lineWidth;\n\n            ctx.strokeRect(x, y, w, h);\n\n            ctx.shadowOffsetX = 0;\n            ctx.shadowOffsetY = 0;\n            ctx.shadowBlur = 0;\n            ctx.lineWidth = 1;\n        }\n\n\n        /**\n         * @param {String} sEmail\n         * @returns {boolean} Return value\n         */\n        function validateFeedbackEmail(sEmail) {\n            var reEmail = /^(?:[\\w\\!\\#\\$\\%\\&\\'\\*\\+\\-\\/\\=\\?\\^\\`\\{\\|\\}\\~]+\\.)*[\\w\\!\\#\\$\\%\\&\\'\\*\\+\\-\\/\\=\\?\\^\\`\\{\\|\\}\\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\\-](?!\\.)){0,61}[a-zA-Z0-9]?\\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\\[(?:(?:[01]?\\d{1,2}|2[0-4]\\d|25[0-5])\\.){3}(?:[01]?\\d{1,2}|2[0-4]\\d|25[0-5])\\]))$/;\n\n            if (!sEmail.match(reEmail)) {\n              return false;\n            }\n            return true;\n        }\n\n    };\n});\n"],"names":["define","$","Ajax","feedback","options","settings","extend","ajaxURL","postBrowserInfo","postHTML","postURL","proxy","undefined","letterRendering","initButtonText","strokeStyle","shadowColor","shadowOffsetX","shadowOffsetY","shadowBlur","lineJoin","lineWidth","html2canvasURL","feedbackButton","showDescriptionModal","isDraggable","onScreenshotTaken","tpl","description","highlighter","overview","submitLoading","submitSuccess","submitError","onClose","onTrigger","screenshotStroke","highlightElement","initialBox","supportedBrowser","window","HTMLCanvasElement","isFeedbackButtonNative","_html2canvas","close","document","off","removeAttr","remove","show","call","this","redraw","ctx","border","clearRect","width","height","fillStyle","fillRect","each","attr","drawlines","parseInt","css","x","y","w","h","strokeRect","validateFeedbackEmail","sEmail","match","append","on","hide","getScript","canDraw","img","canvasAttr","e","$d","addClass","drag_h","outerHeight","drag_w","outerWidth","pos_y","offset","top","pageY","pos_x","left","pageX","parents","_top","_left","_bottom","_right","removeClass","preventDefault","getContext","rect","drag","highlight","post","browser","appCodeName","navigator","appName","appVersion","cookieEnabled","onLine","platform","userAgent","plugins","i","push","name","url","URL","html","startX","startY","dtop","dleft","dwidth","dheight","dtype","Date","now","highlighted","tmpHighlighted","hidx","$toHighlight","length","_x","_y","_w","_h","type","val","find","ignore","children","parent","_hidx","keyCode","sy","scrollTop","dh","html2canvas","onrendered","canvas","_canvas","appendTo","_ctx","get","drawImage","toDataURL","insertAfter","M","util","image_url","tx","target","id","note","customer_email","methodname","args","JSON","stringify","done","response","success","fail"],"mappings":"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"}