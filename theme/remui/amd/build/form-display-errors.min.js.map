{"version":3,"sources":["form-display-errors.js"],"names":["define","$","Event","enhance","elementid","element","document","getElementById","on","Events","FORM_FIELD_VALIDATION","event","msg","preventDefault","parent","closest","feedback","find","prop","addClass","data","attr","html","is","show","focus","removeClass","removeAttr","hide"],"mappings":"AAuBA,aAEAA,OAAO,CAAC,SAAU,cAAe,SAAUC,EAAGC,GAC5C,MAAO,CACLC,QAAS,SAAiBC,GACxB,IAAIC,EAAUC,SAASC,eAAeH,GACtCH,EAAEI,GAASG,GAAGN,EAAMO,OAAOC,sBAAuB,SAAUC,EAAOC,GACjED,EAAME,iBACN,IAAIC,EAASb,EAAEI,GAASU,QAAQ,eAC5BC,EAAWF,EAAOG,KAAK,0BAEO,YAA9BhB,EAAEI,GAASa,KAAK,YAA4BJ,EAAOG,KAAK,uBAC1DZ,EAAUS,EAAOG,KAAK,sBAGZ,KAARL,GACFE,EAAOK,SAAS,cAChBL,EAAOM,KAAK,2BAA2B,GACvCnB,EAAEI,GAASc,SAAS,cACpBlB,EAAEI,GAASgB,KAAK,mBAAoBL,EAASK,KAAK,OAClDpB,EAAEI,GAASgB,KAAK,gBAAgB,GAChCL,EAASK,KAAK,WAAY,GAC1BL,EAASM,KAAKV,GAETI,EAASO,GAAG,cACfP,EAASQ,OACTR,EAASS,WAGoC,IAA3CX,EAAOM,KAAK,6BACdN,EAAOY,YAAY,cACnBZ,EAAOM,KAAK,2BAA2B,GACvCnB,EAAEI,GAASqB,YAAY,cACvBzB,EAAEI,GAASsB,WAAW,oBACtB1B,EAAEI,GAASgB,KAAK,gBAAgB,GAChCL,EAASY","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Custom form error event handler to manipulate the bootstrap markup and show\n * nicely styled errors in an mform.\n *\n * @module     theme_remui/form-display-errors\n * @copyright  2016 Damyon Wiese <damyon@moodle.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\"use strict\";\ndefine(['jquery', 'core/event'], function($, Event) {\n    return {\n        enhance: function(elementid) {\n            var element = document.getElementById(elementid);\n            $(element).on(Event.Events.FORM_FIELD_VALIDATION, function(event, msg) {\n                event.preventDefault();\n                var parent = $(element).closest('.form-group');\n                var feedback = parent.find('.form-control-feedback');\n\n                // Sometimes (atto) we have a hidden textarea backed by a real contenteditable div.\n                if (($(element).prop(\"tagName\") == 'TEXTAREA') && parent.find('[contenteditable]')) {\n                    element = parent.find('[contenteditable]');\n                }\n                if (msg !== '') {\n                    parent.addClass('has-danger');\n                    parent.data('client-validation-error', true);\n                    $(element).addClass('is-invalid');\n                    $(element).attr('aria-describedby', feedback.attr('id'));\n                    $(element).attr('aria-invalid', true);\n                    feedback.attr('tabindex', 0);\n                    feedback.html(msg);\n\n                    // Only display and focus when the error was not already visible.\n                    if (!feedback.is(':visible')) {\n                        feedback.show();\n                        feedback.focus();\n                    }\n\n                } else {\n                    if (parent.data('client-validation-error') === true) {\n                        parent.removeClass('has-danger');\n                        parent.data('client-validation-error', false);\n                        $(element).removeClass('is-invalid');\n                        $(element).removeAttr('aria-describedby');\n                        $(element).attr('aria-invalid', false);\n                        feedback.hide();\n                    }\n                }\n            });\n        }\n    };\n});\n"],"file":"form-display-errors.min.js"}