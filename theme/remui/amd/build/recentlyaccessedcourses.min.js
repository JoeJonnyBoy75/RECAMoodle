"use strict";define(["jquery","core/custom_interaction_events","core/notification","core/pubsub","core/paged_content_paging_bar","core/templates","core_course/events","core_course/repository","theme_remui/slick"],function(e,n,i,t,o,s,c,r){var d={BLOCK_CONTAINER:'[data-region="recentlyaccessedcourses"]',CARD_CONTAINER:'[data-region="card-deck"]',COURSE_IS_FAVOURITE:'[data-region="is-favourite"]',CONTENT:'[data-region="view-content"]',EMPTY_MESSAGE:'[data-region="empty-message"]',LOADING_PLACEHOLDER:'[data-region="loading-placeholder"]'},a=!1,u=[],l=function(n){return r.getLastAccessedCourses(n,10).then(function(n){return function(n){var t=e(d.BLOCK_CONTAINER).data("displaycoursecategory"),o=n.map(function(e){return e.showcoursecategory=t,s.render("block_recentlyaccessedcourses/course-card",e)});return e.when.apply(null,o).then(function(){var n=[];return o.forEach(function(t){t.then(function(i){n.push(e(i))}).catch(i.exception)}),n})}(n)})},f=function(n){var i=n.find(d.CONTENT).find(d.CARD_CONTAINER);!function(e){var n=e.find(d.PAGING_BAR);n.css("opacity",0),n.css("visibility","hidden"),n.attr("aria-hidden","true")}(n),i.is(".slick-initialized")&&i.slick("unslick"),i.html(u),e(".block_recentlyaccessedcourses .dashboard-card-deck").css("overflow","unset");var t=["#f39f45","#f95e5f","#2fb0bf","#2fb786","#526069","#46657d"];e(".block_recentlyaccessedcourses .wdm-course-card-body").each(function(n,i){n=n>=t.length?n%t.length:n,e(i).css("background-color",t[n])}),i.slick({dots:!1,arrows:!0,infinite:!1,rtl:"rtl"==e("html").attr("dir"),opacity:0,speed:500,slidesToShow:4,slidesToScroll:4,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:800,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]})},h=function(n){var i=null,o=!1;t.subscribe(c.favourited,function(e){!function(e,n){u.forEach(function(e){e.attr("data-course-id")==n&&e.find(d.COURSE_IS_FAVOURITE).removeClass("hidden")})}(0,e)}),t.subscribe(c.unfavorited,function(e){!function(e,n){u.forEach(function(e){e.attr("data-course-id")==n&&e.find(d.COURSE_IS_FAVOURITE).addClass("hidden")})}(0,e)}),t.subscribe("nav-drawer-toggle-start",function(){if(a&&u.length&&!o){o=!0;var e=0;!function i(){setTimeout(function(){f(n),++e<5&&o&&i()},100)}()}}),t.subscribe("nav-drawer-toggle-end",function(){o=!1}),e(window).on("resize",function(){a&&u.length&&(i||(i=setTimeout(function(){i=null,f(n)},66)))})};return{init:function(n,t){t=e(t),h(t),l(n).then(function(e){a=!0,(u=e).length?(function(e){e.find(d.CONTENT).removeClass("hidden"),e.find(d.EMPTY_MESSAGE).addClass("hidden"),e.find(d.LOADING_PLACEHOLDER).addClass("hidden")}(t),f(t)):function(e){e.find(d.EMPTY_MESSAGE).removeClass("hidden"),e.find(d.LOADING_PLACEHOLDER).addClass("hidden"),e.find(d.CONTENT).addClass("hidden")}(t)}).catch(i.exception)}}});
//# sourceMappingURL=recentlyaccessedcourses.min.js.map
