/**
 * Theme customizer utils js
 * @copyright (c) 2021 WisdmLabs (https://wisdmlabs.com/) <support@wisdmlabs.com>
 * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 * @author    Yogesh Shirsath
 */
define("theme_remui/customizer/utils",["jquery","core/ajax","core/notification","core/modal_factory","core/modal_events","core/fragment","core/modal_save_cancel"],(function($,Ajax,Notification,ModalFactory,ModalEvents,Fragment){var SELECTOR_COMPONENT="theme_remui",SELECTOR_FORMLABEL=".col-form-label",SELECTOR_HMTLEDITOR="customizer_htmleditor",SELECTOR_CONTROLS="#customize-controls",SELECTOR_IFRAME="#customizer-frame",SELECTOR_IFRAME_OVERLAY="#preview-overlay",PROMISES_GET_FILE_URL=function(itemid){return Ajax.call([{methodname:"theme_remui_customizer_get_file_from_setting",args:{itemid:itemid}}])[0]};function getDocument(){return $(SELECTOR_IFRAME)[0].contentDocument}return{putStyle:function(id,content){id+="_style";let bodyDOM=$(getDocument()).find("body");0==$(bodyDOM).find("#"+id).length&&$(bodyDOM).append('<style id="'.concat(id,'"></style>')),$(bodyDOM).find("#"+id).html(content)},getDocument:getDocument,getWindow:function(){return $(SELECTOR_IFRAME)[0].contentWindow},deviceWidth:{tablet:768,mobile:480},getFileURL:function(itemid){return PROMISES_GET_FILE_URL(itemid).fail(Notification.exception)},fileObserver:function(targetNode,callBack){new MutationObserver((function(){$(SELECTOR_CONTROLS).data("unsaved",!0),callBack()})).observe(targetNode,{attributes:!0,attributeFilter:["class"],childList:!1,characterData:!1})},showLoader:function(){$(SELECTOR_IFRAME_OVERLAY).show()},hideLoader:function(){$(SELECTOR_IFRAME_OVERLAY).hide()},htmlEditorExpand:function(name){$("#fitem_id_".concat(name," .btn.fa-expand")).on("click",(function(){let content=$("#id_".concat(name)).val();ModalFactory.create({title:$("#fitem_id_".concat(name," ").concat(SELECTOR_FORMLABEL)).text(),body:Fragment.loadFragment(SELECTOR_COMPONENT,SELECTOR_HMTLEDITOR,1,{content:content}),type:ModalFactory.types.SAVE_CANCEL},$("#create")).done((function(modal){modal.show(),$(modal.getModal()).addClass("modal-lg");var root=modal.getRoot();root.on(ModalEvents.save,(function(event){event.preventDefault(),content=$("#".concat(SELECTOR_COMPONENT,"_").concat(SELECTOR_HMTLEDITOR)).val(),$("#id_".concat(name)).val(content).trigger("change"),$("#id_".concat(name,"editable")).html(content),modal.hide()})),root.on(ModalEvents.hidden,(function(){modal.destroy()}))}))}))}}}));

//# sourceMappingURL=utils.min.js.map