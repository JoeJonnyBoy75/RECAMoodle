/**
 * Theme customizer footer js
 * @copyright (c) 2021 WisdmLabs (https://wisdmlabs.com/) <support@wisdmlabs.com>
 * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 * @author    Yogesh Shirsath
 */
define("theme_remui/customizer/footer",["jquery","core/templates","./utils"],(function($,Templates,Utils){var SELECTOR_BASE="customizer-footer",SELECTOR_BACKGROUNDCOLOR="footer-background-color",SELECTOR_TEXTCOLOR="footer-text-color",SELECTOR_LINKTEXT="footer-link-text",SELECTOR_LINKHOVERTEXT="footer-link-hover-text",SELECTOR_COLUMN="footercolumn",SELECTOR_COLUMNSIZE="footercolumnsize",SELECTOR_COLUMNSHEADING="heading_footer-advance-column",SELECTOR_MENULIST=".footer-menu-list",SELECTOR_SHOWLOGO="footershowlogo",SELECTOR_TERMSANDCONDITIONSSHOW="footertermsandconditionsshow",SELECTOR_TERMSANDCONDITIONS="footertermsandconditions",SELECTOR_PRIVACYPOLICYSHOW="footerprivacypolicyshow",SELECTOR_PRIVACYPOLICY="footerprivacypolicy",SELECTOR_COPYRIGHTSHOW="footercopyrightsshow",SELECTOR_COPYRIGHT="footercopyrights",SELECTOR_SETTINGITEM=".setting-item",SELECTOR_DNONE="d-none",SELECTOR_FOOTER="#page-footer";function resize(event){let drag={};drag.iframeDocument=Utils.getDocument(),drag.column=$(event.target.parentElement),drag.index=$(drag.column).index(),drag.sibling=$(drag.column).next(),drag.parent=$(drag.column).closest(".resizer"),drag.widths=$('[name="'.concat(SELECTOR_COLUMNSIZE,'"]')).val().split(","),$(drag.column).closest(".resizer").addClass("resizing"),"touchstart"===event.type?drag.startX=event.touches[0].clientX:drag.startX=event.clientX,drag.colStartWidth=$(drag.column).outerWidth(),drag.sibStartWidth=$(drag.sibling).outerWidth(),drag.parentWidth=$(drag.parent).outerWidth(),drag.move=evt=>{let clientX;clientX="touchmove"===evt.type?evt.touches[0].clientX:evt.clientX;let newColWidth=drag.colStartWidth+clientX-drag.startX,newSibWidth=drag.sibStartWidth-clientX+drag.startX,percent=function(val,total){return val/total*100},colWidthPercent=parseFloat(percent(newColWidth,drag.parentWidth)).toFixed(1);if(colWidthPercent<15)return;let sibWidthPercent=parseFloat(percent(newSibWidth,drag.parentWidth)).toFixed(1);sibWidthPercent<15||($(drag.column).css("width","".concat(colWidthPercent,"%")).find("label").text("".concat(colWidthPercent,"%")),$(drag.iframeDocument).find("#footer-column-".concat(drag.index+1)).css("flex","0 0 ".concat(colWidthPercent,"%")),drag.widths[drag.index]=colWidthPercent,$(drag.sibling).css("width","".concat(sibWidthPercent,"%")).find("label").text("".concat(sibWidthPercent,"%")),$(drag.iframeDocument).find("#footer-column-".concat(drag.index+2)).css("flex","0 0 ".concat(sibWidthPercent,"%")),drag.widths[drag.index+1]=sibWidthPercent)},drag.stop=()=>{window.removeEventListener("mouseup",drag.stop),window.removeEventListener("touchend",drag.stop),window.removeEventListener("mousemove",drag.move),window.removeEventListener("touchmove",drag.move),$('[name="'.concat(SELECTOR_COLUMNSIZE,'"]')).val(drag.widths.join(",")),$(drag.column).closest(".resizer").removeClass("resizing")},window.addEventListener("mouseup",drag.stop),window.addEventListener("touchend",drag.stop),window.addEventListener("mousemove",drag.move),window.addEventListener("touchmove",drag.move)}function isFooterPrimaryVisible(){let type,content,hasSocial,hasContent,hasMenu,widgetSocials,visible=!1,emptySocial=!0,columns=$('[name="'.concat(SELECTOR_COLUMN,'"]')).val(),iframeDocument=Utils.getDocument(),socials=[];$('\n            [name="facebooksetting"],\n            [name="twittersetting"],\n            [name="linkedinsetting"],\n            [name="youtubesetting"],\n            [name="gplussetting"],\n            [name="instagramsetting"],\n            [name="pinterestsetting"],\n            [name="quorasetting"]\n        ').each((function(){""!=$(this).val()&&(emptySocial=!1),socials[$(this).attr("name").replace("setting","")]=$(this).val()}));for(let i=1;i<=columns;i++){switch(type=$('[name="'.concat(SELECTOR_COLUMN+i,'type"]')).val(),hasSocial=hasContent=hasMenu=!1,type){case"social":if(emptySocial)break;if(widgetSocials=$('[name="'.concat(SELECTOR_COLUMN+i,'social"]')).val(),0==widgetSocials.length)break;widgetSocials.forEach((social=>{""!=socials[social]&&(hasSocial=visible=!0)}));break;case"customhtml":content=$('[name="'.concat(SELECTOR_COLUMN+i,'customhtml"]')).val(),""===$("<div>".concat(content,"</div>")).text().trim()&&-1===content.indexOf("img")||(hasContent=visible=!0);break;case"menu":"[]"!=$('[name="'.concat(SELECTOR_COLUMN+i,'menu"]')).val()&&(hasMenu=visible=!0)}$(iframeDocument).find("#page-footer #footer-column-".concat(i," .custom-html")).toggleClass("invisible",!hasContent),$(iframeDocument).find("#page-footer #footer-column-".concat(i," .social-links")).toggleClass("invisible",!hasSocial),$(iframeDocument).find("#page-footer #footer-column-".concat(i," .footer-menu")).toggleClass("invisible",!hasMenu)}$(iframeDocument).find("#page-footer .footer-primary").toggleClass("d-none",!visible)}function toggleType(index){let type=$('[name="'.concat(SELECTOR_COLUMN+index,'type"]')).val(),iframeDocument=Utils.getDocument(),group=$('[name="'.concat(SELECTOR_COLUMN+index,'type"]')).closest(".heading-content");group.find('[name*="'.concat(SELECTOR_COLUMN,'"][name*="social"]')).closest(SELECTOR_SETTINGITEM).toggleClass(SELECTOR_DNONE,"social"!=type),group.find('[name*="'.concat(SELECTOR_COLUMN,'"][name*="title"]')).closest(SELECTOR_SETTINGITEM).toggleClass(SELECTOR_DNONE,"social"==type),group.find('[name*="'.concat(SELECTOR_COLUMN,'"][name*="customhtml"]')).closest(SELECTOR_SETTINGITEM).toggleClass(SELECTOR_DNONE,"customhtml"!=type),group.find('[name*="'.concat(SELECTOR_COLUMN,'"][name*="menu"]')).closest(SELECTOR_SETTINGITEM).toggleClass(SELECTOR_DNONE,"menu"!=type),$(iframeDocument).find("#footer-column-".concat(index)).removeClass("column-type-customhtml column-type-social column-type-menu").addClass("column-type-"+type)}function titleChange(index){let title=$('[name="'.concat(SELECTOR_COLUMN).concat(index,'title"]')).val();$(Utils.getDocument()).find("#footer-column-".concat(index," .custom-html .card-title")).text(title),$(Utils.getDocument()).find("#footer-column-".concat(index," .footer-menu .card-title")).text(title)}function contentChange(index){let content=$('[name="'.concat(SELECTOR_COLUMN).concat(index,'customhtml"]')).val();$(Utils.getDocument()).find("#footer-column-".concat(index," .custom-html .card-text")).html(content)}function columnSizeChange(){let widths=$('[name="'.concat(SELECTOR_COLUMNSIZE,'"]')).val().split(","),iframeDocument=Utils.getDocument();widths.forEach(((width,index)=>{$(iframeDocument).find("#footer-column-".concat(index+1)).css("flex","0 0 ".concat(width,"%"))}))}function generateColumnSize(){let numberOfColumns=$('[name="'.concat(SELECTOR_COLUMN,'"]')).val(),widths=$('[name="'.concat(SELECTOR_COLUMNSIZE,'"]')).val().split(",").slice(0,numberOfColumns),parent=$('[name="'.concat(SELECTOR_COLUMNSIZE,'"]')).closest(".felement");!function(){let columns=$('[name="'.concat(SELECTOR_COLUMN,'"]')).val(),iframeDocument=Utils.getDocument(),i=1;for(;i<=columns;i++)$("#".concat(SELECTOR_COLUMNSHEADING).concat(i)).show(),$(iframeDocument).find("#footer-column-".concat(i)).removeClass(SELECTOR_DNONE);for(;i<=4;i++)$("#".concat(SELECTOR_COLUMNSHEADING).concat(i)).hide(),$(iframeDocument).find("#footer-column-".concat(i)).addClass(SELECTOR_DNONE)}(),Templates.render("theme_remui/customizer/footer_widget_size",{widget:widths}).done((function(html,js){parent.find(".resizer-wrapper").remove(),Templates.appendNodeContents(parent,html,js)}))}function socialMediaLinks(name,link){name="gplus"==(name=name.replace("setting",""))?"social-google-plus":"social-"+name;let iframeDocument=Utils.getDocument();$(iframeDocument).find("".concat(SELECTOR_FOOTER," .social-links .").concat(name)).attr("href",link).toggleClass(SELECTOR_DNONE,""==link)}function socialSelectionChanges(index){let link,selection=$('[name="'.concat(SELECTOR_COLUMN).concat(index,'social"]')).val(),iframeDocument=Utils.getDocument();$(iframeDocument).find("#footer-column-".concat(index," .social-links a")).addClass("social-disabled"),selection.forEach((name=>{link=$('[name="'.concat(name,'setting"]')).val(),name="gplus"==name?"social-google-plus":"social-"+name,$(iframeDocument).find("#footer-column-".concat(index," .social-links a.").concat(name)).removeClass("social-disabled").attr("href",link).toggleClass(SELECTOR_DNONE,""==link)}))}function menuChange(index){let menu=$('[name="'.concat(SELECTOR_COLUMN).concat(index,'menu"]')).val(),iframeDocument=Utils.getDocument();try{menu=JSON.parse(menu)}catch(exception){menu=[]}$(iframeDocument).find("#footer-column-".concat(index," ").concat(SELECTOR_MENULIST)).html(""),menu.forEach((menuitem=>{$(iframeDocument).find("#footer-column-".concat(index," ").concat(SELECTOR_MENULIST)).append('<a target="_blank" href="'.concat(menuitem.address,'">').concat(menuitem.text,"</a>"))}))}function menuOrientationChange(index){let orientation=$('[name="'.concat(SELECTOR_COLUMN).concat(index,'menuorientation"]')).val(),iframeDocument=Utils.getDocument();$(iframeDocument).find("#footer-column-".concat(index," .footer-menu")).removeClass("menu-vertical menu-horizontal").addClass("menu-"+orientation)}function showLogo(){let iframeDocument=Utils.getDocument(),show=$('[name="'.concat(SELECTOR_SHOWLOGO,'"]')).is(":checked");$(iframeDocument).find(".secondary-footer-logo").toggleClass(SELECTOR_DNONE,!show)}function termsAndConditionsShow(){let iframeDocument=Utils.getDocument(),show=$('[name="'.concat(SELECTOR_TERMSANDCONDITIONSSHOW,'"]')).is(":checked");$(iframeDocument).find(".footer-terms-and-conditions").toggleClass(SELECTOR_DNONE,!show).toggleClass("d-block",show),$('[name="'.concat(SELECTOR_TERMSANDCONDITIONS,'"]')).closest(SELECTOR_SETTINGITEM).toggleClass(SELECTOR_DNONE,!show)}function termsAndConditions(){let iframeDocument=Utils.getDocument(),termsAndConditions=$('[name="'.concat(SELECTOR_TERMSANDCONDITIONS,'"]')).val();$(iframeDocument).find(".footer-terms-and-conditions").attr("href",termsAndConditions)}function privacyPolicyShow(){let iframeDocument=Utils.getDocument(),show=$('[name="'.concat(SELECTOR_PRIVACYPOLICYSHOW,'"]')).is(":checked");$(iframeDocument).find(".footer-privacy-policy").toggleClass(SELECTOR_DNONE,!show).toggleClass("d-block",show),$('[name="'.concat(SELECTOR_PRIVACYPOLICY,'"]')).closest(SELECTOR_SETTINGITEM).toggleClass(SELECTOR_DNONE,!show)}function privacyPolicy(){let iframeDocument=Utils.getDocument(),privacyPolicy=$('[name="'.concat(SELECTOR_PRIVACYPOLICY,'"]')).val();$(iframeDocument).find(".footer-privacy-policy").attr("href",privacyPolicy)}function copyrightShow(){let iframeDocument=Utils.getDocument(),show=$('[name="'.concat(SELECTOR_COPYRIGHTSHOW,'"]')).is(":checked");$(iframeDocument).find(".secondary-footer-copyright").toggleClass(SELECTOR_DNONE,!show),$('[name="'.concat(SELECTOR_COPYRIGHT,'"]')).closest(SELECTOR_SETTINGITEM).toggleClass(SELECTOR_DNONE,!show)}function copyright(){let iframeDocument=Utils.getDocument(),copyright=$('[name="'.concat(SELECTOR_COPYRIGHT,'"]')).val().replaceAll("[site]",$(iframeDocument).find(".secondary-footer-copyright").data("site")).replaceAll("[year]",(new Date).getFullYear());$(iframeDocument).find(".secondary-footer-copyright").html(copyright)}function apply(){!function(){let backgroundColor=$('[name="'.concat(SELECTOR_BACKGROUNDCOLOR,'"]')).spectrum("get").toString(),textColor=$('[name="'.concat(SELECTOR_TEXTCOLOR,'"]')).spectrum("get").toString(),linkText=$('[name="'.concat(SELECTOR_LINKTEXT,'"]')).spectrum("get").toString(),linkHoverText=$('[name="'.concat(SELECTOR_LINKHOVERTEXT,'"]')).spectrum("get").toString(),content="\n            ".concat(SELECTOR_FOOTER,",\n            ").concat(SELECTOR_FOOTER," .h1,\n            ").concat(SELECTOR_FOOTER," .h2,\n            ").concat(SELECTOR_FOOTER," .h3,\n            ").concat(SELECTOR_FOOTER," .h4,\n            ").concat(SELECTOR_FOOTER," .h5,\n            ").concat(SELECTOR_FOOTER," .h6,\n            ").concat(SELECTOR_FOOTER," h1,\n            ").concat(SELECTOR_FOOTER," h2,\n            ").concat(SELECTOR_FOOTER," h3,\n            ").concat(SELECTOR_FOOTER," h4,\n            ").concat(SELECTOR_FOOTER," h5,\n            ").concat(SELECTOR_FOOTER," h6 {\n                background: ").concat(backgroundColor," !important;\n                color: ").concat(textColor," !important;\n            }\n            ").concat(SELECTOR_FOOTER," a {\n                color: ").concat(linkText," !important;\n            }\n            ").concat(SELECTOR_FOOTER," a:hover {\n                color: ").concat(linkHoverText," !important;\n            }\n        ");Utils.putStyle(SELECTOR_BASE,content)}(),generateColumnSize(),columnSizeChange(),showLogo(),termsAndConditionsShow(),termsAndConditions(),privacyPolicyShow(),privacyPolicy(),copyrightShow(),copyright(),isFooterPrimaryVisible();for(let i=1;i<=4;i++)titleChange(i),contentChange(i),toggleType(i),menuChange(i),menuOrientationChange(i),socialSelectionChanges(i);$('\n            [name="facebooksetting"],\n            [name="twittersetting"],\n            [name="linkedinsetting"],\n            [name="youtubesetting"],\n            [name="gplussetting"],\n            [name="instagramsetting"],\n            [name="pinterestsetting"],\n            [name="quorasetting"]\n        ').each((function(){socialMediaLinks($(this).attr("name"),$(this).val())}))}return{init:function(){$('[name="'.concat(SELECTOR_COLUMNSIZE,'"]')).closest(".felement").append("<label>".concat(M.util.get_string("footercolumnsizenote","theme_remui"),"</label>")),generateColumnSize(),$('[name="'.concat(SELECTOR_COLUMNSIZE,'"]')).hide(),$('[name="'.concat(SELECTOR_COLUMNSIZE,'"]')).on("change",(function(){let widths=$('[name="'.concat(SELECTOR_COLUMNSIZE,'"]')).val().split(",");$('[name="'.concat(SELECTOR_COLUMN,'"]')).val()!=widths.length&&$('[name="'.concat(SELECTOR_COLUMN,'"]')).val(widths.length),generateColumnSize(),columnSizeChange()})),$("body").on("mousedown touchstart","#fitem_id_".concat(SELECTOR_COLUMNSIZE," .resizer .resize-x-handle"),resize),$('[name="'.concat(SELECTOR_COLUMN,'"]')).on("change",(function(){let width=[];for(let i=1;i<=$(this).val();i++)width.push((100/$(this).val()).toFixed(0));$('[name="'.concat(SELECTOR_COLUMNSIZE,'"]')).val(width.join(",")),generateColumnSize(),columnSizeChange(),isFooterPrimaryVisible()})),$('\n            [name="'.concat(SELECTOR_BACKGROUNDCOLOR,'"],\n            [name="').concat(SELECTOR_TEXTCOLOR,'"],\n            [name="').concat(SELECTOR_LINKTEXT,'"],\n            [name="').concat(SELECTOR_LINKHOVERTEXT,'"]\n        ')).on("color.changed",apply),$('\n            [name="facebooksetting"],\n            [name="twittersetting"],\n            [name="linkedinsetting"],\n            [name="youtubesetting"],\n            [name="gplussetting"],\n            [name="instagramsetting"],\n            [name="pinterestsetting"],\n            [name="quorasetting"]\n        ').on("input",(function(){socialMediaLinks($(this).attr("name"),$(this).val()),isFooterPrimaryVisible()})),$('[name*="'.concat(SELECTOR_COLUMN,'"][name*="type"]')).on("change",(function(){toggleType($(this).attr("name").replace(SELECTOR_COLUMN,"").replace("type","")),isFooterPrimaryVisible()})),$('[name*="'.concat(SELECTOR_COLUMN,'"][name*="title"]')).on("input",(function(){titleChange($(this).attr("name").replace(SELECTOR_COLUMN,"").replace("title",""))})),$('[name*="'.concat(SELECTOR_COLUMN,'"][name*="customhtml"]')).on("change",(function(){contentChange($(this).attr("name").replace(SELECTOR_COLUMN,"").replace("customhtml","")),isFooterPrimaryVisible()})),$('[name*="'.concat(SELECTOR_COLUMN,'"][name*="menu"]:not([name*="orientation"])')).on("change",(function(){menuChange($(this).attr("name").replace(SELECTOR_COLUMN,"").replace("menu","")),isFooterPrimaryVisible()})),$('[name*="'.concat(SELECTOR_COLUMN,'"][name*="menuorientation"]')).on("change",(function(){menuOrientationChange($(this).attr("name").replace(SELECTOR_COLUMN,"").replace("menuorientation",""))})),$('[name*="'.concat(SELECTOR_COLUMN,'"][name*="social"]')).on("change",(function(){socialSelectionChanges($(this).attr("name").replace(SELECTOR_COLUMN,"").replace("social","")),isFooterPrimaryVisible()})),$('[name="'.concat(SELECTOR_SHOWLOGO,'"]')).on("change",showLogo),$('[name="'.concat(SELECTOR_TERMSANDCONDITIONSSHOW,'"]')).on("change",termsAndConditionsShow),$('[name="'.concat(SELECTOR_TERMSANDCONDITIONS,'"]')).on("input",termsAndConditions),$('[name="'.concat(SELECTOR_PRIVACYPOLICYSHOW,'"]')).on("change",privacyPolicyShow),$('[name="'.concat(SELECTOR_PRIVACYPOLICY,'"]')).on("input",privacyPolicy),$('[name="'.concat(SELECTOR_COPYRIGHTSHOW,'"]')).on("change",copyrightShow),$('[name="'.concat(SELECTOR_COPYRIGHT,'"]')).closest(".felement").append(M.util.get_string("footercopyrightstags","theme_remui")),$('[name="'.concat(SELECTOR_COPYRIGHT,'"]')).on("input",copyright)},apply:apply}}));

//# sourceMappingURL=footer.min.js.map