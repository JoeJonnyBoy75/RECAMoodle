{"version":3,"file":"global-heading.min.js","sources":["../../src/customizer/global-heading.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n/**\n * Theme customizer global-heading js\n * @copyright (c) 2021 WisdmLabs (https://wisdmlabs.com/) <support@wisdmlabs.com>\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n * @author    Yogesh Shirsath\n */\n\ndefine('theme_remui/customizer/global-heading', ['jquery', './utils'], function($, Utils) {\n\n    /**\n     * Headings list\n     */\n    var headings = ['all', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6'];\n\n    /**\n     * Selectors\n     */\n    var SELECTOR = {\n        HEADING: 'typography-heading'\n    };\n\n    // Add heading in selector.\n    headings.forEach(function(heading) {\n        SELECTOR['FONTFAMILY' + heading] = `typography-heading-${heading}-fontfamily`;\n        SELECTOR['FONTSIZE' + heading] = `typography-heading-${heading}-fontsize`;\n        SELECTOR['FONTWEIGHT' + heading] = `typography-heading-${heading}-fontweight`;\n        SELECTOR['TEXTTRANSFORM' + heading] = `typography-heading-${heading}-text-transform`;\n        SELECTOR['LINEHEIGHT' + heading] = `typography-heading-${heading}-lineheight`;\n        SELECTOR['CUSTOMCOLOR' + heading] = `typography-heading-${heading}-custom-color`;\n        SELECTOR['TEXTCOLOR' + heading] = `typography-heading-${heading}-textcolor`;\n    });\n\n    /**\n     * Get site heading content.\n     * @param {string} heading Heading tag\n     * @return {string} site color content\n     */\n    function getContent(heading) {\n\n        let fontSize;\n        let fontFamily = $(`[name='${SELECTOR['FONTFAMILY' + heading]}']`).val();\n        if (fontFamily == '') {\n            fontFamily = 'Inherit';\n        }\n        if (fontFamily.toLowerCase() == 'standard') {\n            fontFamily = 'Roboto';\n        }\n\n        let tag = heading == 'all' ? 'h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6' : `${heading}, .${heading}`;\n        let content = '';\n\n        if (fontFamily.toLowerCase() != 'inherit') {\n            content += `\\n@import url('https://fonts.googleapis.com/css2?family=${fontFamily.replaceAll(' ', '+')}&display=swap');`;\n        }\n\n        content += `\\n\n            ${tag} {\n        `;\n\n        if (fontFamily.toLowerCase() != 'inherit') {\n            content += `\\nfont-family: \"${fontFamily}\",sans-serif`;\n            if (heading != 'all') {\n                content += ' !important';\n            }\n            content += ';';\n        }\n\n        if (heading != 'all') {\n            fontSize = $(`[name='${SELECTOR['FONTSIZE' + heading]}']`).val();\n            content += `\\nfont-size: ${fontSize}rem;`;\n        }\n\n        let fontWeight = $(`[name='${SELECTOR['FONTWEIGHT' + heading]}']`).val();\n        if (fontWeight != 'inherit') {\n            content += `\\nfont-weight: ${fontWeight};`;\n        }\n\n        let textTransform = $(`[name='${SELECTOR['TEXTTRANSFORM' + heading]}']`).val();\n        if (textTransform != 'inherit') {\n            content += `\\ntext-transform: ${textTransform};`;\n        }\n\n        let lineHeight = $(`[name='${SELECTOR['LINEHEIGHT' + heading]}']`).val();\n        if (lineHeight != '') {\n            content += `\\nline-height: ${lineHeight};`;\n        }\n\n        let customcolor = true;\n        if (heading != 'all') {\n            customcolor = $(`[name='${SELECTOR['CUSTOMCOLOR' + heading]}']`).is(':checked');\n            if (customcolor == true) {\n                $(`[name='${SELECTOR['TEXTCOLOR' + heading]}']`).closest('.setting-item').slideDown(100);\n            } else {\n                $(`[name='${SELECTOR['TEXTCOLOR' + heading]}']`).closest('.setting-item').slideUp(100);\n            }\n        }\n        if (customcolor == true) {\n            let textColor = $(`[name='${SELECTOR['TEXTCOLOR' + heading]}']`).val();\n            content += `\\ncolor: ${textColor}`;\n            if (heading != 'all') {\n                content += ' !important';\n            }\n            content += ';';\n        }\n\n        content += `\\n\n            }\n        `;\n\n        // Tablet.\n        if (heading != 'all') {\n            fontSize = $(`[name='${SELECTOR['FONTSIZE' + heading]}-tablet']`).val();\n            if (fontSize != '') {\n                content += `\\n\n                    @media screen and (min-width: ${Utils.deviceWidth.mobile + 1}px)\n                    and (max-width: ${Utils.deviceWidth.tablet}px) {\n                        ${tag} {\n                            font-size: ${fontSize}rem;\n                        }\n                    }\n                `;\n            }\n            // Mobile.\n            fontSize = $(`[name='${SELECTOR['FONTSIZE' + heading]}-mobile']`).val();\n            if (fontSize != '') {\n                content += `\\n\n                    @media screen and (max-width: ${Utils.deviceWidth.mobile}px) {\n                        ${tag} {\n                            font-size: ${fontSize}rem;\n                        }\n                    }\n                `;\n            }\n        }\n        return content;\n    }\n\n    /**\n     * Apply settings.\n     */\n    function apply() {\n        headings.forEach(function(heading) {\n            Utils.putStyle(SELECTOR.HEADING + heading, getContent(heading));\n        });\n    }\n\n    /**\n     * Initialize events.\n     */\n    function init() {\n        var select = [];\n        var color = [];\n        headings.forEach(function(heading) {\n            select.push(`\n                [name='${SELECTOR['FONTFAMILY' + heading]}'],\n                [name='${SELECTOR['FONTSIZE' + heading]}'],\n                [name='${SELECTOR['FONTSIZE' + heading]}-tablet'],\n                [name='${SELECTOR['FONTSIZE' + heading]}-mobile'],\n                [name='${SELECTOR['FONTWEIGHT' + heading]}'],\n                [name='${SELECTOR['TEXTTRANSFORM' + heading]}'],\n                [name='${SELECTOR['LINEHEIGHT' + heading]}'],\n                [name='${SELECTOR['CUSTOMCOLOR' + heading]}']\n            `);\n            color.push(`[name='${SELECTOR['TEXTCOLOR' + heading]}']`);\n        });\n        $(select.join(', ')).on('input', function() {\n            apply();\n        });\n\n        $(color.join(', ')).on('color.changed', function() {\n            apply();\n        });\n    }\n\n    return {\n        init: init,\n        apply: apply\n    };\n});\n"],"names":["define","$","Utils","headings","SELECTOR","HEADING","apply","forEach","heading","putStyle","fontSize","fontFamily","val","toLowerCase","tag","content","replaceAll","fontWeight","textTransform","lineHeight","customcolor","is","closest","slideDown","slideUp","textColor","deviceWidth","mobile","tablet","getContent","init","select","color","push","join","on"],"mappings":";;;;;;AAqBAA,+CAAgD,CAAC,SAAU,YAAY,SAASC,EAAGC,WAK3EC,SAAW,CAAC,MAAO,KAAM,KAAM,KAAM,KAAM,KAAM,MAKjDC,SAAW,CACXC,QAAS,+BA0HJC,QACLH,SAASI,SAAQ,SAASC,SACtBN,MAAMO,SAASL,SAASC,QAAUG,iBAzGtBA,aAEZE,SACAC,WAAaV,mBAAYG,SAAS,aAAeI,gBAAcI,MACjD,IAAdD,aACAA,WAAa,WAEe,YAA5BA,WAAWE,gBACXF,WAAa,cAGbG,IAAiB,OAAXN,QAAmB,iEAA4DA,sBAAaA,SAClGO,QAAU,GAEkB,WAA5BJ,WAAWE,gBACXE,2EAAsEJ,WAAWK,WAAW,IAAK,0BAGrGD,mCACMD,oBAG0B,WAA5BH,WAAWE,gBACXE,mCAA8BJ,2BACf,OAAXH,UACAO,SAAW,eAEfA,SAAW,KAGA,OAAXP,UACAE,SAAWT,mBAAYG,SAAS,WAAaI,gBAAcI,MAC3DG,gCAA2BL,sBAG3BO,WAAahB,mBAAYG,SAAS,aAAeI,gBAAcI,MACjD,WAAdK,aACAF,kCAA6BE,qBAG7BC,cAAgBjB,mBAAYG,SAAS,gBAAkBI,gBAAcI,MACpD,WAAjBM,gBACAH,qCAAgCG,wBAGhCC,WAAalB,mBAAYG,SAAS,aAAeI,gBAAcI,MACjD,IAAdO,aACAJ,kCAA6BI,qBAG7BC,aAAc,KACH,OAAXZ,UACAY,YAAcnB,mBAAYG,SAAS,cAAgBI,gBAAca,GAAG,YACjD,GAAfD,YACAnB,mBAAYG,SAAS,YAAcI,gBAAcc,QAAQ,iBAAiBC,UAAU,KAEpFtB,mBAAYG,SAAS,YAAcI,gBAAcc,QAAQ,iBAAiBE,QAAQ,MAGvE,GAAfJ,YAAqB,KACjBK,UAAYxB,mBAAYG,SAAS,YAAcI,gBAAcI,MACjEG,4BAAuBU,WACR,OAAXjB,UACAO,SAAW,eAEfA,SAAW,WAGfA,uCAKe,OAAXP,UACAE,SAAWT,mBAAYG,SAAS,WAAaI,uBAAqBI,MAClD,IAAZF,WACAK,yEACoCb,MAAMwB,YAAYC,OAAS,sDACzCzB,MAAMwB,YAAYE,iDAC9Bd,0DACeJ,sFAM7BA,SAAWT,mBAAYG,SAAS,WAAaI,uBAAqBI,MAClD,IAAZF,WACAK,yEACoCb,MAAMwB,YAAYC,iDAC5Cb,0DACeJ,uFAM1BK,QAQwCc,CAAWrB,oBAxH9DL,SAASI,SAAQ,SAASC,SACtBJ,SAAS,aAAeI,sCAAiCA,uBACzDJ,SAAS,WAAaI,sCAAiCA,qBACvDJ,SAAS,aAAeI,sCAAiCA,uBACzDJ,SAAS,gBAAkBI,sCAAiCA,2BAC5DJ,SAAS,aAAeI,sCAAiCA,uBACzDJ,SAAS,cAAgBI,sCAAiCA,yBAC1DJ,SAAS,YAAcI,sCAAiCA,yBAiJrD,CACHsB,oBAzBIC,OAAS,GACTC,MAAQ,GACZ7B,SAASI,SAAQ,SAASC,SACtBuB,OAAOE,wCACM7B,SAAS,aAAeI,gDACxBJ,SAAS,WAAaI,gDACtBJ,SAAS,WAAaI,uDACtBJ,SAAS,WAAaI,uDACtBJ,SAAS,aAAeI,gDACxBJ,SAAS,gBAAkBI,gDAC3BJ,SAAS,aAAeI,gDACxBJ,SAAS,cAAgBI,8BAEtCwB,MAAMC,sBAAe7B,SAAS,YAAcI,mBAEhDP,EAAE8B,OAAOG,KAAK,OAAOC,GAAG,SAAS,WAC7B7B,WAGJL,EAAE+B,MAAME,KAAK,OAAOC,GAAG,iBAAiB,WACpC7B,YAMJA,MAAOA"}