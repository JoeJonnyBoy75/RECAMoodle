{"version":3,"file":"footer.min.js","sources":["../../src/customizer/footer.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n/**\n * Theme customizer footer js\n * @copyright (c) 2021 WisdmLabs (https://wisdmlabs.com/) <support@wisdmlabs.com>\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n * @author    Yogesh Shirsath\n */\n\ndefine('theme_remui/customizer/footer', [\n    'jquery',\n    'core/templates',\n    './utils'\n], function(\n    $,\n    Templates,\n    Utils\n) {\n\n    /**\n     * Selectors\n     */\n    var SELECTOR = {\n        BASE: 'customizer-footer',\n        BACKGROUNDCOLOR: 'footer-background-color',\n        TEXTCOLOR: 'footer-text-color',\n        LINKTEXT: 'footer-link-text',\n        LINKHOVERTEXT: 'footer-link-hover-text',\n        COLUMN: 'footercolumn',\n        COLUMNSIZE: 'footercolumnsize',\n        COLUMNSHEADING: 'heading_footer-advance-column',\n        MENULIST: '.footer-menu-list',\n        SHOWLOGO: 'footershowlogo',\n        TERMSANDCONDITIONSSHOW: 'footertermsandconditionsshow',\n        TERMSANDCONDITIONS: 'footertermsandconditions',\n        PRIVACYPOLICYSHOW: 'footerprivacypolicyshow',\n        PRIVACYPOLICY: 'footerprivacypolicy',\n        COPYRIGHTSHOW: 'footercopyrightsshow',\n        COPYRIGHT: 'footercopyrights',\n        SETTINGITEM: '.setting-item',\n        DNONE: 'd-none',\n        FOOTER: '#page-footer'\n    };\n\n    /**\n     * Resize class for widget width.\n     * @param {Event}    event    Resize start event\n     */\n    function resize(event) {\n        let drag = {};\n        drag.iframeDocument = Utils.getDocument();\n        drag.column = $(event.target.parentElement);\n        drag.index = $(drag.column).index();\n        drag.sibling = $(drag.column).next();\n        drag.parent = $(drag.column).closest(`.resizer`);\n        drag.widths = $(`[name=\"${SELECTOR.COLUMNSIZE}\"]`).val().split(',');\n        $(drag.column).closest('.resizer').addClass('resizing');\n\n        if (event.type === \"touchstart\") {\n            drag.startX = event.touches[0].clientX;\n        } else {\n            drag.startX = event.clientX;\n        }\n\n        drag.colStartWidth = $(drag.column).outerWidth();\n        drag.sibStartWidth = $(drag.sibling).outerWidth();\n        drag.parentWidth = $(drag.parent).outerWidth();\n\n        drag.move = (evt) => {\n            let clientX;\n            if (evt.type === \"touchmove\") {\n                clientX = evt.touches[0].clientX;\n            } else {\n                clientX = evt.clientX;\n            }\n            let newColWidth = drag.colStartWidth + clientX - drag.startX;\n            let newSibWidth = drag.sibStartWidth - clientX + drag.startX;\n\n            let percent = function(val, total) {\n                return (val / total) * 100;\n            };\n            let colWidthPercent = parseFloat(percent(newColWidth, drag.parentWidth)).toFixed(1);\n            if (colWidthPercent < 15) {\n                return;\n            }\n            let sibWidthPercent = parseFloat(percent(newSibWidth, drag.parentWidth)).toFixed(1);\n            if (sibWidthPercent < 15) {\n                return;\n            }\n\n            // Main div width.\n            $(drag.column).css(\"width\", `${colWidthPercent}%`).find(\"label\").text(`${colWidthPercent}%`);\n            $(drag.iframeDocument).find(`#footer-column-${drag.index + 1}`).css('flex', `0 0 ${colWidthPercent}%`);\n            drag.widths[drag.index] = colWidthPercent;\n\n\n            // Sibling div width.\n            $(drag.sibling).css(\"width\", `${sibWidthPercent}%`).find(\"label\").text(`${sibWidthPercent}%`);\n            $(drag.iframeDocument).find(`#footer-column-${drag.index + 2}`).css('flex', `0 0 ${sibWidthPercent}%`);\n            drag.widths[drag.index + 1] = sibWidthPercent;\n        };\n\n        drag.stop = () => {\n            window.removeEventListener(\"mouseup\", drag.stop);\n            window.removeEventListener(\"touchend\", drag.stop);\n            window.removeEventListener(\"mousemove\", drag.move);\n            window.removeEventListener(\"touchmove\", drag.move);\n            $(`[name=\"${SELECTOR.COLUMNSIZE}\"]`).val(drag.widths.join(','));\n            $(drag.column).closest('.resizer').removeClass('resizing');\n        };\n\n        window.addEventListener(\"mouseup\", drag.stop);\n        window.addEventListener(\"touchend\", drag.stop);\n        window.addEventListener(\"mousemove\", drag.move);\n        window.addEventListener(\"touchmove\", drag.move);\n    }\n\n    /**\n     * Toggle footer primary is empty.\n     */\n    function isFooterPrimaryVisible() {\n        let type;\n        let content;\n        let hasSocial;\n        let hasContent;\n        let hasMenu;\n        let widgetSocials;\n        let visible = false;\n        let emptySocial = true;\n        let stripHtml = html => $(`<div>${html}</div>`).text().trim();\n        let columns = $(`[name=\"${SELECTOR.COLUMN}\"]`).val();\n        let iframeDocument = Utils.getDocument();\n        let socials = [];\n\n        // Check if any social media link is visible.\n        $(`\n            [name=\"facebooksetting\"],\n            [name=\"twittersetting\"],\n            [name=\"linkedinsetting\"],\n            [name=\"youtubesetting\"],\n            [name=\"gplussetting\"],\n            [name=\"instagramsetting\"],\n            [name=\"pinterestsetting\"],\n            [name=\"quorasetting\"]\n        `).each(function() {\n            if ($(this).val() != '') {\n                emptySocial = false;\n            }\n            socials[$(this).attr('name').replace('setting', '')] = $(this).val();\n        });\n        for (let i = 1; i <= columns; i++) {\n            type = $(`[name=\"${SELECTOR.COLUMN + i}type\"]`).val();\n            hasSocial = hasContent = hasMenu = false;\n            switch (type) {\n                case 'social':\n                    if (emptySocial) {\n                        break;\n                    }\n                    widgetSocials = $(`[name=\"${SELECTOR.COLUMN + i}social\"]`).val();\n                    if (widgetSocials.length == 0) {\n                        break;\n                    }\n                    // eslint-disable-next-line no-loop-func\n                    widgetSocials.forEach((social) => {\n                        if (socials[social] != '') {\n                            hasSocial = visible = true;\n                        }\n                    });\n                    break;\n                case 'customhtml':\n                    content = $(`[name=\"${SELECTOR.COLUMN + i}customhtml\"]`).val();\n                    if (stripHtml(content) !== '' || content.indexOf('img') !== -1) {\n                        hasContent = visible = true;\n                    }\n                    break;\n                case 'menu':\n                    if ($(`[name=\"${SELECTOR.COLUMN + i}menu\"]`).val() != '[]') {\n                        hasMenu = visible = true;\n                    }\n                    break;\n            }\n            $(iframeDocument).find(`#page-footer #footer-column-${i} .custom-html`).toggleClass('invisible', !hasContent);\n            $(iframeDocument).find(`#page-footer #footer-column-${i} .social-links`).toggleClass('invisible', !hasSocial);\n            $(iframeDocument).find(`#page-footer #footer-column-${i} .footer-menu`).toggleClass('invisible', !hasMenu);\n        }\n        $(iframeDocument).find(`#page-footer .footer-primary`).toggleClass('d-none', !visible);\n    }\n\n    /**\n     * Toggle number of columns\n     */\n    function toggleColumns() {\n        let columns = $(`[name=\"${SELECTOR.COLUMN}\"]`).val();\n        let iframeDocument = Utils.getDocument();\n        let i = 1;\n        for (; i <= columns; i++) {\n            $(`#${SELECTOR.COLUMNSHEADING}${i}`).show();\n            $(iframeDocument).find(`#footer-column-${i}`).removeClass(SELECTOR.DNONE);\n        }\n        for (; i <= 4; i++) {\n            $(`#${SELECTOR.COLUMNSHEADING}${i}`).hide();\n            $(iframeDocument).find(`#footer-column-${i}`).addClass(SELECTOR.DNONE);\n        }\n    }\n\n    /**\n     * Toggle column type.\n     * @param {Integer} index Footer column index\n     */\n    function toggleType(index) {\n        let type = $(`[name=\"${SELECTOR.COLUMN + index}type\"]`).val();\n        let iframeDocument = Utils.getDocument();\n        let group = $(`[name=\"${SELECTOR.COLUMN + index}type\"]`).closest('.heading-content');\n\n        // Show social icon selection when type is social.\n        group.find(`[name*=\"${SELECTOR.COLUMN}\"][name*=\"social\"]`).closest(SELECTOR.SETTINGITEM)\n        .toggleClass(SELECTOR.DNONE, type != 'social');\n\n        // Show title when type is not social.\n        group.find(`[name*=\"${SELECTOR.COLUMN}\"][name*=\"title\"]`).closest(SELECTOR.SETTINGITEM)\n        .toggleClass(SELECTOR.DNONE, type == 'social');\n\n        // Show content when type is customhtml\n        group.find(`[name*=\"${SELECTOR.COLUMN}\"][name*=\"customhtml\"]`).closest(SELECTOR.SETTINGITEM)\n        .toggleClass(SELECTOR.DNONE, type != 'customhtml');\n\n        // Show menu and orientation when type is menu.\n        group.find(`[name*=\"${SELECTOR.COLUMN}\"][name*=\"menu\"]`).closest(SELECTOR.SETTINGITEM)\n        .toggleClass(SELECTOR.DNONE, type != 'menu');\n\n        // Change column type.\n        $(iframeDocument).find(`#footer-column-${index}`)\n        .removeClass('column-type-customhtml column-type-social column-type-menu')\n        .addClass('column-type-' + type);\n    }\n\n    /**\n     * Update title in iframe.\n     * @param {Integer} index Footer column index\n     */\n    function titleChange(index) {\n        let title = $(`[name=\"${SELECTOR.COLUMN}${index}title\"]`).val();\n        $(Utils.getDocument()).find(`#footer-column-${index} .custom-html .card-title`).text(title);\n        $(Utils.getDocument()).find(`#footer-column-${index} .footer-menu .card-title`).text(title);\n    }\n\n    /**\n     * Update title in iframe.\n     * @param {Integer} index Footer column index\n     */\n    function contentChange(index) {\n        let content = $(`[name=\"${SELECTOR.COLUMN}${index}customhtml\"]`).val();\n        $(Utils.getDocument()).find(`#footer-column-${index} .custom-html .card-text`).html(content);\n    }\n\n    /**\n     * Apply footer colors.\n     */\n    function footerColors() {\n        let backgroundColor = $(`[name=\"${SELECTOR.BACKGROUNDCOLOR}\"]`).spectrum('get').toString();\n        let textColor = $(`[name=\"${SELECTOR.TEXTCOLOR}\"]`).spectrum('get').toString();\n        let linkText = $(`[name=\"${SELECTOR.LINKTEXT}\"]`).spectrum('get').toString();\n        let linkHoverText = $(`[name=\"${SELECTOR.LINKHOVERTEXT}\"]`).spectrum('get').toString();\n\n        let content = `\n            ${SELECTOR.FOOTER},\n            ${SELECTOR.FOOTER} .h1,\n            ${SELECTOR.FOOTER} .h2,\n            ${SELECTOR.FOOTER} .h3,\n            ${SELECTOR.FOOTER} .h4,\n            ${SELECTOR.FOOTER} .h5,\n            ${SELECTOR.FOOTER} .h6,\n            ${SELECTOR.FOOTER} h1,\n            ${SELECTOR.FOOTER} h2,\n            ${SELECTOR.FOOTER} h3,\n            ${SELECTOR.FOOTER} h4,\n            ${SELECTOR.FOOTER} h5,\n            ${SELECTOR.FOOTER} h6 {\n                background: ${backgroundColor} !important;\n                color: ${textColor} !important;\n            }\n            ${SELECTOR.FOOTER} a {\n                color: ${linkText} !important;\n            }\n            ${SELECTOR.FOOTER} a:hover {\n                color: ${linkHoverText} !important;\n            }\n        `;\n\n        Utils.putStyle(SELECTOR.BASE, content);\n    }\n\n    /**\n     * Observe column size change.\n     */\n    function columnSizeChange() {\n        let widths = $(`[name=\"${SELECTOR.COLUMNSIZE}\"]`).val().split(',');\n        let iframeDocument = Utils.getDocument();\n        widths.forEach((width, index) => {\n            $(iframeDocument).find(`#footer-column-${index + 1}`).css('flex', `0 0 ${width}%`);\n        });\n    }\n\n    /**\n     * Generate column size elements.\n     */\n    function generateColumnSize() {\n        let numberOfColumns = $(`[name=\"${SELECTOR.COLUMN}\"]`).val();\n        let widths = $(`[name=\"${SELECTOR.COLUMNSIZE}\"]`).val().split(',').slice(0, numberOfColumns);\n        let parent = $(`[name=\"${SELECTOR.COLUMNSIZE}\"]`).closest('.felement');\n        toggleColumns();\n        Templates.render('theme_remui/customizer/footer_widget_size', {\n            widget: widths\n        }).done(function(html, js) {\n            parent.find('.resizer-wrapper').remove();\n            Templates.appendNodeContents(parent, html, js);\n        });\n    }\n\n    /**\n     * Social media link change\n     * @param {String} name name of social setting\n     * @param {String} link link of social setting\n     */\n    function socialMediaLinks(name, link) {\n        name = name.replace('setting', '');\n        name = name == 'gplus' ? 'social-google-plus' : 'social-' + name;\n        let iframeDocument = Utils.getDocument();\n        $(iframeDocument).find(`${SELECTOR.FOOTER} .social-links .${name}`).attr('href', link)\n        .toggleClass(SELECTOR.DNONE, link == '');\n    }\n\n    /**\n     * Toggle social icons based on selections.\n     * @param {Integer} index Footer column index\n     */\n    function socialSelectionChanges(index) {\n        let selection = $(`[name=\"${SELECTOR.COLUMN}${index}social\"]`).val();\n        let iframeDocument = Utils.getDocument();\n        let link;\n        $(iframeDocument).find(`#footer-column-${index} .social-links a`).addClass('social-disabled');\n        selection.forEach(name => {\n            link = $(`[name=\"${name}setting\"]`).val();\n            name = name == 'gplus' ? 'social-google-plus' : 'social-' + name;\n            $(iframeDocument).find(`#footer-column-${index} .social-links a.${name}`)\n            .removeClass('social-disabled')\n            .attr('href', link).toggleClass(SELECTOR.DNONE, link == '');\n        });\n    }\n\n    /**\n     * Update changed menu to column\n     * @param {Integer} index Footer column index\n     */\n    function menuChange(index) {\n        let menu = $(`[name=\"${SELECTOR.COLUMN}${index}menu\"]`).val();\n        let iframeDocument = Utils.getDocument();\n        try {\n            menu = JSON.parse(menu);\n        } catch (exception) {\n            menu = [];\n        }\n        $(iframeDocument).find(`#footer-column-${index} ${SELECTOR.MENULIST}`).html('');\n        menu.forEach(menuitem => {\n            $(iframeDocument).find(`#footer-column-${index} ${SELECTOR.MENULIST}`)\n            .append(`<a target=\"_blank\" href=\"${menuitem.address}\">${menuitem.text}</a>`);\n        });\n    }\n\n    /**\n     * Update menu orientation.\n     * @param {Integer} index Footer column index\n     */\n    function menuOrientationChange(index) {\n        let orientation = $(`[name=\"${SELECTOR.COLUMN}${index}menuorientation\"]`).val();\n        let iframeDocument = Utils.getDocument();\n        $(iframeDocument).find(`#footer-column-${index} .footer-menu`)\n        .removeClass('menu-vertical menu-horizontal')\n        .addClass('menu-' + orientation);\n    }\n\n    /**\n     * Show logo in secondary footer.\n     */\n    function showLogo() {\n        let iframeDocument = Utils.getDocument();\n        let show = $(`[name=\"${SELECTOR.SHOWLOGO}\"]`).is(':checked');\n        $(iframeDocument).find('.secondary-footer-logo').toggleClass(SELECTOR.DNONE, !show);\n    }\n\n    /**\n     * Show social links in the secondary footer.\n     */\n    // function secondarySocial() {\n    //     let iframeDocument = Utils.getDocument();\n    //     let show = $(`[name=\"${SELECTOR.SECONDARYSOCIAL}\"]`).is(':checked');\n    //     $(iframeDocument).find('.secondary-footer-social').toggleClass(SELECTOR.DNONE, !show);\n    // }\n\n    /**\n     * Show terms and conditions link in the footer.\n     */\n    function termsAndConditionsShow() {\n        let iframeDocument = Utils.getDocument();\n        let show = $(`[name=\"${SELECTOR.TERMSANDCONDITIONSSHOW}\"]`).is(':checked');\n        $(iframeDocument).find('.footer-terms-and-conditions').toggleClass(SELECTOR.DNONE, !show).toggleClass('d-block', show);\n        $(`[name=\"${SELECTOR.TERMSANDCONDITIONS}\"]`).closest(SELECTOR.SETTINGITEM).toggleClass(SELECTOR.DNONE, !show);\n    }\n\n    /**\n     * Handler terms and conditions.\n     */\n    function termsAndConditions() {\n        let iframeDocument = Utils.getDocument();\n        let termsAndConditions = $(`[name=\"${SELECTOR.TERMSANDCONDITIONS}\"]`).val();\n        $(iframeDocument).find('.footer-terms-and-conditions').attr('href', termsAndConditions);\n    }\n\n    /**\n     * Show privacy policy link in the footer.\n     */\n    function privacyPolicyShow() {\n        let iframeDocument = Utils.getDocument();\n        let show = $(`[name=\"${SELECTOR.PRIVACYPOLICYSHOW}\"]`).is(':checked');\n        $(iframeDocument).find('.footer-privacy-policy').toggleClass(SELECTOR.DNONE, !show).toggleClass('d-block', show);\n        $(`[name=\"${SELECTOR.PRIVACYPOLICY}\"]`).closest(SELECTOR.SETTINGITEM).toggleClass(SELECTOR.DNONE, !show);\n    }\n\n    /**\n     * Handle privacy policy link.\n     */\n    function privacyPolicy() {\n        let iframeDocument = Utils.getDocument();\n        let privacyPolicy = $(`[name=\"${SELECTOR.PRIVACYPOLICY}\"]`).val();\n        $(iframeDocument).find('.footer-privacy-policy').attr('href', privacyPolicy);\n    }\n\n    /**\n     * Show copyright in the footer.\n     */\n    function copyrightShow() {\n        let iframeDocument = Utils.getDocument();\n        let show = $(`[name=\"${SELECTOR.COPYRIGHTSHOW}\"]`).is(':checked');\n        $(iframeDocument).find('.secondary-footer-copyright').toggleClass(SELECTOR.DNONE, !show);\n        $(`[name=\"${SELECTOR.COPYRIGHT}\"]`).closest(SELECTOR.SETTINGITEM).toggleClass(SELECTOR.DNONE, !show);\n    }\n\n    /**\n     * Handler copyright content.\n     */\n    function copyright() {\n        let iframeDocument = Utils.getDocument();\n        let copyright = $(`[name=\"${SELECTOR.COPYRIGHT}\"]`).val()\n        .replaceAll('[site]', $(iframeDocument).find('.secondary-footer-copyright').data('site'))\n        .replaceAll('[year]', (new Date()).getFullYear());\n        $(iframeDocument).find('.secondary-footer-copyright').html(copyright);\n    }\n\n    /**\n     * Apply settings.\n     */\n    function apply() {\n        footerColors();\n        generateColumnSize();\n        columnSizeChange();\n        showLogo();\n        // secondarySocial();\n        termsAndConditionsShow();\n        termsAndConditions();\n        privacyPolicyShow();\n        privacyPolicy();\n        copyrightShow();\n        copyright();\n        isFooterPrimaryVisible();\n        for (let i = 1; i <= 4; i++) {\n            titleChange(i);\n            contentChange(i);\n            toggleType(i);\n            menuChange(i);\n            menuOrientationChange(i);\n            socialSelectionChanges(i);\n        }\n        $(`\n            [name=\"facebooksetting\"],\n            [name=\"twittersetting\"],\n            [name=\"linkedinsetting\"],\n            [name=\"youtubesetting\"],\n            [name=\"gplussetting\"],\n            [name=\"instagramsetting\"],\n            [name=\"pinterestsetting\"],\n            [name=\"quorasetting\"]\n        `).each(function() {\n            socialMediaLinks($(this).attr('name'), $(this).val());\n        });\n    }\n\n    /**\n     * Initialize\n     */\n    function init() {\n        // Advance footer column size observe\n        $(`[name=\"${SELECTOR.COLUMNSIZE}\"]`).closest('.felement')\n        .append(`<label>${M.util.get_string('footercolumnsizenote', 'theme_remui')}</label>`);\n        generateColumnSize();\n        $(`[name=\"${SELECTOR.COLUMNSIZE}\"]`).hide();\n        $(`[name=\"${SELECTOR.COLUMNSIZE}\"]`).on('change', function() {\n            let widths = $(`[name=\"${SELECTOR.COLUMNSIZE}\"]`).val().split(',');\n            let widget = $(`[name=\"${SELECTOR.COLUMN}\"]`).val();\n\n            // Validating wigets count.\n            if (widget != widths.length) {\n                $(`[name=\"${SELECTOR.COLUMN}\"]`).val(widths.length);\n            }\n            generateColumnSize();\n            columnSizeChange();\n        });\n\n        // Observer column size change using on drag and touch.\n        $('body').on('mousedown touchstart', `#fitem_id_${SELECTOR.COLUMNSIZE} .resizer .resize-x-handle`, resize);\n\n        // Listen number of columns toggler.\n        $(`[name=\"${SELECTOR.COLUMN}\"]`).on('change', function() {\n            let width = [];\n            for (let i = 1; i <= $(this).val(); i++) {\n                width.push((100 / $(this).val()).toFixed(0));\n            }\n            $(`[name=\"${SELECTOR.COLUMNSIZE}\"]`).val(width.join(','));\n            generateColumnSize();\n            columnSizeChange();\n            isFooterPrimaryVisible();\n        });\n\n\n        // Listen footer colors.\n        $(`\n            [name=\"${SELECTOR.BACKGROUNDCOLOR}\"],\n            [name=\"${SELECTOR.TEXTCOLOR}\"],\n            [name=\"${SELECTOR.LINKTEXT}\"],\n            [name=\"${SELECTOR.LINKHOVERTEXT}\"]\n        `).on('color.changed', apply);\n\n        // Observe social media links.\n        $(`\n            [name=\"facebooksetting\"],\n            [name=\"twittersetting\"],\n            [name=\"linkedinsetting\"],\n            [name=\"youtubesetting\"],\n            [name=\"gplussetting\"],\n            [name=\"instagramsetting\"],\n            [name=\"pinterestsetting\"],\n            [name=\"quorasetting\"]\n        `).on('input', function() {\n            socialMediaLinks($(this).attr('name'), $(this).val());\n            isFooterPrimaryVisible();\n        });\n\n        // Listen column type.\n        $(`[name*=\"${SELECTOR.COLUMN}\"][name*=\"type\"]`).on('change', function() {\n            let index = $(this).attr('name').replace(SELECTOR.COLUMN, '').replace('type', '');\n            toggleType(index);\n            isFooterPrimaryVisible();\n        });\n\n        // Listen title change.\n        $(`[name*=\"${SELECTOR.COLUMN}\"][name*=\"title\"]`).on('input', function() {\n            let index = $(this).attr('name').replace(SELECTOR.COLUMN, '').replace('title', '');\n            titleChange(index);\n        });\n\n        // Listen content change.\n        $(`[name*=\"${SELECTOR.COLUMN}\"][name*=\"customhtml\"]`).on('change', function() {\n            let index = $(this).attr('name').replace(SELECTOR.COLUMN, '').replace('customhtml', '');\n            contentChange(index);\n            isFooterPrimaryVisible();\n        });\n\n        // Listen menu change.\n        $(`[name*=\"${SELECTOR.COLUMN}\"][name*=\"menu\"]:not([name*=\"orientation\"])`).on('change', function() {\n            let index = $(this).attr('name').replace(SELECTOR.COLUMN, '').replace('menu', '');\n            menuChange(index);\n            isFooterPrimaryVisible();\n        });\n\n        // Listen menu orientation change.\n        $(`[name*=\"${SELECTOR.COLUMN}\"][name*=\"menuorientation\"]`).on('change', function() {\n            let index = $(this).attr('name').replace(SELECTOR.COLUMN, '').replace('menuorientation', '');\n            menuOrientationChange(index);\n        });\n\n        // Listen social selection change.\n        $(`[name*=\"${SELECTOR.COLUMN}\"][name*=\"social\"]`).on('change', function() {\n            let index = $(this).attr('name').replace(SELECTOR.COLUMN, '').replace('social', '');\n            socialSelectionChanges(index);\n            isFooterPrimaryVisible();\n        });\n\n        // Secondary footer.\n        // Show logo in the footer.\n        $(`[name=\"${SELECTOR.SHOWLOGO}\"]`).on('change', showLogo);\n\n        // Show secondary social icons in the footer.\n        // $(`[name=\"${SELECTOR.SECONDARYSOCIAL}\"]`).on('change', secondarySocial);\n\n        // Show terms ans condition link in the footer.\n        $(`[name=\"${SELECTOR.TERMSANDCONDITIONSSHOW}\"]`).on('change', termsAndConditionsShow);\n\n        // Handle terms and condition link change.\n        $(`[name=\"${SELECTOR.TERMSANDCONDITIONS}\"]`).on('input', termsAndConditions);\n\n        // Show privacy policy link in the footer.\n        $(`[name=\"${SELECTOR.PRIVACYPOLICYSHOW}\"]`).on('change', privacyPolicyShow);\n\n        // Handle privacy policy link change.\n        $(`[name=\"${SELECTOR.PRIVACYPOLICY}\"]`).on('input', privacyPolicy);\n\n        // Show copyright in the footer.\n        $(`[name=\"${SELECTOR.COPYRIGHTSHOW}\"]`).on('change', copyrightShow);\n\n        // Handle copyright content change.\n        $(`[name=\"${SELECTOR.COPYRIGHT}\"]`).closest('.felement').append(M.util.get_string('footercopyrightstags', 'theme_remui'));\n        $(`[name=\"${SELECTOR.COPYRIGHT}\"]`).on('input', copyright);\n\n\n    }\n    return {\n        init: init,\n        apply: apply\n    };\n});\n"],"names":["define","$","Templates","Utils","SELECTOR","resize","event","drag","iframeDocument","getDocument","column","target","parentElement","index","sibling","next","parent","closest","widths","val","split","addClass","type","startX","touches","clientX","colStartWidth","outerWidth","sibStartWidth","parentWidth","move","evt","newColWidth","newSibWidth","percent","total","colWidthPercent","parseFloat","toFixed","sibWidthPercent","css","find","text","stop","window","removeEventListener","join","removeClass","addEventListener","isFooterPrimaryVisible","content","hasSocial","hasContent","hasMenu","widgetSocials","visible","emptySocial","columns","socials","each","this","attr","replace","i","length","forEach","social","trim","indexOf","toggleClass","toggleType","group","titleChange","title","contentChange","html","columnSizeChange","width","generateColumnSize","numberOfColumns","slice","show","hide","toggleColumns","render","widget","done","js","remove","appendNodeContents","socialMediaLinks","name","link","socialSelectionChanges","selection","menuChange","menu","JSON","parse","exception","menuitem","append","address","menuOrientationChange","orientation","showLogo","is","termsAndConditionsShow","termsAndConditions","privacyPolicyShow","privacyPolicy","copyrightShow","copyright","replaceAll","data","Date","getFullYear","apply","backgroundColor","spectrum","toString","textColor","linkText","linkHoverText","putStyle","footerColors","init","M","util","get_string","on","push"],"mappings":"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"}