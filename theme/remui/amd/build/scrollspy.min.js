"use strict";function _typeof2(t){return(_typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}define(["exports","jquery","./util"],function(t,e,o){Object.defineProperty(t,"__esModule",{value:!0});var n=i(e),r=i(o);function i(t){return t&&t.__esModule?t:{default:t}}function s(t){return(s="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(t){return _typeof2(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":_typeof2(t)})(t)}function l(){return(l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t}).apply(this,arguments)}function a(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var c=function(t){var e="scrollspy",o=".".concat("bs.scrollspy"),n=t.fn[e],i={offset:10,method:"auto",target:""},c={offset:"number",method:"string",target:"(string|element)"},f={ACTIVATE:"activate".concat(o),SCROLL:"scroll".concat(o),LOAD_DATA_API:"load".concat(o).concat(".data-api")},u="dropdown-item",h="active",_={DATA_SPY:'[data-spy="scroll"]',ACTIVE:".active",NAV_LIST_GROUP:".nav, .list-group",NAV_LINKS:".nav-link",NAV_ITEMS:".nav-item",LIST_ITEMS:".list-group-item",DROPDOWN:".dropdown",DROPDOWN_ITEMS:".dropdown-item",DROPDOWN_TOGGLE:".dropdown-toggle"},g="offset",y="position",d=function(){function n(e,o){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this._element=e,this._scrollElement="BODY"===e.tagName?window:e,this._config=this._getConfig(o),this._selector="".concat(this._config.target," ").concat(_.NAV_LINKS,",")+"".concat(this._config.target," ").concat(_.LIST_ITEMS,",")+"".concat(this._config.target," ").concat(_.DROPDOWN_ITEMS),this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,t(this._scrollElement).on(f.SCROLL,function(t){return r._process(t)}),this.refresh(),this._process()}var d,p,m;return d=n,m=[{key:"_jQueryInterface",value:function(e){return this.each(function(){var o=t(this).data("bs.scrollspy"),r="object"===s(e)&&e;if(o||(o=new n(this,r),t(this).data("bs.scrollspy",o)),"string"==typeof e){if(void 0===o[e])throw new TypeError('No method named "'.concat(e,'"'));o[e]()}})}},{key:"VERSION",get:function(){return"4.0.0"}},{key:"Default",get:function(){return i}}],(p=[{key:"refresh",value:function(){var e=this,o=this._scrollElement===this._scrollElement.window?g:y,n="auto"===this._config.method?o:this._config.method,i=n===y?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),t.makeArray(t(this._selector)).map(function(e){var o,s=r.default.getSelectorFromElement(e);if(s&&(o=t(s)[0]),o){var l=o.getBoundingClientRect();if(l.width||l.height)return[t(o)[n]().top+i,s]}return null}).filter(function(t){return t}).sort(function(t,e){return t[0]-e[0]}).forEach(function(t){e._offsets.push(t[0]),e._targets.push(t[1])})}},{key:"dispose",value:function(){t.removeData(this._element,"bs.scrollspy"),t(this._scrollElement).off(o),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null}},{key:"_getConfig",value:function(o){if("string"!=typeof(o=l({},i,o)).target){var n=t(o.target).attr("id");n||(n=r.default.getUID(e),t(o.target).attr("id",n)),o.target="#".concat(n)}return r.default.typeCheckConfig(e,o,c),o}},{key:"_getScrollTop",value:function(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop}},{key:"_getScrollHeight",value:function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}},{key:"_getOffsetHeight",value:function(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height}},{key:"_process",value:function(){var t=this._getScrollTop()+this._config.offset,e=this._getScrollHeight(),o=this._config.offset+e-this._getOffsetHeight();if(this._scrollHeight!==e&&this.refresh(),t>=o){var n=this._targets[this._targets.length-1];this._activeTarget!==n&&this._activate(n)}else{if(this._activeTarget&&t<this._offsets[0]&&this._offsets[0]>0)return this._activeTarget=null,void this._clear();for(var r=this._offsets.length;r--;){this._activeTarget!==this._targets[r]&&t>=this._offsets[r]&&(void 0===this._offsets[r+1]||t<this._offsets[r+1])&&this._activate(this._targets[r])}}}},{key:"_activate",value:function(e){this._activeTarget=e,this._clear();var o=this._selector.split(",");o=o.map(function(t){return"".concat(t,'[data-target="').concat(e,'"],')+"".concat(t,'[href="').concat(e,'"]')});var n=t(o.join(","));n.hasClass(u)?(n.closest(_.DROPDOWN).find(_.DROPDOWN_TOGGLE).addClass(h),n.addClass(h)):(n.addClass(h),n.parents(_.NAV_LIST_GROUP).prev("".concat(_.NAV_LINKS,", ").concat(_.LIST_ITEMS)).addClass(h),n.parents(_.NAV_LIST_GROUP).prev(_.NAV_ITEMS).children(_.NAV_LINKS).addClass(h)),t(this._scrollElement).trigger(f.ACTIVATE,{relatedTarget:e})}},{key:"_clear",value:function(){t(this._selector).filter(_.ACTIVE).removeClass(h)}}])&&a(d.prototype,p),m&&a(d,m),n}();return t(window).on(f.LOAD_DATA_API,function(){for(var e=t.makeArray(t(_.DATA_SPY)),o=e.length;o--;){var n=t(e[o]);d._jQueryInterface.call(n,n.data())}}),t.fn[e]=d._jQueryInterface,t.fn[e].Constructor=d,t.fn[e].noConflict=function(){return t.fn[e]=n,d._jQueryInterface},d}(n.default);t.default=c});
//# sourceMappingURL=scrollspy.min.js.map
