define(["exports","./Plugin"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,n=(i=t)&&i.__esModule?i:{default:i};var s=function(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),e};function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a="menu",r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(u,n.default),s(u,[{key:"getName",value:function(){return a}},{key:"render",value:function(){this.bindEvents(),this.$el.data("menuApi",this)}},{key:"bindEvents",value:function(){var i=this;this.$el.on("mouseenter.site.menu",".site-menu-item",function(){var e=$(this);if(!0===i.folded&&e.is(".has-sub")&&0<e.parent(".site-menu").length){var t=e.children(".site-menu-sub");i.position(e,t)}e.addClass("hover")}).on("mouseleave.site.menu",".site-menu-item",function(){var e=$(this);!0===i.folded&&e.is(".has-sub")&&0<e.parent(".site-menu").length&&(e.children(".site-menu-sub").css("max-height",""),e.removeClass("open")),e.removeClass("hover")}).on("deactive.site.menu",".site-menu-item.active",function(e){$(this).removeClass("active"),e.stopPropagation()}).on("active.site.menu",".site-menu-item",function(e){$(this).addClass("active"),e.stopPropagation()}).on("open.site.menu",".site-menu-item",function(e){var t=$(this);i.expand(t,function(){t.addClass("open")}),i.options.accordion&&t.siblings(".open").trigger("close.site.menu"),e.stopPropagation()}).on("close.site.menu",".site-menu-item.open",function(e){var t=$(this);i.collapse(t,function(){t.removeClass("open")}),e.stopPropagation()}).on("click.site.menu ",".site-menu-item",function(e){var t=$(this);t.is(".has-sub")&&$(e.target).closest(".site-menu-item").is(this)?t.is(".open")?t.trigger("close.site.menu"):t.trigger("open.site.menu"):t.is(".active")||(t.siblings(".active").trigger("deactive.site.menu"),t.trigger("active.site.menu")),e.stopPropagation()}).on("tap.site.menu","> .site-menu-item > a",function(){var e=$(this).attr("href");e&&(window.location=e)}).on("touchend.site.menu","> .site-menu-item > a",function(){var e=$(this).parent(".site-menu-item");!0===i.folded&&e.is(".has-sub")&&0<e.parent(".site-menu").length&&(e.siblings(".hover").removeClass("hover"),e.is(".hover")?e.removeClass("hover"):e.addClass("hover"))}).on("scroll.site.menu",".site-menu-sub",function(e){e.stopPropagation()})}},{key:"collapse",value:function(e,t){var i=this;e.children(".site-menu-sub").show().slideUp(this.options.speed,function(){$(this).css("display",""),$(this).find("> .site-menu-item").removeClass("is-shown"),t&&t(),i.$el.trigger("collapsed.site.menu")})}},{key:"expand",value:function(e,t){var i=this,n=e.children(".site-menu-sub"),s=n.children(".site-menu-item").addClass("is-hidden");n.hide().slideDown(this.options.speed,function(){$(this).css("display",""),t&&t(),i.$el.trigger("expanded.site.menu")}),setTimeout(function(){s.addClass("is-shown"),s.removeClass("is-hidden")},0)}},{key:"refresh",value:function(){this.$el.find(".open").filter(":not(.active)").removeClass("open")}},{key:"position",value:function(e,t){var i=e.find("> a").outerHeight(),n=this.outerHeight,s=e.position().top;t.removeClass("site-menu-sub-up").css("max-height",""),n/2<s?(t.addClass("site-menu-sub-up"),this.foldAlt&&(s-=i),t.css("max-height",s+i)):(this.foldAlt&&(s+=i),t.removeClass("site-menu-sub-up"),t.css("max-height",n-s))}}],[{key:"getDefaults",value:function(){return{speed:250,accordion:!0}}}]),u);function u(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=u.__proto__||Object.getPrototypeOf(u)).call.apply(e,[this].concat(i)));return s.folded=!0,s.foldAlt=!0,s.outerHeight=0,s}n.default.register(a,r),e.default=r});