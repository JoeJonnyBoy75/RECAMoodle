{"version":3,"sources":["loader.js"],"names":["define","$","Ajax","Tether","Event","Aria","breakpoints","Drawer","Notice","str","PubSub","ModalFactory","window","jQuery","init","popover","trigger","selector","container","delay","hide","getLegacyEvents","done","events","document","on","FILTER_CONTENT_UPDATED","change","onbeforeunload","this","form","submit","toggleClass","hasClass","removeClass","ready","tooltip","resetSidebar","availableSpace","numOfVisibleItems","$btn","$vlinks","$hlinks","numOfItems","totalSpace","breakWidths","wdmCollapsibleNavMenu","width","children","length","last","prependTo","first","appendTo","attr","addClass","outerWidth","i","w","push","currLeft","offset","left","css","body","evt","button","target","currentTarget","closest","subscribe","resize","parents","IGNORE_DRAWER_BTN","click","M","util","set_user_preference","info","get_string","prop","show","animate","scrollTop","scroll","hover","topdistance","distanceFromTop","position","top","screenHeight","height","submenuid","undefined","submenu","concat","subcourseskey","subcourses","elid","parentel","elkey","e","preventDefault","key","sectionEl","parent","find","each","label","trim","text","fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement","exitFullscreen","mozCancelFullScreen","webkitExitFullscreen","msExitFullscreen","element","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","Element","ALLOW_KEYBOARD_INPUT","msRequestFullscreen","toggleFullScreen","getElementById","quiztimer","querySelector","breadcrumb","parentNode","insertBefore","next","event","create","title","data","modal","call","methodname","args"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Template renderer for Moodle. Load and render Moodle templates with Mustache.\n *\n * @module     core/templates\n * @package    core\n * @class      templates\n * @copyright  2015 Damyon Wiese <damyon@moodle.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n * @since      2.9\n */\n\"use strict\";\ndefine([\n    'jquery',\n    'core/ajax',\n    'theme_remui/tether',\n    'core/event',\n    'theme_remui/aria',\n    'theme_remui/breakpoints',\n    'theme_remui/drawer',\n    'theme_remui/notice',\n    'core/str',\n    'core/pubsub',\n    'core/modal_factory',\n    'theme_remui/pending',\n    'theme_remui/util',\n    'theme_remui/alert',\n    'theme_remui/button',\n    'theme_remui/carousel',\n    'theme_remui/collapse',\n    'theme_remui/dropdown',\n    'theme_remui/modal',\n    'theme_remui/scrollspy',\n    'theme_remui/tab',\n    'theme_remui/tooltip',\n    'theme_remui/popover',\n    'theme_remui/skintool'\n], function(\n    $,\n    Ajax,\n    Tether,\n    Event,\n    Aria,\n    breakpoints,\n    Drawer,\n    Notice,\n    str,\n    PubSub,\n    ModalFactory\n) {\n\n    window.jQuery = $;\n    window.Tether = Tether;\n    Drawer.init();\n\n    // We do twice because: https://github.com/twbs/bootstrap/issues/10547 end.\n    $('body').popover({\n        trigger: 'focus',\n        selector: \"[data-toggle=popover][data-trigger!=hover]\"\n    });\n\n    $(\"html\").popover({\n        container: \"body\",\n        selector: \"[data-toggle=popover][data-trigger=hover]\",\n        trigger: \"hover\",\n        delay: {\n            hide: 500\n        }\n    });\n\n    // We need to call popover automatically if nodes are added to the page later.\n    Event.getLegacyEvents().done(function(events) {\n        $(document).on(events.FILTER_CONTENT_UPDATED, function() {\n            $('body').popover({\n                selector: '[data-toggle=\"popover\"]',\n                trigger: 'focus'\n            });\n\n        });\n    });\n\n    // Settings update on change.\n    $(`#id_s_theme_remui_frontpagechooser`).change(function() {\n        window.onbeforeunload = null;\n        this.form.submit();\n    });\n    Aria.init();\n    // Open Right Sidebar.\n    $(\".page-aside-switch .fa-angle-left\").on('click', function() {\n        $(\"body\").toggleClass('sidebar-open');\n        if (!$(\"body\").hasClass(\"hasblocks\")) {\n            $(\".page-aside-switch\").removeClass('d-flex');\n            $(\".page-aside-switch\").hide();\n        }\n    });\n\n    $(document).ready(function() {\n        $('[data-toggle=\"tooltip\"]').tooltip();\n        if ($(\"body\").hasClass(\"editing\") && $(\"body\").hasClass(\"hasblocks\")) {\n            $(\".page-aside-switch .fa-angle-left\").trigger('click');\n        }\n        resetSidebar();\n\n        // Collapsible menu in header implementation.\n        // Moves excess menu items to 3 dot menu on resize and based on available screen space.\n\n        // Greedy menu js implementation.\n        var $btn = $('nav.greedy .menu-toggle');\n        var $vlinks = $('nav.greedy .links');\n        var $hlinks = $('nav.greedy .hidden-links');\n        var numOfItems = 0;\n        var totalSpace = 0;\n        var breakWidths = [];\n        var availableSpace, numOfVisibleItems, requiredSpace;\n\n        // Get initial state.\n        $vlinks.children().outerWidth(function(i, w) {\n            totalSpace += w;\n            numOfItems += 1;\n            breakWidths.push(totalSpace);\n        });\n\n        /**\n         * Custom collapsible navigation menu\n         */\n        function wdmCollapsibleNavMenu() {\n            // Get instant state.\n            availableSpace = $vlinks.width() - 10;\n            numOfVisibleItems = $vlinks.children().length;\n            requiredSpace = breakWidths[numOfVisibleItems - 1];\n\n            // There is not enought space.\n            if (requiredSpace > availableSpace) {\n                $vlinks.children().last().prependTo($hlinks);\n                numOfVisibleItems -= 1;\n                wdmCollapsibleNavMenu();\n                // There is more than enough space.\n            } else if (availableSpace > breakWidths[numOfVisibleItems]) {\n                $hlinks.children().first().appendTo($vlinks);\n                numOfVisibleItems += 1;\n            }\n            // Update the button accordingly.\n            $btn.attr(\"count\", numOfItems - numOfVisibleItems);\n            if (numOfVisibleItems === numOfItems) {\n                $btn.addClass('hidden');\n            } else {\n                $btn.removeClass('hidden');\n            }\n        }\n\n        // Init collapsible nav menu.\n        wdmCollapsibleNavMenu();\n\n        // Hide / show hidden-links ul on click button.\n        $btn.on('click', function() {\n            var currLeft = $(this).offset().left - 25;\n            $hlinks.css({\n                left: currLeft + \"px\"\n            });\n            $hlinks.toggleClass('hidden');\n        });\n\n        // Close when clicking somewhere else.\n        $(document.body).on('click', function(evt) {\n            let IGNORED_ELS = 'ul.hidden-links, button.menu-toggle, .modal, .alertify, .-handled-lick';\n            if (evt.button === 0 && !$('ul.hidden-links').hasClass('hidden')) {\n                var target = evt.target;\n                if (target === evt.currentTarget || !$(target).closest(IGNORED_ELS).length) {\n                    $('ul.hidden-links').addClass('hidden');\n                }\n            }\n        });\n\n        // Resize menu when drawer opens closes.\n        PubSub.subscribe('nav-drawer-toggle-end', function() {\n            wdmCollapsibleNavMenu();\n        });\n\n        // Window listeners.\n        $(window).resize(function() {\n            wdmCollapsibleNavMenu();\n        });\n\n        // Collapsible menu JS ends.\n\n        // Auto hide messaging bar when not merged in sidebar.\n        if ($('[data-region=\"right-hand-drawer\"]').parents('#sidebar-message').length == 0) {\n            $(document.body).on('click', function(evt) {\n                if (evt.button === 0 && !$('[data-region=\"right-hand-drawer\"]').hasClass('hidden')) {\n                    // Hide Message Drawer if click outsite.\n                    var IGNORE_DRAWER_BTN = '[data-region=\"right-hand-drawer\"], [href=\"#sidebar-message\"]';\n                    var target = evt.target;\n                    if (target === evt.currentTarget || !$(target).closest(IGNORE_DRAWER_BTN).length) {\n                        $('[data-region=\"right-hand-drawer\"]').addClass(\"hidden\");\n                        $(IGNORE_DRAWER_BTN).removeClass('active');\n                    }\n                }\n            });\n        } else {\n            // Prevent messaging bar toggle when merged in sidebar.\n            $('.page-aside .nav-item .nav-link[href=\"#sidebar-message\"]').click(function() {\n                $('[data-region=\"right-hand-drawer\"]').removeClass('hidden');\n            });\n        }\n    });\n\n    // Pin & Unpin Right Sidebar.\n    $(\".page-aside-switch .fa-thumb-tack\").on('click', function() {\n        $(\"body\").removeClass('sidebar-open');\n        $(\"body\").toggleClass('sidebar-pinned');\n        if ($('body').hasClass('sidebar-pinned')) {\n            M.util.set_user_preference('pin_aside', 'true');\n            Notice.info(M.util.get_string('sidebarpinned', 'theme_remui'));\n            $(this).prop('title', M.util.get_string('unpinsidebar', 'theme_remui'));\n        } else {\n            M.util.set_user_preference('pin_aside', '');\n            Notice.info(M.util.get_string('sidebarunpinned', 'theme_remui'));\n            $(this).prop('title', M.util.get_string('pinsidebar', 'theme_remui'));\n        }\n    });\n\n    // Close Right Sidebar on click outside.\n    $(document.body).on('click', function(evt) {\n        let IGNORED_ELS = '.page-aside, .modal, .alertify, .-handled-lick';\n        if (evt.button === 0 && $('body').hasClass('sidebar-open')) {\n            var target = evt.target;\n            if (target === evt.currentTarget || !$(target).closest(IGNORED_ELS).length) {\n                $('body').removeClass('sidebar-open');\n                $(\".page-aside-switch\").addClass('d-flex');\n                $(\".page-aside-switch\").show();\n            }\n        }\n    });\n\n    // Scroll to top.\n    $(\"#gotop\").click(function() {\n        $('html, body').animate({scrollTop: 0}, $(window).scrollTop() / 6);\n        return false;\n    });\n\n    // Hide and Show Go to top button.\n    $(window).scroll(function() {\n        if ($(this).scrollTop() > 300) {\n            $('#gotop').removeClass(\"d-none\").addClass(\"d-flex\");\n        } else {\n            $('#gotop').removeClass(\"d-flex\").addClass(\"d-none\");\n        }\n    });\n\n    // Display Submenu on Hover on closed sidebar.\n    $('#nav-drawer .list-group-item:not(.activity):not([data-indent=\"1\"])').hover(function() {\n        if (!$('#nav-drawer').hasClass('closed')) {\n            return;\n        }\n        let distanceFromTop = $(this).position().top + 66;\n        let screenHeight = $(window).height();\n        $(this).addClass('hovered');\n        $('.media-body').css('top', distanceFromTop + 'px');\n        // Sub Menu.\n        let topdistance;\n        let submenuid = $(this).attr('data-target');\n        if (submenuid != undefined && submenuid != \"\") {\n            let submenu = $(`${submenuid}`);\n            if (submenu.length > 0) {\n                if (distanceFromTop < (screenHeight / 2)) {\n                    topdistance = distanceFromTop + 52;\n                } else {\n                    topdistance = distanceFromTop - $(submenu).height();\n                }\n                $(submenu).css('top', topdistance + 'px');\n                $(submenu).addClass('pop-over');\n            }\n        }\n        // My Courses data-indent = 1.\n        let subcourseskey = $(this).attr('data-key');\n        if (subcourseskey != undefined && subcourseskey == \"mycourses\") {\n            var subcourses = $('#nav-drawer .mycoursesubmenu');\n            if (distanceFromTop < (screenHeight / 2)) {\n                topdistance = distanceFromTop + 52;\n                $(subcourses).css('top', topdistance + 'px');\n                $(subcourses).addClass('pop-over');\n            } else {\n                $(subcourses).addClass('pop-over');\n                topdistance = distanceFromTop - $(subcourses).height();\n                $(subcourses).css('top', topdistance + 'px');\n            }\n        }\n    }, function() {\n        $(this).removeClass('hovered');\n        $('.sub-menu').removeClass('pop-over');\n        $('#nav-drawer .mycoursesubmenu').removeClass('pop-over');\n    });\n\n    $('.sub-menu').hover(function() {\n        let elid = $(this).attr('id');\n        let parentel = $('#nav-drawer .list-group-item[data-target=\"#' + elid + '\"]');\n        $(parentel).trigger('mouseenter');\n        $(parentel).trigger('hover');\n        $(parentel).trigger('mouseover');\n    }, function() {\n        let elid = $(this).attr('id');\n        let parentel = $('#nav-drawer .list-group-item[data-target=\"#' + elid + '\"]');\n        $(parentel).trigger('mouseout');\n    });\n\n    // My Courses.\n    $('#nav-drawer .mycoursesubmenu').hover(function() {\n        let elkey = $(this).attr('data-parent-key');\n        let parentel = $('#nav-drawer .list-group-item[data-key=\"' + elkey + '\"]');\n        $(parentel).trigger('mouseenter');\n        $(parentel).trigger('hover');\n        $(parentel).trigger('mouseover');\n    }, function() {\n        let elkey = $(this).attr('data-parent-key');\n        let parentel = $('#nav-drawer .list-group-item[data-key=\"' + elkey + '\"]');\n        $(parentel).trigger('mouseout');\n    });\n\n    // Flat navigation mycourses ul dropdown support.\n    $('#nav-drawer .toggle-menu').click(function(e) {\n        e.preventDefault();\n        let key = $(this).attr('data-key');\n        $('#nav-drawer .toggle-menu').toggleClass('show');\n        $('#nav-drawer a.list-group-item[data-parent-key=\"' + key + '\"]').toggleClass('show');\n    });\n\n    // Toggle section show or hide in default course formats.\n    $('.sectionname .toggle-section').click(function() {\n        let parentEl = $(this).parent().parent().parent();\n        let sectionEl = parentEl.find('ul.section');\n        if (sectionEl.length) {\n            $(this).toggleClass('down');\n            $(sectionEl).toggleClass('hidden');\n        }\n    });\n\n    // Add signup form fields placeholders.\n    $(\".signupform .fcontainer .form-group\").each(function() {\n        var label = $.trim($(\".col-form-label\", this).text());\n        $(\".felement input\", this).attr('placeholder', label);\n    });\n\n    // Function for fullscreen.\n    $('#toggleFullscreen').click(function() {\n        $(this).toggleClass('collapse');\n        toggleFullScreen();\n    });\n\n    /**\n     * Toggle fullscreen\n     */\n    function toggleFullScreen() {\n        if (document.fullscreenElement ||\n            document.webkitFullscreenElement ||\n            document.mozFullScreenElement ||\n            document.msFullscreenElement) {\n            if (document.exitFullscreen) {\n                document.exitFullscreen();\n            } else if (document.mozCancelFullScreen) {\n                document.mozCancelFullScreen();\n            } else if (document.webkitExitFullscreen) {\n                document.webkitExitFullscreen();\n            } else if (document.msExitFullscreen) {\n                document.msExitFullscreen();\n            }\n        } else {\n            var element = $('html')[0];\n            if (element.requestFullscreen) {\n                element.requestFullscreen();\n            } else if (element.mozRequestFullScreen) {\n                element.mozRequestFullScreen();\n            } else if (element.webkitRequestFullscreen) {\n                element.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\n            } else if (element.msRequestFullscreen) {\n                element.msRequestFullscreen();\n            }\n        }\n    }\n\n    // Move Quiz Timer from sidebar to main content in mobile view.\n    if (document.getElementById('quiz-timer')) {\n        var quiztimer = document.querySelector('#quiz-timer');\n        var breadcrumb = document.querySelector(\"#region-main\");\n\n        if (quiztimer) {\n            breadcrumb.parentNode.insertBefore(quiztimer, breadcrumb);\n        }\n    }\n\n    // Fix to get message details when no blocks are present.\n    $('.page-aside .page-aside-switch').click(function() {\n        $(this).next().find('.nav-item .nav-link.active').trigger('click');\n    });\n\n    /**\n     * Close drawer and sidebar automatically on smaller window size.\n     */\n    function resetSidebar() {\n        var width = $(window).width();\n        if (width < 992) {\n            if ($('body').hasClass('drawer-open-left')) {\n                $('button[data-action=\"toggle-drawer\"]').trigger('click');\n            }\n            if ($('body').hasClass('sidebar-open')) {\n                $('.page-aside-switch .fa-angle-left').trigger('click');\n            }\n            $('body').removeClass('sidebar-pinned');\n        }\n    }\n\n    // Resize listner for reset sidebar function.\n    $(window).resize(function() {\n        resetSidebar();\n    });\n\n    $('.navbar-toggler').click(function() {\n        $('.navbar-nav.right-menu').toggleClass('show');\n    });\n\n    $('body').on('click', '.showchangelog', function(event) {\n        event.preventDefault();\n        var trigger = $('#create-modal');\n        ModalFactory.create({\n            title: M.util.get_string('changelog', 'theme_remui'),\n            body: $(this).data('log')\n        }, trigger).done(function(modal) {\n            modal.show();\n        });\n        return;\n    });\n\n    // Hide update-nag ribbon.\n    $('.update-nag [data-dismiss=\"alert\"]').click(function() {\n        Ajax.call([{\n            'methodname': 'theme_remui_hide_update',\n            'args': {}\n        }]);\n    });\n\n    // Save the preference, after dismiss the announcement\n    $('.site-announcement #dismiss_announcement').click(function(){\n        M.util.set_user_preference('remui_dismised_announcement', true);\n    });\n});\n"],"file":"loader.min.js"}