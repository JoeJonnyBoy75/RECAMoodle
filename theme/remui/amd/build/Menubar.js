define(["exports","jquery","./Component"],function(e,t,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(t),a=s(i);function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(e,t,i){return t&&u(e.prototype,t),i&&u(e,i),e};function u(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=(0,n.default)("body"),c=(0,n.default)("html"),h=(o(d,[{key:"init",value:function(){r.is(".site-menubar-native")?this.native=!0:this.api=this.$el.asScrollable({namespace:"scrollable",skin:"scrollable-inverse",direction:"vertical",contentSelector:">",containerSelector:">"}).data("asScrollable")}},{key:"update",value:function(){this.api&&this.api.update()}},{key:"enable",value:function(){this.native||(this.api||this.init(),this.api&&this.api.enable())}},{key:"disable",value:function(){this.api&&this.api.disable()}}]),d);function d(e){l(this,d),this.$el=e,this.native=!1,this.api=null,this.init()}var f=(o(p,[{key:"init",value:function(){this.api=this.$el.asHoverScroll({namespace:"hoverscorll",direction:"vertical",list:".site-menu",item:"> li",exception:".site-menu-sub",fixed:!1,boundary:100,onEnter:function(){},onLeave:function(){}}).data("asHoverScroll")}},{key:"update",value:function(){this.api&&this.api.update()}},{key:"enable",value:function(){this.api||this.init(),this.api&&this.api.enable()}},{key:"disable",value:function(){this.api&&this.api.disable()}}]),p);function p(e){l(this,p),this.$el=e,this.api=null,this.init()}var b=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(m,a.default),o(m,[{key:"initialize",value:function(){0<this.$menuBody.length?(this.initialized=!0,this.scrollable=new h(this.$menuBody),this.hoverscroll=new f(this.$menuBody),c.removeClass("css-menubar").addClass("js-menubar"),r.is(".site-menubar-top")&&(this.top=!0),r.is(".site-menubar-fold-alt")&&(this.foldAlt=!0),this.change(this.type)):this.initialized=!1}},{key:"process",value:function(){(0,n.default)(".site-menu-sub").on("touchstart",function(e){e.stopPropagation()}).on("ponitstart",function(e){e.stopPropagation()})}},{key:"getMenuApi",value:function(){return this.$menu.data("menuApi")}},{key:"setMenuData",value:function(){var e=this.getMenuApi();e&&(e.folded=this.folded,e.foldAlt=this.foldAlt,e.outerHeight=this.$el.outerHeight())}},{key:"update",value:function(){this.scrollable.update(),this.hoverscroll.update()}},{key:"change",value:function(e){this.initialized&&(this.reset(),this[e](),this.setMenuData())}},{key:"animate",value:function(e){var t=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){};r.addClass("site-menubar-changing"),e.call(this),this.$el.trigger("changing.site.menubar");var n=this.getMenuApi();n&&n.refresh(),setTimeout(function(){i.call(t),r.removeClass("site-menubar-changing"),t.update(),t.$el.trigger("changed.site.menubar")},500)}},{key:"reset",value:function(){r.removeClass("site-menubar-hide site-menubar-open site-menubar-fold site-menubar-unfold"),c.removeClass("disable-scrolling")}},{key:"open",value:function(){this.animate(function(){r.addClass("site-menubar-open site-menubar-unfold"),c.addClass("disable-scrolling")},function(){this.scrollable.enable()}),this.type="open"}},{key:"hide",value:function(){this.hoverscroll.disable(),this.animate(function(){r.addClass("site-menubar-hide site-menubar-unfold")},function(){this.scrollable.enable()}),this.type="hide"}},{key:"unfold",value:function(){this.hoverscroll.disable(),this.animate(function(){r.addClass("site-menubar-unfold"),this.folded=!1},function(){this.scrollable.enable(),this.triggerResize()}),this.type="unfold"}},{key:"fold",value:function(){this.scrollable.disable(),this.animate(function(){r.addClass("site-menubar-fold"),this.folded=!0},function(){this.hoverscroll.enable(),this.triggerResize()}),this.type="fold"}}]),m);function m(){var e;l(this,m);for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=m.__proto__||Object.getPrototypeOf(m)).call.apply(e,[this].concat(i)));a.top=!1,a.folded=!1,a.foldAlt=!1,a.$menuBody=a.$el.children(".site-menubar-body"),a.$menu=a.$el.find("[data-plugin=menu]"),!1===r.data("autoMenubar")||r.is(".site-menubar-keep")?r.hasClass("site-menubar-fold")?a.auto="fold":r.hasClass("site-menubar-unfold")&&(a.auto="unfold"):a.auto=!0;var s=Breakpoints.current();if(!0===a.auto){if(s)switch(s.name){case"lg":a.type="unfold";break;case"md":case"sm":a.type="fold";break;case"xs":a.type="hide"}}else switch(a.auto){case"fold":"xs"==s.name?a.type="hide":a.type="fold";break;case"unfold":"xs"==s.name?a.type="hide":a.type="unfold"}return a}e.default=b});