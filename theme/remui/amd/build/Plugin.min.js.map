{"version":3,"sources":["Plugin.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","define","exports","_jquery","value","pluginFactory","getDefaults","getPlugin","getPluginAPI","Plugin","undefined","obj","_jquery2","__esModule","default","plugins","apis","$el","options","arguments","this","name","getName","isRendered","fn","render","api","registerApi","_api","split","event","concat","func","callback","e","plugin","data","extend","initialize","selector","context","off","on","console","warn","PluginClass"],"mappings":"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","sourcesContent":["\"use strict\";\ndefine([\"exports\", \"jquery\"], function (exports, _jquery) {\n\n    Object.defineProperty(exports, \"__esModule\", {\n        value: true\n    });\n    exports.pluginFactory = exports.getDefaults = exports.getPlugin = exports.getPluginAPI = exports.Plugin = undefined;\n\n    var _jquery2 = _interopRequireDefault(_jquery);\n\n    function _interopRequireDefault(obj) {\n        return obj && obj.__esModule ? obj : {\n            default: obj\n        };\n    }\n\n    let plugins = {};\n    let apis = {};\n\n    class Plugin {\n        constructor($el, options = {}) {\n            this.name = this.getName();\n            this.$el = $el;\n            this.options = options;\n            this.isRendered = false;\n        }\n\n        getName() {\n            return 'plugin';\n        }\n\n        render() {\n            if (_jquery2.default.fn[this.name]) {\n                this.$el[this.name](this.options);\n            } else {\n                return false;\n            }\n        }\n\n        initialize() {\n            if (this.isRendered) {\n                return false;\n            }\n\n            this.render();\n            this.isRendered = true;\n        }\n\n        static getDefaults() {\n            return {};\n        }\n\n        static register(name, obj) {\n            if (typeof obj === 'undefined') {\n                return;\n            }\n\n            plugins[name] = obj;\n\n            if (typeof obj.api !== 'undefined') {\n                Plugin.registerApi(name, obj);\n            }\n        }\n\n        static registerApi(name, obj) {\n            let api = obj.api();\n\n            if (typeof api === 'string') {\n                let api = obj.api().split('|');\n                let event = api[0] + `.plugin.${name}`;\n                let func = api[1] || 'render';\n\n                let callback = function (e) {\n                    let $el = (0, _jquery2.default)(this);\n                    let plugin = $el.data('pluginInstance');\n\n                    if (!plugin) {\n                        plugin = new obj($el, _jquery2.default.extend(true, {}, getDefaults(name), $el.data()));\n                        plugin.initialize();\n                        $el.data('pluginInstance', plugin);\n                    }\n\n                    plugin[func](e);\n                };\n\n                apis[name] = function (selector, context) {\n                    if (context) {\n                        (0, _jquery2.default)(context).off(event);\n                        (0, _jquery2.default)(context).on(event, selector, callback);\n                    } else {\n                        (0, _jquery2.default)(selector).on(event, callback);\n                    }\n                };\n            } else if (typeof api === 'function') {\n                apis[name] = api;\n            }\n        }\n\n    }\n\n    exports.default = Plugin;\n\n    function getPluginAPI(name) {\n        if (typeof name === 'undefined') {\n            return apis;\n        } else {\n            return apis[name];\n        }\n    }\n\n    function getPlugin(name) {\n        if (typeof plugins[name] !== 'undefined') {\n            return plugins[name];\n        } else {\n            console.warn('Plugin:' + name + ' has no warpped class.');\n            return false;\n        }\n    }\n\n    function getDefaults(name) {\n        let PluginClass = getPlugin(name);\n\n        if (PluginClass) {\n            return PluginClass.getDefaults();\n        } else {\n            return {};\n        }\n    }\n\n    function pluginFactory(name, $el, options = {}) {\n        let PluginClass = getPlugin(name);\n\n        if (PluginClass && typeof PluginClass.api === 'undefined') {\n            return new PluginClass($el, _jquery2.default.extend(true, {}, getDefaults(name), options));\n        } else if (_jquery2.default.fn[name]) {\n            let plugin = new Plugin($el, options);\n\n            plugin.getName = function () {\n                return name;\n            };\n\n            plugin.name = name;\n            return plugin;\n        } else if (typeof PluginClass.api !== 'undefined') {\n            return false;\n        } else {\n            console.warn('Plugin:' + name + ' script is not loaded.');\n            return false;\n        }\n    }\n\n    exports.Plugin = Plugin;\n    exports.getPluginAPI = getPluginAPI;\n    exports.getPlugin = getPlugin;\n    exports.getDefaults = getDefaults;\n    exports.pluginFactory = pluginFactory;\n\n    return Plugin;\n});"],"file":"Plugin.min.js"}