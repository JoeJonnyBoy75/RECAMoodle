define(["exports","jquery","./Config","./Base","./Menubar","./GridMenu","./Sidebar","./PageAside"],function(e,t,n,a,i,o,r,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getInstance=e.run=e.Site=void 0;var l=v(t),s=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(n),d=v(a),c=v(i),f=v(o),p=v(r),g=v(u);function v(e){return e&&e.__esModule?e:{default:e}}var h=function(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),e};function b(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var m=document,y=(0,l.default)(document),k=(0,l.default)("body"),w=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(C,d.default),h(C,[{key:"initialize",value:function(){var e=this;this.startLoading(),this.initializePluginAPIs(),this.initializePlugins(),this.initComponents(),setTimeout(function(){e.setDefaultState()},500)}},{key:"process",value:function(){this.polyfillIEWidth(),this.initBootstrap(),this.setupMenubar(),this.setupGridMenu(),this.setupFullScreen(),this.setupMegaNavbar(),this.setupTour(),this.setupNavbarCollpase(),this.$el.on("click",".dropdown-menu-media",function(e){e.stopPropagation()})}},{key:"_getDefaultMeunbarType",value:function(){var e=this.getCurrentBreakpoint(),t=!1;switch(!1!==k.data("autoMenubar")&&!k.is(".site-menubar-keep")||(k.hasClass("site-menubar-fold")?t="fold":k.hasClass("site-menubar-unfold")&&(t="unfold")),e){case"lg":t=t||"unfold";break;case"md":case"sm":t=t||"fold";break;case"xs":t="hide"}return t}},{key:"setDefaultState",value:function(){var e=this.getDefaultState();this.menubar.change(e.menubarType),this.gridmenu.toggle(e.gridmenu)}},{key:"getDefaultState",value:function(){return{menubarType:this._getDefaultMeunbarType(),gridmenu:!1}}},{key:"menubarType",value:function(t){function n(e){e.toggleClass("hided",!("open"===t)),e.toggleClass("unfolded",!("fold"===t))}(0,l.default)('[data-toggle="menubar"]').each(function(){var e=(0,l.default)(this),t=(0,l.default)(this).find(".hamburger");0<t.length?n(t):n(e)})}},{key:"initComponents",value:function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0],this.menubar=new c.default({$el:(0,l.default)(".site-menubar")}),this.gridmenu=new f.default({$el:(0,l.default)(".site-gridmenu")}),this.sidebar=new p.default;var e=(0,l.default)(".page-aside");0<e.length&&(this.aside=new g.default({$el:e}),this.aside.run()),this.menubar.run(),this.sidebar.run()}},{key:"getCurrentBreakpoint",value:function(){var e=Breakpoints.current();return e?e.name:"lg"}},{key:"initBootstrap",value:function(){y.tooltip({selector:"[data-tooltip=true]",container:"body"}),(0,l.default)('[data-toggle="tooltip"]').tooltip(),(0,l.default)('[data-toggle="popover"]').popover()}},{key:"polyfillIEWidth",value:function(){if(navigator.userAgent.match(/IEMobile\/10\.0/)){var e=m.createElement("style");e.appendChild(m.createTextNode("@-ms-viewport{width:auto!important}")),m.querySelector("head").appendChild(e)}}},{key:"setupFullScreen",value:function(){"undefined"!=typeof screenfull&&(y.on("click",'[data-toggle="fullscreen"]',function(){return screenfull.enabled&&screenfull.toggle(),!1}),screenfull.enabled&&m.addEventListener(screenfull.raw.fullscreenchange,function(){(0,l.default)('[data-toggle="fullscreen"]').toggleClass("active",screenfull.isFullscreen)}))}},{key:"setupGridMenu",value:function(){var n=this;y.on("click",'[data-toggle="gridmenu"]',function(){var e=(0,l.default)(this),t=n.gridmenu.isOpened;t?e.addClass("active").attr("aria-expanded",!0):e.removeClass("active").attr("aria-expanded",!1),n.gridmenu.toggle(!t)})}},{key:"setupMegaNavbar",value:function(){y.on("click",".navbar-mega .dropdown-menu",function(e){e.stopPropagation()}).on("show.bs.dropdown",function(e){var t=(0,l.default)(e.target),n=(e.relatedTarget?(0,l.default)(e.relatedTarget):t.children('[data-toggle="dropdown"]')).data("animation");if(n){var a=t.children(".dropdown-menu");a.addClass("animation-"+n).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){a.removeClass("animation-"+n)})}}).on("shown.bs.dropdown",function(e){var t=(0,l.default)(e.target).find(".dropdown-menu-media > .list-group");if(0<t.length){var n=t.data("asScrollable");n?n.update():t.asScrollable({namespace:"scrollable",contentSelector:"> [data-role='content']",containerSelector:"> [data-role='container']"})}})}},{key:"setupMenubar",value:function(){var t=this;(0,l.default)(document).on("click",'[data-toggle="menubar"]:visible',function(){var e=t.menubar.type;switch(e){case"fold":e="unfold";break;case"unfold":e="fold";break;case"open":e="hide";break;case"hide":e="open"}return t.menubar.change(e),t.menubarType(e),!1}),Breakpoints.on("change",function(){t.menubar.type=t._getDefaultMeunbarType(),t.menubar.change(t.menubar.type)})}},{key:"setupNavbarCollpase",value:function(){(0,l.default)(document).on("click","[data-target='#site-navbar-collapse']",function(e){var t=(0,l.default)(this).hasClass("collapsed");k.addClass("site-navbar-collapsing"),k.toggleClass("site-navbar-collapse-show",!t),setTimeout(function(){k.removeClass("site-navbar-collapsing")},350)})}},{key:"startLoading",value:function(){if(void 0===l.default.fn.animsition)return!1;s.get("assets"),k.animsition({inClass:"fade-in",outClass:"fade-out",inDuration:800,outDuration:500,loading:!0,loadingClass:"loader-overlay",loadingParentElement:"html",loadingInner:'\n      <div class="loader-content">\n        <div class="loader-index">\n          <div></div>\n          <div></div>\n          <div></div>\n          <div></div>\n          <div></div>\n          <div></div>\n        </div>\n      </div>',onLoadEvent:!0})}},{key:"setupTour",value:function(e){if(void 0===this.tour){if("undefined"==typeof introJs)return;var t=(0,l.default)("body").css("overflow"),n=this,a=s.get("tour");this.tour=introJs(),this.tour.onbeforechange(function(){(0,l.default)("body").css("overflow","hidden")}),this.tour.oncomplete(function(){(0,l.default)("body").css("overflow",t)}),this.tour.onexit(function(){(0,l.default)("body").css("overflow",t)}),this.tour.setOptions(a),(0,l.default)(".site-tour-trigger").on("click",function(){n.tour.start()})}}}]),C);function C(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,C),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(C.__proto__||Object.getPrototypeOf(C)).apply(this,arguments))}var M=null;function _(){return M||(M=new w),M}e.default=w,e.Site=w,e.run=function(){_().run()},e.getInstance=_});